\documentclass{article}

\begin{document}
\begin{coq_example}

Inductive RULERG (MS : GmethPost) (MI : GmethInv ):Gstmt -> Gassertion -> Prop :=
 
 | AffectRuleRG : forall   x e (post : Gassertion) , 
   (forall  (s1 s2: state) (g1 g2 : gState ),s2 = update s1 x (eval_expr s1 e) -> 
   g1 = g2 ->
   post s1 g1  nil s2 g2)  ->
   RULERG MS  MI (GAffect x e) post
 
 | IfRuleRG : forall   (e : expr) (stmtT stmtF: Gstmt ) ( post1  post2 post : Gassertion) , 
   (forall ( s1 s2: state) (g1 g2 : gState ) event,  
      (not (eval_expr s1 e = 0) -> post1 s1  g1 event s2 g2 ) -> 
      (eval_expr s1 e = 0 ->  post2 s1 g1 event s2 g2)  -> 
   post s1 g1 event s2 g2 ) ->
   RULERG MS MI stmtT   post1   ->
   RULERG MS MI stmtF   post2   ->
   RULERG MS MI (GIf e stmtT stmtF) post 

 | WhileRuleRG : forall   (st : Gstmt ) ( post post1   : Gassertion) e ( inv : Gassertion)   ,
   (forall s1 s2 g1 g2 event, post1 s1 g1 event s2 g2   ->  post s1 g1  event s2 g2) ->
   (forall s g, eval_expr s e = 0  -> post1 s g nil s g   ) ->  
   RULERG MS MI st post1     -> 
   RULETG MS st  inv  ->
   (forall  s1 s2 s3 g1 g2 g3 e1 e2,  ( inv s1 g1 e1 s2 g2  -> eval_expr s1 e <>  0 -> post1 s2 g2  e2 s3 g3 -> post1 s1 g1 (app e1 e2) s3 g3) )->
   RULERG MS  MI  (GWhile e st) post  


 |  SeqRuleRG : forall  (stmt1 stmt2: Gstmt ) (post  post1 postT  postRst2 : Gassertion), 
  ( forall s1 s2  e g1 g2 , ( post1 s1 g1 e s2 g2 -> post s1 g1  e s2 g2 )) -> 
   (forall s1 s2 s3 e1 e2 g1 g2 g3,  postT s1 g1 e1 s2 g2 -> postRst2 s2 g2 e2 s3 g3 ->  post1 s1 g1 (app e1 e2 ) s3 g3 ) -> 
   RULERG MS MI stmt1  post1 ->
   RULETG  MS stmt1   postT -> 
   RULERG MS MI stmt2 postRst2   ->
   RULERG MS MI (GSseq stmt1 stmt2) post

 | SkipRuleRG :   forall  (post: Gassertion),
   ( forall (s1 s2: state ) g1 g2  ,  s1 = s2 -> g1 = g2 -> post s1 g1 nil s2 g2 ) ->
   RULERG MS MI GSkip  post

 | SetRuleG :  forall   x e (post : Gassertion) , 
     (forall  (s1 s2: state) (g1 g2 : gState ),   g2 = gUpdate g1 x (gEval_expr  s1 g1 e) -> s1 = s2  -> post s1 g1  nil s2 g2)  ->
     RULERG MS  MI (GSet x e) post


 | CallRuleRG : forall   ( mName : methodNames ) ( post   : Gassertion ) , 
   (forall (s1 s2 : state ) event g1 g2,  ( MI mName ) s1 g1 event s2 g2  -> post s1 g1  event s2 g2 ) ->
   RULERG MS  MI (GCall mName )  post

 | SignalRuleRG : forall   ( post   : Gassertion ) event, 
    ( forall (s1 s2: state ) g1 g2 ,  s1 = s2 -> g1 = g2 -> post s1 g1 (event :: nil) s2 g2 ) ->   
    RULERG MS MI (GSignal event)  post. 
\end{coq_example}
\end{document}
