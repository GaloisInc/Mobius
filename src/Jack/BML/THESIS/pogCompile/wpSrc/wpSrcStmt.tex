
\subsubsection{Statements}\label{pog:wpSrc:wpStmt}
In the following, we present the rules of the predicate transformer for 
control statements.  

\begin{itemize}

\item integer and boolean constant access 
  $$ \begin{array}{l}
           \wpSrcStmt{ \stmt_1;\stmt_2}{\normalPostSrc }{ \excPostSrc } = \\
	   \\
	   \wpSrcStmt{\stmt_1 }{\wpSrcStmt{\stmt_2 }{\normalPostSrc }{ \excPostSrc}} { \excPostSrc} 
     \end{array}
  $$
  
 \item assignment
       \begin{itemize}
	 \item local variable assignemnt
	  $$ \begin{array}{l} \wpSrcStmt{ \expressionSrc_1 = \expressionSrc_2}{\normalPostSrc }{ \excPostSrc } = \\
               \\
                \wpSrcExpr{\expressionSrc_2}{\\ \phantom{wpiSr} %\wpSrcExpr{\expressionSrc_1}
		                                     \normalPostSrc\substitution{\expressionSrc_1}{v_2}  
                                                                 %         {\excPostSrc}
									%  {v_1}  
                                          }
		                         {\\\phantom{wpiSr} \excPostSrc}{v_2}
          \end{array}
	$$  
            
      \item instance field assignemnt


  $$ \begin{array}{l} \wpSrcStmt{ \expressionSrc_1.\fieldd = \expressionSrc_2}{\normalPostSrc }{ \excPostSrc } = \\
               \\
  \wpSrcStmt{\expressionSrc_1}{  \\
   \phantom{wpiSr} \wpSrcExpr{\expressionSrc_2 }{ \\
   \phantom{wpiSr}\phantom{wpiSr}
 \begin{array}{l}
        v_1 \neq \Mynull  \Rightarrow \\
	         \phantom{wpiSr}  \normalPostSrc \substitution{\fieldd}{\update{\fieldd}{ v_1}{  v_2}}   \\
          \wedge \\
        v_1  = \Mynull  \Rightarrow  \\
	  \phantom{wpiSr}   \excPostSrc(\texttt{NullPointerExc}) 
  \end{array}}{ \\ \phantom{wpiSr}\phantom{wpiSr}  \excPostSrc}{v_2} 
}{ \\ \phantom{wpiSr}  \excPostSrc}{v_1} \\


          \end{array}
	$$  
\end{itemize}
		                         
\item if statement
 $$ \begin{array}{l}\wpSrcStmt{ \begin{array}{l} \Myif \  (\expressionSrcRel)\\  \Mythen  \{ \stmt_1 \} \\  \Myelse \ \{ \stmt_2 \} \end{array}}{\normalPostSrc}{ \excPostSrc } = \\
     \\ 

    \wpSrcExpr{ \expressionSrcRel }{ \\
       \phantom{wpiSr}  \begin{array}{l}  
	 v = \Mytrue  \Rightarrow \wpSrcStmt{\stmt_1 }{\normalPostSrc }{ \excPostSrc } \\
	 \wedge \\
	 v = \Myfalse    \Rightarrow \wpSrcStmt{\stmt_2 }{\normalPostSrc }{ \excPostSrc } \\
	 \end{array}
     } {\\  \phantom{wpiSr}  \excPostSrc }{v}
    
    \end{array}
 $$
  
				


\item throw exceptions 
	$$ \begin{array}{l}   
              \wpSrcStmt{ \throw \ \expressionSrc }{ \normalPostSrc}{\excPostSrc} = \\
	      \\
	      \wpSrcExpr{\expressionSrc}{\\ \phantom{wpiSr} 
                  \begin{array}{l}
		       
	                v = \Mynull \Rightarrow \excPostSrc( \texttt{NullPointerExc} )  \\
			\wedge \\
			 v \neq \Mynull \Rightarrow\\
			 \Myspace
			  \begin{array}{l}  
				 \forall \mbox{\rm\texttt{Exc} } , \\
				 \typeof{ \expressionSrc } <: \mbox{\rm\texttt{Exc} }   \Rightarrow \\
				 \Myspace   \methodd.\excPostSrc( \mbox{\rm\texttt{Exc} }    ) 
			  \end{array} 

			  
	          \end{array}}   
		     { \\ \phantom{wpiSr}  \excPostSrc}{v} 
	   \end{array}        $$


 \item try catch statement
   $$ \begin{array}{l}   
              \wpSrcStmt{ \try \ \{ \stmt_1 \} \ \catch (\texttt{Exc} \ c )\ \{ \stmt_2 \} } { \normalPostSrc}{\excPostSrc} = \\
              \\
	      \wpSrcStmt{ \stmt_1}{ \\ \phantom{wpiSr} \normalPostSrc}{ \\ \phantom{wpiSr} \excPostSrc \oplus [\texttt{Exc} \longrightarrow \wpSrcStmt{\stmt_2}{ \normalPostSrc}{\excPostSrc}  ] }
       \end{array} 
   $$

\item try finally 

  $$   \begin{array}{l}   
              \wpSrcStmt{ \try \ \{ \stmt_1 \} \ \finally \ \{ \stmt_2 \} } { \normalPostSrc}{\excPostSrc} = \\
              \\
	 \wpSrcStmt{ \stmt_1}{\\ \phantom{wpiSr} \wpSrcStmt{\stmt_2}{ \normalPostSrc} { \excPostSrc}}{ \\ \phantom{wpiSr}
          \excPostSrc \oplus [\mbox{\rm\texttt{Exception}}  \longrightarrow \wpSrcStmt{\stmt_2}{ \excPostSrc( \mbox{\rm\texttt{Exception}}  )}{\excPostSrc}  ] }
       \end{array} $$

where $exc$ is the exception object thrown by $\stmt_1$.


% \item try catch  finally 
%  $$   \begin{array}{l}   
%              \wpSrcStmt{ \begin{array}{l} \try \ \{ \stmt_1 \} \\ \catch( Class \ c)  \ \{ \stmt_2 \} \\  \finally \ \{ \stmt_3 \} \end{array} } { \normalPostSrc}{\excPostSrc} \\
%              = \\
%              
%	 \wpSrcStmt{\begin{array}{l}  \try \ \{ \begin{array}{l} \try \ \{ \stmt_1 \} \\ \catch(Class \ c) \ \{ \stmt_2 \} \end{array}\}  \\ \finally \ \{ \stmt_3 \} \end{array}  }{ \normalPos%tSrc}{\excPostSrc} 
%       \end{array} $$


\item loop   statement
     $$\begin{array}{l}   
              \wpSrcStmt{ \while \ (\expressionSrcRel) \ \lbrack \invariant, \modLoop \rbrack \  \do \ \{ \stmt \}}{ \normalPostSrc}{\excPostSrc} = \\
	      \\
	       \invariant \ \wedge\\
	       \forall \  m, m \in \modLoop , \\
	       \Myspace \invariant \Rightarrow \\
	 	     \Myspace    \Myspace \wpSrcExpr{\expressionSrcRel}{\\\phantom{wp^{src}} 
		     \begin{array}{l}  		
		           \Myspace v = \Mytrue  \Rightarrow \  \wpSrcStmt{ \stmt }{\invariant} {\excPostSrc}  \\ 
		           \Myspace v = \Myfalse  \Rightarrow  \normalPostSrc
		     \end{array}
	      }{ \\ \Myspace \phantom{wp^{src}} \excPostSrc}{v} 
	      
        \end{array}
     $$


\item return statement
      $$ \begin{array}{l}  
               \wpSrcStmt{ \returnSrc \ \expressionSrc }{ \normalPostSrc}{\excPostSrc} = \\
               \wpSrcExpr{ \expressionSrc}{ \normalPostSrc \substitution{\result }{ v }} { \excPostSrc}{v} 
         \end{array} $$
where \result is a specification variable that can be met in the postcondition and denotes to the value returned of a non void method
\end{itemize}

