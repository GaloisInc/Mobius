\subsection{Substitution} \label{subst}
Substitution  is defined inductively 
in a standard way over the expression and formula structure. Still, we
extend substitution to deal with field and array updates as follows:

$$ \substitution{\expressionSrc}{ \fieldd }{ \update{\fieldd}{\expressionSrc}{\expressionSrc} } $$
This substitution affects only field access expressions.
 For instance, the following substitution does not change the variable \texttt{a}: 
$$
 \substitution{\mbox{\rm \texttt{a}} }{ \fieldd }{ \update{\fieldd}{\expressionSrc}{\expressionSrc} } =\mbox{\rm \texttt{a}}
$$ 
Field substitution affects only field objects as in  the following example: 

$$
 \substitution{\mbox{\rm \texttt{b}}.\fieldd }{ \fieldd }{ \update{\fieldd}{a}{3} } = \mbox{\rm \texttt{b}}. \update{\fieldd}{a}{3}
$$ 
Here, the substitution affects the field expression by making an update over the field \fieldd : $\mbox{\rm \texttt{b}}. \update{\fieldd}{a}{3}$.
The semantics of the resulting expression is that if \mbox{\rm \texttt{b}} = \mbox{\rm \texttt{a}}  then the whole expression 
$\mbox{\rm \texttt{b}}. \update{\fieldd}{a}{3}$ simplifies to $3$ otherwise simplifies to $\mbox{\rm \texttt{b}}.\fieldd $.
 
 %This  done by establishing the substitution rule for field access as follows:
 %$$  \substitution{\fieldd ( \expressionSrc^1)}{ \expressionSrc^2}{ \expressionSrc^3} =
 %\substitution{\fieldd}{ \expressionSrc^2}{ \expressionSrc^3} (  \substitution{ \expressionSrc^1  }{ \expressionSrc^2}{ \expressionSrc^3}) $$


% Let us see how we define  substitution over field objects:
Formally, we define substitution over field objects as follows:
$$  
\begin{array}{l}
\substitution{\fieldAccess{\expressionSrc}{\fieldd_1}}{\fieldd_2}{ \fieldd_2[ \oplus  \expressionSrc_1 \longrightarrow  \expressionSrc_2 ] } = \\\\
\left\{\begin{array}{ll}
       \fieldAccess{\expressionSrc}{\fieldd_1}    & if \ \fieldd_1 \neq \fieldd_2 \\
       & \\
       \fieldAccess{\expressionSrc} {\fieldd_2[ \oplus  \expressionSrc_1 \longrightarrow  \expressionSrc_2 ]} & else 
 \end{array}
\right. \\
\\
\\
\substitution {\update{\fieldAccess{\expressionSrc}{\fieldd_1}}{  \expressionSrc_1 }{  \expressionSrc_2}} {\fieldd_2}{  \update{\fieldd_2}{  \expressionSrc_3 }{  \expressionSrc_4}       } = \\\\
\left\{\begin{array}{ll}  

\update{\fieldd_1}{ \substitution { \expressionSrc_1}{\fieldd_2}{  \update{\fieldd_2}{  \expressionSrc_3 }{  \expressionSrc_4}}  }{ \substitution { \expressionSrc_2}{\fieldd_2}{  \update{\fieldd_2}{  \expressionSrc_3 }{  \expressionSrc_4}} } & if \ \fieldd_1 \neq \fieldd_2  \\

%\fieldd[ \oplus \mbox{ \rm \texttt{r} }\substitution{ \expressionSrc_1}{ \expressionSrc_2} \longrightarrow  \mbox{ \rm \texttt{v} }\substitution{ \expressionSrc_1}{ \expressionSrc_2} ] 

 \\ 
% else \   \fieldd_1 = \fieldd_2  \ then \\ 
\fieldd_1 \begin{array}{l}
             \lbrack \oplus  \substitution { \expressionSrc_1}{\fieldd_2}{  \update{\fieldd_2}{  \expressionSrc_3 }{  \expressionSrc_4}}  \longrightarrow  
                 \substitution { \expressionSrc_2}{\fieldd_2}{  \update{\fieldd_2}{  \expressionSrc_3 }{  \expressionSrc_4}}       \rbrack \\
	     \lbrack \oplus  \expressionSrc_3 \longrightarrow  \expressionSrc_4 \rbrack
	     \end{array} & else \\

               

\end{array}
\right. 
\end{array}$$ 



%The same kind of substitution is allowed for array access expressions, where the array object \arrayAccessOnly  \ can be updated. 
