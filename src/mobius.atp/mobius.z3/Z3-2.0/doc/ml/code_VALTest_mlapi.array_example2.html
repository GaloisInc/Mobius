<html><head>
<link rel="stylesheet" href="z3_ml.css" type="text/css">
<link rel="Start" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Test_mlapi" rel="Chapter" href="Test_mlapi.html">
<link title="Z3" rel="Chapter" href="Z3.html"><title>Test_mlapi.array_example2</title>
</head>
<body>
<code class="code"><span class="keyword">let</span>&nbsp;array_example2()&nbsp;=<br>
&nbsp;&nbsp;<span class="keyword">begin</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;<span class="string">"\narray_example2\n"</span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>&nbsp;n&nbsp;=&nbsp;2&nbsp;<span class="keyword">to</span>&nbsp;5&nbsp;<span class="keyword">do</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;<span class="string">"n&nbsp;=&nbsp;%d\n"</span>&nbsp;n;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;ctx&nbsp;=&nbsp;mk_context&nbsp;[||]&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;bool_sort&nbsp;&nbsp;&nbsp;=&nbsp;<span class="constructor">Z3</span>.mk_bool_sort&nbsp;ctx&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;array_sort&nbsp;&nbsp;=&nbsp;<span class="constructor">Z3</span>.mk_array_sort&nbsp;ctx&nbsp;bool_sort&nbsp;bool_sort&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;create&nbsp;arrays&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;a&nbsp;=&nbsp;<span class="constructor">Array</span>.init&nbsp;n<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="keyword">fun</span>&nbsp;i<span class="keywordsign">-&gt;</span><span class="constructor">Z3</span>.mk_const&nbsp;ctx&nbsp;(<span class="constructor">Z3</span>.mk_int_symbol&nbsp;ctx&nbsp;i)&nbsp;array_sort)&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;assert&nbsp;distinct(a[0],&nbsp;...,&nbsp;a[n])&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;d&nbsp;=&nbsp;<span class="constructor">Z3</span>.mk_distinct&nbsp;ctx&nbsp;a&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;<span class="string">"%s\n"</span>&nbsp;(<span class="constructor">Z3</span>.ast_to_string&nbsp;ctx&nbsp;d);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Z3</span>.assert_cnstr&nbsp;ctx&nbsp;d;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;context&nbsp;is&nbsp;satisfiable&nbsp;if&nbsp;n&nbsp;&lt;&nbsp;5&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check2&nbsp;ctx&nbsp;(<span class="keyword">if</span>&nbsp;n&nbsp;&lt;&nbsp;5&nbsp;<span class="keyword">then</span>&nbsp;<span class="constructor">Z3</span>.<span class="constructor">L_TRUE</span>&nbsp;<span class="keyword">else</span>&nbsp;<span class="constructor">Z3</span>.<span class="constructor">L_FALSE</span>);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Z3</span>.del_context&nbsp;ctx;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">done</span><br>
&nbsp;&nbsp;<span class="keyword">end</span></code></body></html>