<html><head>
<link rel="stylesheet" href="z3_ml.css" type="text/css">
<link rel="Start" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Test_mlapi" rel="Chapter" href="Test_mlapi.html">
<link title="Z3" rel="Chapter" href="Z3.html"><title>Test_mlapi.assert_comm_axiom</title>
</head>
<body>
<code class="code"><span class="keyword">let</span>&nbsp;assert_comm_axiom&nbsp;ctx&nbsp;f&nbsp;=<br>
&nbsp;&nbsp;<span class="keyword">begin</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;<span class="constructor">Z3</span>.get_range&nbsp;ctx&nbsp;f&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;<span class="constructor">Z3</span>.get_domain_size&nbsp;ctx&nbsp;f&nbsp;!=&nbsp;2&nbsp;<span class="keywordsign">||</span>&nbsp;not&nbsp;(equal_sorts&nbsp;ctx&nbsp;(<span class="constructor">Z3</span>.get_domain&nbsp;ctx&nbsp;f&nbsp;0)&nbsp;t)&nbsp;<span class="keywordsign">||</span>&nbsp;not&nbsp;(equal_sorts&nbsp;ctx&nbsp;(<span class="constructor">Z3</span>.get_domain&nbsp;ctx&nbsp;f&nbsp;1)&nbsp;t)&nbsp;<span class="keyword">then</span>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exitf&nbsp;<span class="string">"function&nbsp;must&nbsp;be&nbsp;binary,&nbsp;and&nbsp;argument&nbsp;types&nbsp;must&nbsp;be&nbsp;equal&nbsp;to&nbsp;return&nbsp;type"</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Inside&nbsp;the&nbsp;parser,&nbsp;function&nbsp;f&nbsp;will&nbsp;be&nbsp;referenced&nbsp;using&nbsp;the&nbsp;symbol&nbsp;'f'.&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;f_name&nbsp;=&nbsp;<span class="constructor">Z3</span>.mk_string_symbol&nbsp;ctx&nbsp;<span class="string">"f"</span>&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Inside&nbsp;the&nbsp;parser,&nbsp;type&nbsp;t&nbsp;will&nbsp;be&nbsp;referenced&nbsp;using&nbsp;the&nbsp;symbol&nbsp;'T'.&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;t_name&nbsp;=&nbsp;<span class="constructor">Z3</span>.mk_string_symbol&nbsp;ctx&nbsp;<span class="string">"T"</span>&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;str&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;<span class="string">"(benchmark&nbsp;comm&nbsp;:formula&nbsp;(forall&nbsp;(x&nbsp;T)&nbsp;(y&nbsp;T)&nbsp;(=&nbsp;(f&nbsp;x&nbsp;y)&nbsp;(f&nbsp;y&nbsp;x))))"</span>&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;q&nbsp;=&nbsp;<span class="constructor">Z3</span>.parse_smtlib_string_formula&nbsp;ctx&nbsp;str&nbsp;[|t_name|]&nbsp;[|t|]&nbsp;[|f_name|]&nbsp;[|f|]&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;<span class="string">"assert&nbsp;axiom:\n%s\n"</span>&nbsp;(<span class="constructor">Z3</span>.ast_to_string&nbsp;ctx&nbsp;q);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Z3</span>.assert_cnstr&nbsp;ctx&nbsp;q;<br>
&nbsp;&nbsp;<span class="keyword">end</span></code></body></html>