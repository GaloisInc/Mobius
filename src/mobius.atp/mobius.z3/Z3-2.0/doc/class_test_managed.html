 <HTML>
    <HEAD>
    <meta name="author" content="Leonardo de Moura" />
    <meta name="author" content="Nikolaj Bjorner" />
    <meta name="description" content="Z3: SMT solver" />
    <meta name="keywords" content="decision procedure, theorem prover, SMT-LIB, SMTLIB, SMT LIB, SMT Solver, SMTCOMP, SMT-COMP, SAT solver, formal methods, constraint solver, software verification, hardware verification" />
      <TITLE>Z3: SMT solver</TITLE>
      <LINK HREF="z3.css" REL="stylesheet" TYPE="text/css">
      <LINK href="tabs.css" rel="stylesheet" type="text/css">
    </HEAD>
<BODY BGCOLOR="#FFFFFF">
<table class="centered-small">
  <tr>
    <th><a href="index.html"><span>Home</span></a></th>
    <th> &bull; </th>
    <th><a href="documentation.html"><span>Docs</span></a></th>
    <th> &bull; </th>
    <th><a href="download.html"><span>Download</span></a></th>
    <th> &bull; </th>
    <th><a href="mail.html"><span>Mail</span></a></th>
    <th> &bull; </th>
    <th><a href="faq.html"><span>FAQ</span></a></th>
    <th> &bull; </th>
    <th><a href="awards.html"><span>Awards</span></a></th>
    <th> &bull; </th>
    <th><a href="status.html"><span>Status</span></a></th>
    <th> &bull; </th>
    <th><a href="http://research.microsoft.com"><span>MSR</span></a></th>
  </tr>
</table>
<p class="Z3Title"><img align="middle" src="z3.png" alt="Z3" /> An Efficient SMT Solver</p>
<!-- Generated by Doxygen 1.5.9 -->
<div class="contents">
<h1>TestManaged Class Reference<br>
<small>
[<a class="el" href="group__mapi__ex.html">Managed (.NET) API examples</a>]</small>
</h1><!-- doxytag: class="TestManaged" -->Class encapsulating Z3 tests.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273">mk_context</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a logical context with model construction enabled.  <a href="#951d71e05e11495f2d0c8db5776cb273"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Sort&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#ae028ed1ab2b2dfadd311f548b64864e">mk_int_type</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an integer type.  <a href="#ae028ed1ab2b2dfadd311f548b64864e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Sort&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#a0db7a2fa18537d86d545ac2caf8d487">mk_bv_type</a> (uint num_bytes)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a bit-vector type.  <a href="#a0db7a2fa18537d86d545ac2caf8d487"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Term&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4">mk_var</a> (string name, Sort ty)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a variable using the given name and type.  <a href="#b94596cda6901d5c2b38b0adfe2d2bd4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Term&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#7fb0abc5b931a68efe63a594071b0d4e">mk_bool_var</a> (string name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a boolean variable using the given name.  <a href="#7fb0abc5b931a68efe63a594071b0d4e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Term&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4">mk_int_var</a> (string name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an integer variable using the given name.  <a href="#23e09c7b3ffed5f174441ef55a15c6b4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Term&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#a56f9da4b37e365db43d8e132f86c64d">mk_bv_var</a> (string name, uint num_bytes)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a bit-vector variable using the given name.  <a href="#a56f9da4b37e365db43d8e132f86c64d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#aea02c784e38e060c0154ac307682774">check</a> (<a class="el" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179">LBool</a> expected_result, out Model model)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether the logical context is satisfiable, and compare the result with the expected result. If the context is satisfiable, then display the model.  <a href="#aea02c784e38e060c0154ac307682774"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#e2d6d19afb57eaeb75b366f5c026bee9">check2</a> (<a class="el" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179">LBool</a> expected_result)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Similar to <a class="el" href="class_test_managed.html#aea02c784e38e060c0154ac307682774" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>, but uses <a class="el" href="group__capi__ex.html#g4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a> instead of Z3's native display method.  <a href="#e2d6d19afb57eaeb75b366f5c026bee9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff">prove</a> (Term f)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove that the constraints already asserted into the logical context implies the given formula. The result of the proof is displayed.  <a href="#4d5279b013b163ac9a1fc0d5e69378ff"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#c846328304893b21dca4e8470d07030c">prove2</a> (Term f, bool is_valid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove that the constraints already asserted into the logical context implies the given formula. The result of the proof is displayed.  <a href="#c846328304893b21dca4e8470d07030c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#0028af55787d40d5cb29c78c67d64021">assert_inj_axiom</a> (FuncDecl f, int i)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assert the axiom: function f is injective in the i-th argument.  <a href="#0028af55787d40d5cb29c78c67d64021"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#3894826eee5da91f6f4b964dee051ccd">assert_inj_axiom_abs</a> (FuncDecl f, int i)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assert the axiom: function f is injective in the i-th argument.  <a href="#3894826eee5da91f6f4b964dee051ccd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#b7c1e72848c0e19ca409fc7acd888310">simple_example</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">"Hello world" example: create a Z3 logical context, and delete it.  <a href="#b7c1e72848c0e19ca409fc7acd888310"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#e1fc416964019d6927fd6917ae32d914">find_model_example1</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find a model for <code>x xor y</code>.  <a href="#e1fc416964019d6927fd6917ae32d914"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#5194ee6f65cb7e4280e7577816d67e4a">find_model_example2</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find a model for <code>x &lt; y + 1, x &gt; 2</code>. Then, assert <code>not(x = y)</code>, and find another model.  <a href="#5194ee6f65cb7e4280e7577816d67e4a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#0cd53c9f10e66950a9121f5702bf8705">prove_example1</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove <code>x = y implies g(x) = g(y)</code>, and disprove <code>x = y implies g(g(x)) = g(y)</code>.  <a href="#0cd53c9f10e66950a9121f5702bf8705"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#8a474ab19f7f08b45bf69d1bd6e2bb43">prove_example2</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove <code>not(g(g(x) - g(y)) = g(z)), x + z &lt;= y &lt;= x implies z &lt; 0 </code>. Then, show that <code>z &lt; -1</code> is not implied.  <a href="#8a474ab19f7f08b45bf69d1bd6e2bb43"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#07ee56f1ada5226634e68a8b37989fbd">push_pop_example1</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show how push &amp; pop can be used to create "backtracking" points.  <a href="#07ee56f1ada5226634e68a8b37989fbd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#06e4829a7db00856491745b17a4201b7">quantifier_example1</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove that <code>f(x, y) = f(w, v) implies y = v</code> when <code>f</code> is injective in the second argument.  <a href="#06e4829a7db00856491745b17a4201b7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#87eedcccb026e4dd953e6466ba622858">quantifier_example1_abs</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove that <code>f(x, y) = f(w, v) implies y = v</code> when <code>f</code> is injective in the second argument.  <a href="#87eedcccb026e4dd953e6466ba622858"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#a4081035e25fec1e808c7edd33772a46">array_example1</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove <code>store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3))</code>.  <a href="#a4081035e25fec1e808c7edd33772a46"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#94757cc6b9bf9e6050b86b2794319798">array_example2</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show that <code>distinct(a_0, ... , a_n)</code> is unsatisfiable when <code>a_i's</code> are arrays from boolean to boolean and n &gt; 4.  <a href="#94757cc6b9bf9e6050b86b2794319798"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#ff725851c53b72ec2b70c7aa5d7430d7">tuple_example</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tuples.  <a href="#ff725851c53b72ec2b70c7aa5d7430d7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#a793cf13b8fcfdb908363f1890bc06ae">bitvector_example1</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simple bit-vector example. This example disproves that x - 10 &lt;= 0 IFF x &lt;= 10 for (32-bit) machine integers.  <a href="#a793cf13b8fcfdb908363f1890bc06ae"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#b34a23f8c84c0235efb12c3d265c9398">bitvector_example2</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find x and y such that: x ^ y - 103 == x * y.  <a href="#b34a23f8c84c0235efb12c3d265c9398"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#1ddab4a26c9cebda4cd3553dbc58db8c">injective_example</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Injective functions.  <a href="#1ddab4a26c9cebda4cd3553dbc58db8c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#34d5e8e536a5649693f8cefa4805a81e">parser_example1</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how to use the SMTLIB parser.  <a href="#34d5e8e536a5649693f8cefa4805a81e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#9c8fd60a787198a88ebcefc0282ea3cd">parser_example2</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how to initialize the parser symbol table.  <a href="#9c8fd60a787198a88ebcefc0282ea3cd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#ad0cce961cb43f47950149c5bb3729ae">parser_example3</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how to initialize the parser symbol table.  <a href="#ad0cce961cb43f47950149c5bb3729ae"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#b1d78024df78dbb10723537c15647aed">parser_example4</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Display the declarations, assumptions and formulas in a SMT-LIB string.  <a href="#b1d78024df78dbb10723537c15647aed"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#b9594032459f28272bbc74fe5e2c54fc">parser_example5</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how to handle parser errors using Z3 error handling support.  <a href="#b9594032459f28272bbc74fe5e2c54fc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#fa3f89e53c339dda8c0a9b4b126139f7">ite_example</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an ite-term (if-then-else terms).  <a href="#fa3f89e53c339dda8c0a9b4b126139f7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#b3287b9c46ad438c87aa1f42b0e0dea8">list_example</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a list datatype.  <a href="#b3287b9c46ad438c87aa1f42b0e0dea8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#7180a37232a0028dd87058dcf37a1ea2">tree_example</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a binary tree datatype.  <a href="#7180a37232a0028dd87058dcf37a1ea2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#93d1bdb67347976ccffbc086de426f48">forest_example</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a forest of trees.  <a href="#93d1bdb67347976ccffbc086de426f48"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#1380b031db05b0b63542acf627b6bd1e">eval_example1</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrate how to use Eval.  <a href="#1380b031db05b0b63542acf627b6bd1e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#280bfb4c2a8fb2ca7b3138e2a455b6ab">eval_example2</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrate how to use Eval on tuples.  <a href="#280bfb4c2a8fb2ca7b3138e2a455b6ab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#07f2d46da4494d4e47658b955c84c5b1">check_small</a> (Term[] to_minimize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrate how to use Push and Pop to control the size of models.  <a href="#07f2d46da4494d4e47658b955c84c5b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#6ef7478eb7058d82a62513d0c03f15f8">find_small_model_example</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reduced-size model generation example.  <a href="#6ef7478eb7058d82a62513d0c03f15f8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_test_managed.html#b8546c459ccfe5d1e511d97241623f80">simplifier_example</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simplifier example.  <a href="#b8546c459ccfe5d1e511d97241623f80"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class encapsulating Z3 tests. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00013">13</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a4081035e25fec1e808c7edd33772a46"></a><!-- doxytag: member="TestManaged::array_example1" ref="a4081035e25fec1e808c7edd33772a46" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void array_example1           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prove <code>store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3))</code>. 
<p>
This example demonstrates how to use the array theory. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00794">794</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00795"></a>00795     {
<a name="l00796"></a>00796 
<a name="l00797"></a>00797         Console.WriteLine(<span class="stringliteral">"array_example1"</span>);
<a name="l00798"></a>00798 
<a name="l00799"></a>00799         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00800"></a>00800 
<a name="l00801"></a>00801         Sort int_type    = <a class="code" href="class_test_managed.html#ae028ed1ab2b2dfadd311f548b64864e" title="Create an integer type.">mk_int_type</a>();
<a name="l00802"></a>00802         Sort array_type  = z3.MkArraySort(int_type, int_type);
<a name="l00803"></a>00803 
<a name="l00804"></a>00804         Term a1          = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"a1"</span>, array_type);
<a name="l00805"></a>00805         Term a2          = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"a2"</span>, array_type);
<a name="l00806"></a>00806         Term i1          = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"i1"</span>, int_type);
<a name="l00807"></a>00807         Term i2          = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"i2"</span>, int_type);
<a name="l00808"></a>00808         Term i3          = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"i3"</span>, int_type);
<a name="l00809"></a>00809         Term v1          = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"v1"</span>, int_type);
<a name="l00810"></a>00810         Term v2          = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"v2"</span>, int_type);
<a name="l00811"></a>00811     
<a name="l00812"></a>00812         Term st1         = z3.MkArrayStore(a1, i1, v1);
<a name="l00813"></a>00813         Term st2         = z3.MkArrayStore(a2, i2, v2);
<a name="l00814"></a>00814     
<a name="l00815"></a>00815         Term sel1        = z3.MkArraySelect(a1, i3);
<a name="l00816"></a>00816         Term sel2        = z3.MkArraySelect(a2, i3);
<a name="l00817"></a>00817 
<a name="l00818"></a>00818         <span class="comment">/* create antecedent */</span>
<a name="l00819"></a>00819         Term antecedent  = z3.MkEq(st1, st2);
<a name="l00820"></a>00820 
<a name="l00821"></a>00821         <span class="comment">/* create consequent: i1 = i3 or  i2 = i3 or select(a1, i3) = select(a2, i3) */</span>
<a name="l00822"></a>00822         Term consequent  = z3.MkOr(<span class="keyword">new</span> Term[] { z3.MkEq(i1,i3), z3.MkEq(i2,i3), z3.MkEq(sel1,sel2) });
<a name="l00823"></a>00823         
<a name="l00824"></a>00824         <span class="comment">/* prove store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3)) */</span>
<a name="l00825"></a>00825         Term thm         = z3.MkImplies(antecedent, consequent);
<a name="l00826"></a>00826         Console.WriteLine(<span class="stringliteral">"prove: store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3))"</span>);
<a name="l00827"></a>00827         Console.WriteLine(<span class="stringliteral">"{0}"</span>, z3.ToString(thm));
<a name="l00828"></a>00828         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(thm);
<a name="l00829"></a>00829     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="94757cc6b9bf9e6050b86b2794319798"></a><!-- doxytag: member="TestManaged::array_example2" ref="94757cc6b9bf9e6050b86b2794319798" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void array_example2           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Show that <code>distinct(a_0, ... , a_n)</code> is unsatisfiable when <code>a_i's</code> are arrays from boolean to boolean and n &gt; 4. 
<p>
This example also shows how to use the <code>distinct</code> construct. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00837">837</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00838"></a>00838     {        
<a name="l00839"></a>00839         Console.WriteLine(<span class="stringliteral">"array_example2"</span>);
<a name="l00840"></a>00840         
<a name="l00841"></a>00841         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 2; n &lt;= 5; n++) {
<a name="l00842"></a>00842             Console.WriteLine(<span class="stringliteral">"n = {0}"</span>, n);
<a name="l00843"></a>00843             <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00844"></a>00844             
<a name="l00845"></a>00845             <span class="keywordflow">if</span> (n == 3) {
<a name="l00846"></a>00846                 z3.OpenLog(<span class="stringliteral">"array3.z3"</span>);
<a name="l00847"></a>00847             }
<a name="l00848"></a>00848             Sort bool_type   = z3.MkBoolSort();
<a name="l00849"></a>00849             Sort array_type  = z3.MkArraySort(bool_type, bool_type);
<a name="l00850"></a>00850             Term[] a = <span class="keyword">new</span> Term[n];
<a name="l00851"></a>00851             
<a name="l00852"></a>00852             <span class="comment">/* create arrays */</span>
<a name="l00853"></a>00853             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++) {
<a name="l00854"></a>00854                 a[i] = z3.MkConst(String.Format(<span class="stringliteral">"array_{0}"</span>,i), array_type);
<a name="l00855"></a>00855             }
<a name="l00856"></a>00856             
<a name="l00857"></a>00857             <span class="comment">/* assert distinct(a[0], ..., a[n]) */</span>
<a name="l00858"></a>00858             Term d = z3.MkDistinct( a);
<a name="l00859"></a>00859             Console.WriteLine(<span class="stringliteral">"{0}"</span>, z3.ToString(d));
<a name="l00860"></a>00860             z3.AssertCnstr(d);
<a name="l00861"></a>00861             
<a name="l00862"></a>00862             <span class="comment">/* context is satisfiable if n &lt; 5 */</span>
<a name="l00863"></a>00863             Model model = null;
<a name="l00864"></a>00864             <a class="code" href="class_test_managed.html#aea02c784e38e060c0154ac307682774" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(n &lt; 5 ? <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True : <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.False, out model);
<a name="l00865"></a>00865             <span class="keywordflow">if</span> (n &lt; 5) {
<a name="l00866"></a>00866                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++) {
<a name="l00867"></a>00867                     Console.WriteLine(<span class="stringliteral">"{0} = {1}"</span>, 
<a name="l00868"></a>00868                                       z3.ToString(a[i]), 
<a name="l00869"></a>00869                                       z3.ToString(model.Eval(a[i])));
<a name="l00870"></a>00870                 }
<a name="l00871"></a>00871             }
<a name="l00872"></a>00872             <span class="keywordflow">if</span> (model != null) {
<a name="l00873"></a>00873                 model.Dispose();
<a name="l00874"></a>00874             }
<a name="l00875"></a>00875         }
<a name="l00876"></a>00876     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0028af55787d40d5cb29c78c67d64021"></a><!-- doxytag: member="TestManaged::assert_inj_axiom" ref="0028af55787d40d5cb29c78c67d64021" args="(FuncDecl f, int i)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void assert_inj_axiom           </td>
          <td>(</td>
          <td class="paramtype">FuncDecl&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Assert the axiom: function f is injective in the i-th argument. 
<p>
The following axiom is asserted into the logical context: <div class="fragment"><pre class="fragment">       forall (x_0, ..., x_n) finv(f(x_0, ..., x_i, ..., x_{n-1})) = x_i
</pre></div><p>
Where, <code>finv</code> is a fresh function declaration. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00286">286</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>

<p>Referenced by <a class="el" href="test__managed_8cs_source.html#l00692">quantifier_example1()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00287"></a>00287     {        
<a name="l00288"></a>00288         Sort[] domain = z3.GetDomain(f);
<a name="l00289"></a>00289         uint sz = (uint)domain.Length;
<a name="l00290"></a>00290         
<a name="l00291"></a>00291         if (i &gt;= sz) {
<a name="l00292"></a>00292             Console.WriteLine(<span class="stringliteral">"failed to create inj axiom"</span>);
<a name="l00293"></a>00293             <span class="keywordflow">return</span>;
<a name="l00294"></a>00294         }
<a name="l00295"></a>00295         
<a name="l00296"></a>00296         <span class="comment">/* declare the i-th inverse of f: finv */</span>
<a name="l00297"></a>00297         Sort finv_domain = z3.GetRange(f);
<a name="l00298"></a>00298         Sort finv_range  = domain[i];
<a name="l00299"></a>00299         FuncDecl finv       = z3.MkFuncDecl(<span class="stringliteral">"f_fresh"</span>, finv_domain, finv_range);
<a name="l00300"></a>00300         
<a name="l00301"></a>00301         <span class="comment">/* allocate temporary arrays */</span>
<a name="l00302"></a>00302         Term[] xs = <span class="keyword">new</span> Term[sz];
<a name="l00303"></a>00303         <a class="code" href="class_microsoft_1_1_z3_1_1_symbol.html" title="Symbol.">Symbol</a>[] names = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_symbol.html" title="Symbol.">Symbol</a>[sz];
<a name="l00304"></a>00304         Sort[] types = <span class="keyword">new</span> Sort[sz];
<a name="l00305"></a>00305         
<a name="l00306"></a>00306         <span class="comment">/* fill types, names and xs */</span>
<a name="l00307"></a>00307 
<a name="l00308"></a>00308         <span class="keywordflow">for</span> (uint j = 0; j &lt; sz; j++) {
<a name="l00309"></a>00309             types[j] = domain[j];
<a name="l00310"></a>00310             names[j] = z3.MkSymbol(String.Format(<span class="stringliteral">"x_{0}"</span>,j));
<a name="l00311"></a>00311             xs[j]    = z3.MkBound(j, types[j]);
<a name="l00312"></a>00312         }
<a name="l00313"></a>00313         Term x_i = xs[i];
<a name="l00314"></a>00314         
<a name="l00315"></a>00315         <span class="comment">/* create f(x_0, ..., x_i, ..., x_{n-1}) */</span> 
<a name="l00316"></a>00316         Term fxs         = z3.MkApp(f, xs);
<a name="l00317"></a>00317         
<a name="l00318"></a>00318         <span class="comment">/* create f_inv(f(x_0, ..., x_i, ..., x_{n-1})) */</span>
<a name="l00319"></a>00319         Term finv_fxs    = mk_unary_app(finv, fxs);
<a name="l00320"></a>00320         
<a name="l00321"></a>00321         <span class="comment">/* create finv(f(x_0, ..., x_i, ..., x_{n-1})) = x_i */</span>
<a name="l00322"></a>00322         Term eq          = z3.MkEq(finv_fxs, x_i);
<a name="l00323"></a>00323         
<a name="l00324"></a>00324         <span class="comment">/* use f(x_0, ..., x_i, ..., x_{n-1}) as the pattern for the quantifier */</span>
<a name="l00325"></a>00325         Pattern p  = z3.MkPattern(<span class="keyword">new</span> Term[]{ fxs });
<a name="l00326"></a>00326         Console.WriteLine(<span class="stringliteral">"pattern {0}"</span>, z3.ToString(p));
<a name="l00327"></a>00327         
<a name="l00328"></a>00328         <span class="comment">/* create &amp; assert quantifier */</span>
<a name="l00329"></a>00329         Term q = z3.MkForall(
<a name="l00330"></a>00330             0, <span class="comment">/* using default weight */</span>
<a name="l00331"></a>00331             <span class="keyword">new</span> Pattern[]{p}, <span class="comment">/* patterns */</span>
<a name="l00332"></a>00332             types, <span class="comment">/* types of quantified variables */</span>
<a name="l00333"></a>00333             names, <span class="comment">/* names of quantified variables */</span>
<a name="l00334"></a>00334             eq);
<a name="l00335"></a>00335 
<a name="l00336"></a>00336         Console.WriteLine(<span class="stringliteral">"assert axiom {0}"</span>, z3.ToString(q));
<a name="l00337"></a>00337         z3.AssertCnstr(q);
<a name="l00338"></a>00338         
<a name="l00339"></a>00339     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3894826eee5da91f6f4b964dee051ccd"></a><!-- doxytag: member="TestManaged::assert_inj_axiom_abs" ref="3894826eee5da91f6f4b964dee051ccd" args="(FuncDecl f, int i)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void assert_inj_axiom_abs           </td>
          <td>(</td>
          <td class="paramtype">FuncDecl&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Assert the axiom: function f is injective in the i-th argument. 
<p>
The following axiom is asserted into the logical context: <div class="fragment"><pre class="fragment">       forall (x_0, ..., x_n) finv(f(x_0, ..., x_i, ..., x_{n-1})) = x_i
</pre></div><p>
Where, <code>finv</code> is a fresh function declaration. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00351">351</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>

<p>Referenced by <a class="el" href="test__managed_8cs_source.html#l00743">quantifier_example1_abs()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00352"></a>00352     {        
<a name="l00353"></a>00353         Sort[] domain = z3.GetDomain(f);
<a name="l00354"></a>00354         uint sz = (uint)domain.Length;
<a name="l00355"></a>00355         
<a name="l00356"></a>00356         if (i &gt;= sz) {
<a name="l00357"></a>00357             Console.WriteLine(<span class="stringliteral">"failed to create inj axiom"</span>);
<a name="l00358"></a>00358             <span class="keywordflow">return</span>;
<a name="l00359"></a>00359         }
<a name="l00360"></a>00360         
<a name="l00361"></a>00361         <span class="comment">/* declare the i-th inverse of f: finv */</span>
<a name="l00362"></a>00362         Sort finv_domain = z3.GetRange(f);
<a name="l00363"></a>00363         Sort finv_range  = domain[i];
<a name="l00364"></a>00364         FuncDecl finv       = z3.MkFuncDecl(<span class="stringliteral">"f_fresh"</span>, finv_domain, finv_range);
<a name="l00365"></a>00365         
<a name="l00366"></a>00366         <span class="comment">/* allocate temporary arrays */</span>
<a name="l00367"></a>00367         Term[] xs = <span class="keyword">new</span> Term[sz];
<a name="l00368"></a>00368         
<a name="l00369"></a>00369         <span class="comment">/* fill types, names and xs */</span>
<a name="l00370"></a>00370 
<a name="l00371"></a>00371         <span class="keywordflow">for</span> (uint j = 0; j &lt; sz; j++) {
<a name="l00372"></a>00372             xs[j]    = z3.MkConst(String.Format(<span class="stringliteral">"x_{0}"</span>,j), domain[j]);
<a name="l00373"></a>00373         }
<a name="l00374"></a>00374         Term x_i = xs[i];
<a name="l00375"></a>00375         
<a name="l00376"></a>00376         <span class="comment">/* create f(x_0, ..., x_i, ..., x_{n-1}) */</span> 
<a name="l00377"></a>00377         Term fxs         = z3.MkApp(f, xs);
<a name="l00378"></a>00378         
<a name="l00379"></a>00379         <span class="comment">/* create f_inv(f(x_0, ..., x_i, ..., x_{n-1})) */</span>
<a name="l00380"></a>00380         Term finv_fxs    = mk_unary_app(finv, fxs);
<a name="l00381"></a>00381         
<a name="l00382"></a>00382         <span class="comment">/* create finv(f(x_0, ..., x_i, ..., x_{n-1})) = x_i */</span>
<a name="l00383"></a>00383         Term eq          = z3.MkEq(finv_fxs, x_i);
<a name="l00384"></a>00384         
<a name="l00385"></a>00385         <span class="comment">/* use f(x_0, ..., x_i, ..., x_{n-1}) as the pattern for the quantifier */</span>
<a name="l00386"></a>00386         Pattern p  = z3.MkPattern(<span class="keyword">new</span> Term[]{ fxs });
<a name="l00387"></a>00387         Console.WriteLine(<span class="stringliteral">"pattern {0}"</span>, z3.ToString(p));
<a name="l00388"></a>00388         
<a name="l00389"></a>00389         <span class="comment">/* create &amp; assert quantifier */</span>
<a name="l00390"></a>00390         Term q = z3.MkForall(
<a name="l00391"></a>00391             0, <span class="comment">/* using default weight */</span>
<a name="l00392"></a>00392             xs,    <span class="comment">/* the list of bound variables */</span>
<a name="l00393"></a>00393             <span class="keyword">new</span> Pattern[]{p}, <span class="comment">/* patterns */</span>
<a name="l00394"></a>00394             eq);
<a name="l00395"></a>00395 
<a name="l00396"></a>00396         Console.WriteLine(<span class="stringliteral">"assert axiom {0}"</span>, z3.ToString(q));
<a name="l00397"></a>00397         z3.AssertCnstr(q);
<a name="l00398"></a>00398         
<a name="l00399"></a>00399     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a793cf13b8fcfdb908363f1890bc06ae"></a><!-- doxytag: member="TestManaged::bitvector_example1" ref="a793cf13b8fcfdb908363f1890bc06ae" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bitvector_example1           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Simple bit-vector example. This example disproves that x - 10 &lt;= 0 IFF x &lt;= 10 for (32-bit) machine integers. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00909">909</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00910"></a>00910     {
<a name="l00911"></a>00911         Console.WriteLine(<span class="stringliteral">"\nbitvector_example1"</span>);
<a name="l00912"></a>00912     
<a name="l00913"></a>00913         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00914"></a>00914     
<a name="l00915"></a>00915         Sort bv_type   = z3.MkBvSort(32);
<a name="l00916"></a>00916         Term x           = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"x"</span>, bv_type);
<a name="l00917"></a>00917         Term zero        = z3.MkNumeral(<span class="stringliteral">"0"</span>, bv_type);
<a name="l00918"></a>00918         Term ten         = z3.MkNumeral(<span class="stringliteral">"10"</span>, bv_type);
<a name="l00919"></a>00919         Term x_minus_ten = z3.MkBvSub(x, ten);
<a name="l00920"></a>00920         <span class="comment">/* bvsle is signed less than or equal to */</span>
<a name="l00921"></a>00921         Term c1          = z3.MkBvSle(x, ten);
<a name="l00922"></a>00922         Term c2          = z3.MkBvSle(x_minus_ten, zero);
<a name="l00923"></a>00923         Term thm         = z3.MkIff(c1,c2);
<a name="l00924"></a>00924         Console.WriteLine(<span class="stringliteral">"disprove: x - 10 &lt;= 0 IFF x &lt;= 10 for (32-bit) machine integers"</span>);
<a name="l00925"></a>00925         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(thm);
<a name="l00926"></a>00926     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b34a23f8c84c0235efb12c3d265c9398"></a><!-- doxytag: member="TestManaged::bitvector_example2" ref="b34a23f8c84c0235efb12c3d265c9398" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bitvector_example2           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find x and y such that: x ^ y - 103 == x * y. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00931">931</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00932"></a>00932     {
<a name="l00933"></a>00933         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00934"></a>00934  
<a name="l00935"></a>00935         <span class="comment">/* construct x ^ y - 103 == x * y */</span>
<a name="l00936"></a>00936         Sort bv_type = z3.MkBvSort(32);
<a name="l00937"></a>00937         Term x = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"x"</span>, bv_type);
<a name="l00938"></a>00938         Term y = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"y"</span>, bv_type);
<a name="l00939"></a>00939         Term x_xor_y = z3.MkBvXor(x,y);
<a name="l00940"></a>00940         Term c103 = z3.MkNumeral(<span class="stringliteral">"103"</span>, bv_type);
<a name="l00941"></a>00941         Term lhs = z3.MkBvSub(x_xor_y, c103);
<a name="l00942"></a>00942         Term rhs = z3.MkBvMul(x,y);
<a name="l00943"></a>00943         Term ctr = z3.MkEq(lhs, rhs);
<a name="l00944"></a>00944         
<a name="l00945"></a>00945         Console.WriteLine(<span class="stringliteral">"\nbitvector_example2"</span>);
<a name="l00946"></a>00946         Console.WriteLine(<span class="stringliteral">"find values of x and y, such that x ^ y - 103 == x * y"</span>);
<a name="l00947"></a>00947         
<a name="l00948"></a>00948         <span class="comment">/* add the constraint &lt;tt&gt;x ^ y - 103 == x * y&lt;\tt&gt; to the logical context */</span>
<a name="l00949"></a>00949         z3.AssertCnstr(ctr);
<a name="l00950"></a>00950         
<a name="l00951"></a>00951         <span class="comment">/* find a model (i.e., values for x an y that satisfy the constraint */</span>
<a name="l00952"></a>00952         <a class="code" href="class_test_managed.html#e2d6d19afb57eaeb75b366f5c026bee9" title="Similar to check, but uses display_model instead of Z3&amp;#39;s native display method...">check2</a>(<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True);
<a name="l00953"></a>00953     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="aea02c784e38e060c0154ac307682774"></a><!-- doxytag: member="TestManaged::check" ref="aea02c784e38e060c0154ac307682774" args="(LBool expected_result, out Model model)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179">LBool</a>&nbsp;</td>
          <td class="paramname"> <em>expected_result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">out Model&nbsp;</td>
          <td class="paramname"> <em>model</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether the logical context is satisfiable, and compare the result with the expected result. If the context is satisfiable, then display the model. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00109">109</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>

<p>Referenced by <a class="el" href="test__managed_8cs_source.html#l00837">array_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00451">find_model_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00476">find_model_example2()</a>, and <a class="el" href="test__managed_8cs_source.html#l00628">push_pop_example1()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00110"></a>00110     {
<a name="l00111"></a>00111         <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a> result = z3.CheckAndGetModel(out model);
<a name="l00112"></a>00112         <span class="keywordflow">switch</span> (result) {
<a name="l00113"></a>00113         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.False:
<a name="l00114"></a>00114             Console.WriteLine(<span class="stringliteral">"unsat"</span>);
<a name="l00115"></a>00115             <span class="keywordflow">break</span>;
<a name="l00116"></a>00116         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.Undef:
<a name="l00117"></a>00117             Console.WriteLine(<span class="stringliteral">"unknown"</span>);            
<a name="l00118"></a>00118             <span class="keywordflow">break</span>;
<a name="l00119"></a>00119         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True:
<a name="l00120"></a>00120             Console.WriteLine(<span class="stringliteral">"sat"</span>);
<a name="l00121"></a>00121             model.Display(Console.Out);
<a name="l00122"></a>00122             <span class="keywordflow">break</span>;
<a name="l00123"></a>00123         }
<a name="l00124"></a>00124         <span class="keywordflow">if</span> (result != expected_result) {
<a name="l00125"></a>00125             Console.WriteLine(<span class="stringliteral">"BUG: unexpected result"</span>);
<a name="l00126"></a>00126         }
<a name="l00127"></a>00127     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e2d6d19afb57eaeb75b366f5c026bee9"></a><!-- doxytag: member="TestManaged::check2" ref="e2d6d19afb57eaeb75b366f5c026bee9" args="(LBool expected_result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check2           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179">LBool</a>&nbsp;</td>
          <td class="paramname"> <em>expected_result</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Similar to <a class="el" href="class_test_managed.html#aea02c784e38e060c0154ac307682774" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>, but uses <a class="el" href="group__capi__ex.html#g4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a> instead of Z3's native display method. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00132">132</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>

<p>Referenced by <a class="el" href="test__managed_8cs_source.html#l00931">bitvector_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00976">parser_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00996">parser_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00523">prove_example1()</a>, and <a class="el" href="test__managed_8cs_source.html#l00628">push_pop_example1()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00133"></a>00133     {
<a name="l00134"></a>00134         Model model = null;
<a name="l00135"></a>00135         <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a> result = z3.CheckAndGetModel(out model);
<a name="l00136"></a>00136         <span class="keywordflow">switch</span> (result) {
<a name="l00137"></a>00137         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.False:
<a name="l00138"></a>00138             Console.WriteLine(<span class="stringliteral">"unsat"</span>);
<a name="l00139"></a>00139             <span class="keywordflow">break</span>;
<a name="l00140"></a>00140         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.Undef:
<a name="l00141"></a>00141             Console.WriteLine(<span class="stringliteral">"unknown"</span>);            
<a name="l00142"></a>00142             <span class="keywordflow">break</span>;
<a name="l00143"></a>00143         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True:
<a name="l00144"></a>00144             Console.WriteLine(<span class="stringliteral">"sat"</span>);
<a name="l00145"></a>00145             display_model(Console.Out, model);
<a name="l00146"></a>00146             <span class="keywordflow">break</span>;
<a name="l00147"></a>00147         }
<a name="l00148"></a>00148         <span class="keywordflow">if</span> (result != expected_result) {
<a name="l00149"></a>00149             Console.WriteLine(<span class="stringliteral">"BUG: unexpected result"</span>);
<a name="l00150"></a>00150         }
<a name="l00151"></a>00151         <span class="keywordflow">if</span> (model != null) {
<a name="l00152"></a>00152             model.Dispose();
<a name="l00153"></a>00153         }
<a name="l00154"></a>00154     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="07f2d46da4494d4e47658b955c84c5b1"></a><!-- doxytag: member="TestManaged::check_small" ref="07f2d46da4494d4e47658b955c84c5b1" args="(Term[] to_minimize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check_small           </td>
          <td>(</td>
          <td class="paramtype">Term[]&nbsp;</td>
          <td class="paramname"> <em>to_minimize</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Demonstrate how to use Push and Pop to control the size of models. 
<p>
Note: this test is specialized to 32-bit bitvectors. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01484">1484</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01484"></a>01484                                                 {
<a name="l01485"></a>01485         
<a name="l01486"></a>01486         Sort bv32 = <a class="code" href="class_test_managed.html#a0db7a2fa18537d86d545ac2caf8d487" title="Create a bit-vector type.">mk_bv_type</a>(32);
<a name="l01487"></a>01487 
<a name="l01488"></a>01488         <span class="keywordtype">int</span> num_terms = to_minimize.Length;
<a name="l01489"></a>01489         UInt32[] upper = <span class="keyword">new</span> UInt32[num_terms];
<a name="l01490"></a>01490         UInt32[] lower = <span class="keyword">new</span> UInt32[num_terms];
<a name="l01491"></a>01491         Term[] values = <span class="keyword">new</span> Term[num_terms];
<a name="l01492"></a>01492         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; upper.Length; ++i) {
<a name="l01493"></a>01493             upper[i] = UInt32.MaxValue;
<a name="l01494"></a>01494             lower[i] = 0;
<a name="l01495"></a>01495         }
<a name="l01496"></a>01496         <span class="keywordtype">bool</span> some_work = <span class="keyword">true</span>;
<a name="l01497"></a>01497         <span class="keywordtype">int</span> last_index = -1;
<a name="l01498"></a>01498         UInt32 last_upper = 0;
<a name="l01499"></a>01499         <span class="keywordflow">while</span> (some_work) {
<a name="l01500"></a>01500             z3.Push();
<a name="l01501"></a>01501             
<a name="l01502"></a>01502             <span class="keywordtype">bool</span> check_is_sat = <span class="keyword">true</span>;
<a name="l01503"></a>01503             <span class="keywordflow">while</span>(check_is_sat &amp;&amp; some_work) {
<a name="l01504"></a>01504                 <span class="comment">// Assert all feasible bounds.</span>
<a name="l01505"></a>01505                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_terms; ++i) {
<a name="l01506"></a>01506                     z3.AssertCnstr(z3.MkBvUle(to_minimize[i], mk_bv32(upper[i])));
<a name="l01507"></a>01507                 }
<a name="l01508"></a>01508                 Model model = null;
<a name="l01509"></a>01509                 check_is_sat = <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True == z3.CheckAndGetModel(out model);
<a name="l01510"></a>01510                 <span class="keywordflow">if</span> (!check_is_sat) {
<a name="l01511"></a>01511                     <span class="keywordflow">if</span> (last_index != -1) {
<a name="l01512"></a>01512                         lower[last_index] = last_upper+1;
<a name="l01513"></a>01513                     }
<a name="l01514"></a>01514                     <span class="keywordflow">if</span> (model != null) {
<a name="l01515"></a>01515                         model.Dispose();
<a name="l01516"></a>01516                     }
<a name="l01517"></a>01517                     <span class="keywordflow">break</span>;
<a name="l01518"></a>01518                 }
<a name="l01519"></a>01519                 model.Display(Console.Out);
<a name="l01520"></a>01520 
<a name="l01521"></a>01521                 <span class="comment">// narrow the bounds based on the current model.</span>
<a name="l01522"></a>01522                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_terms; ++i) {
<a name="l01523"></a>01523                     Term v = model.Eval(to_minimize[i]);
<a name="l01524"></a>01524                     UInt64 ui = z3.GetNumeralUInt64(v);
<a name="l01525"></a>01525                     <span class="keywordflow">if</span> (ui &lt; upper[i]) {
<a name="l01526"></a>01526                         upper[i] = (UInt32)ui;
<a name="l01527"></a>01527                     }
<a name="l01528"></a>01528                     Console.WriteLine(<span class="stringliteral">"{0} {1} {2}"</span>,i,lower[i],upper[i]);
<a name="l01529"></a>01529                 }
<a name="l01530"></a>01530                 model.Dispose();
<a name="l01531"></a>01531                 <span class="comment">// find a new bound to add</span>
<a name="l01532"></a>01532                 some_work = <span class="keyword">false</span>;
<a name="l01533"></a>01533                 last_index = 0;
<a name="l01534"></a>01534                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_terms; ++i) {
<a name="l01535"></a>01535                     <span class="keywordflow">if</span> (lower[i] &lt; upper[i]) {                  
<a name="l01536"></a>01536                         last_upper = (upper[i] + lower[i])/2;
<a name="l01537"></a>01537                         last_index = i;
<a name="l01538"></a>01538                         z3.AssertCnstr(z3.MkBvUle(to_minimize[i], mk_bv32(last_upper)));
<a name="l01539"></a>01539                         some_work = <span class="keyword">true</span>;
<a name="l01540"></a>01540                         <span class="keywordflow">break</span>;
<a name="l01541"></a>01541                     }
<a name="l01542"></a>01542                 }
<a name="l01543"></a>01543             }
<a name="l01544"></a>01544             z3.Pop();
<a name="l01545"></a>01545         }
<a name="l01546"></a>01546     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1380b031db05b0b63542acf627b6bd1e"></a><!-- doxytag: member="TestManaged::eval_example1" ref="1380b031db05b0b63542acf627b6bd1e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eval_example1           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Demonstrate how to use Eval. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01403">1403</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01404"></a>01404     {
<a name="l01405"></a>01405         Console.WriteLine(<span class="stringliteral">"\neval_example1"</span>);
<a name="l01406"></a>01406         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l01407"></a>01407         Term x = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"x"</span>);
<a name="l01408"></a>01408         Term y = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"y"</span>);
<a name="l01409"></a>01409         Term two = mk_int(2);
<a name="l01410"></a>01410     
<a name="l01411"></a>01411         <span class="comment">/* assert x &lt; y */</span>
<a name="l01412"></a>01412         z3.AssertCnstr(z3.MkLt(x,y));
<a name="l01413"></a>01413 
<a name="l01414"></a>01414         <span class="comment">/* assert x &gt; 2 */</span>
<a name="l01415"></a>01415         z3.AssertCnstr(z3.MkGt(x, two));
<a name="l01416"></a>01416 
<a name="l01417"></a>01417         <span class="comment">/* find model for the constraints above */</span>
<a name="l01418"></a>01418         Model model = null;
<a name="l01419"></a>01419         <span class="keywordflow">if</span> (<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True == z3.CheckAndGetModel(out model)) {
<a name="l01420"></a>01420             model.Display(Console.Out);
<a name="l01421"></a>01421             Console.WriteLine(<span class="stringliteral">"\nevaluating x+y"</span>);
<a name="l01422"></a>01422             Term v = model.Eval(z3.MkAdd(x, y));
<a name="l01423"></a>01423             <span class="keywordflow">if</span> (v != null) {
<a name="l01424"></a>01424                 Console.WriteLine(<span class="stringliteral">"result = {0}"</span>, z3.ToString(v));
<a name="l01425"></a>01425             }
<a name="l01426"></a>01426             <span class="keywordflow">else</span> {
<a name="l01427"></a>01427                 Console.WriteLine(<span class="stringliteral">"Failed to evaluate: x+y"</span>);
<a name="l01428"></a>01428             }
<a name="l01429"></a>01429             model.Dispose();
<a name="l01430"></a>01430         }
<a name="l01431"></a>01431         <span class="keywordflow">else</span> {
<a name="l01432"></a>01432             Console.WriteLine(<span class="stringliteral">"BUG, the constraints are satisfiable."</span>);
<a name="l01433"></a>01433         }
<a name="l01434"></a>01434     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="280bfb4c2a8fb2ca7b3138e2a455b6ab"></a><!-- doxytag: member="TestManaged::eval_example2" ref="280bfb4c2a8fb2ca7b3138e2a455b6ab" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eval_example2           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Demonstrate how to use Eval on tuples. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01439">1439</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01440"></a>01440     {
<a name="l01441"></a>01441         Console.WriteLine(<span class="stringliteral">"\neval_example2"</span>);
<a name="l01442"></a>01442         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l01443"></a>01443         Sort int_type = <a class="code" href="class_test_managed.html#ae028ed1ab2b2dfadd311f548b64864e" title="Create an integer type.">mk_int_type</a>();
<a name="l01444"></a>01444         FuncDecl[] decls = <span class="keyword">new</span> FuncDecl[2];
<a name="l01445"></a>01445         FuncDecl mk_tuple = null;
<a name="l01446"></a>01446         Sort tuple = z3.MkTupleSort
<a name="l01447"></a>01447             (
<a name="l01448"></a>01448              z3.MkSymbol(<span class="stringliteral">"mk_tuple"</span>),                        <span class="comment">// name of tuple constructor</span>
<a name="l01449"></a>01449              <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_symbol.html" title="Symbol.">Symbol</a>[]{z3.MkSymbol(<span class="stringliteral">"first"</span>),z3.MkSymbol(<span class="stringliteral">"second"</span>)},    <span class="comment">// names of projection operators</span>
<a name="l01450"></a>01450              <span class="keyword">new</span> Sort[]{int_type,int_type}, <span class="comment">// types of projection operators</span>
<a name="l01451"></a>01451              out mk_tuple,
<a name="l01452"></a>01452              decls                              <span class="comment">// return declarations.</span>
<a name="l01453"></a>01453             );
<a name="l01454"></a>01454         FuncDecl first = decls[0];     <span class="comment">// declarations are for projections</span>
<a name="l01455"></a>01455         FuncDecl second = decls[1];
<a name="l01456"></a>01456         Term tup1 = z3.MkConst(<span class="stringliteral">"t1"</span>,tuple);
<a name="l01457"></a>01457         Term tup2 = z3.MkConst(<span class="stringliteral">"t2"</span>, tuple);
<a name="l01458"></a>01458         <span class="comment">/* assert tup1 != tup2 */</span>
<a name="l01459"></a>01459         z3.AssertCnstr(z3.MkNot(z3.MkEq(tup1, tup2)));
<a name="l01460"></a>01460         <span class="comment">/* assert first tup1 = first tup2 */</span>
<a name="l01461"></a>01461         z3.AssertCnstr(z3.MkEq(z3.MkApp(first,tup1), z3.MkApp(first, tup2)));
<a name="l01462"></a>01462 
<a name="l01463"></a>01463         <span class="comment">/* find model for the constraints above */</span>
<a name="l01464"></a>01464         Model model = null;
<a name="l01465"></a>01465         <span class="keywordflow">if</span> (<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True == z3.CheckAndGetModel(out model)) {
<a name="l01466"></a>01466             model.Display(Console.Out); 
<a name="l01467"></a>01467             Console.WriteLine(<span class="stringliteral">"evaluating tup1 {0}"</span>, z3.ToString(model.Eval(tup1)));
<a name="l01468"></a>01468             Console.WriteLine(<span class="stringliteral">"evaluating tup2 {0}"</span>, z3.ToString(model.Eval(tup2)));
<a name="l01469"></a>01469             Console.WriteLine(<span class="stringliteral">"evaluating second(tup2) {0}"</span>, 
<a name="l01470"></a>01470                               z3.ToString(model.Eval(z3.MkApp(second,tup2))));
<a name="l01471"></a>01471             model.Dispose();
<a name="l01472"></a>01472         }
<a name="l01473"></a>01473         <span class="keywordflow">else</span> {
<a name="l01474"></a>01474             Console.WriteLine(<span class="stringliteral">"BUG, the constraints are satisfiable."</span>);
<a name="l01475"></a>01475         }
<a name="l01476"></a>01476     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e1fc416964019d6927fd6917ae32d914"></a><!-- doxytag: member="TestManaged::find_model_example1" ref="e1fc416964019d6927fd6917ae32d914" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void find_model_example1           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find a model for <code>x xor y</code>. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00451">451</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00452"></a>00452     {        
<a name="l00453"></a>00453         Console.WriteLine(<span class="stringliteral">"find_model_example1"</span>);
<a name="l00454"></a>00454         
<a name="l00455"></a>00455         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00456"></a>00456                 
<a name="l00457"></a>00457         Term x       = <a class="code" href="class_test_managed.html#7fb0abc5b931a68efe63a594071b0d4e" title="Create a boolean variable using the given name.">mk_bool_var</a>(<span class="stringliteral">"x"</span>);
<a name="l00458"></a>00458         Term y       = <a class="code" href="class_test_managed.html#7fb0abc5b931a68efe63a594071b0d4e" title="Create a boolean variable using the given name.">mk_bool_var</a>(<span class="stringliteral">"y"</span>);
<a name="l00459"></a>00459         Term x_xor_y = z3.MkXor(x,y);
<a name="l00460"></a>00460         
<a name="l00461"></a>00461         z3.AssertCnstr(x_xor_y);
<a name="l00462"></a>00462         
<a name="l00463"></a>00463         Console.WriteLine(<span class="stringliteral">"model for: x xor y"</span>);
<a name="l00464"></a>00464         Model model = null;
<a name="l00465"></a>00465         <a class="code" href="class_test_managed.html#aea02c784e38e060c0154ac307682774" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True, out model);
<a name="l00466"></a>00466         Console.WriteLine(<span class="stringliteral">"x = {0}, y = {1}"</span>, 
<a name="l00467"></a>00467                           z3.ToString(model.Eval(x)),
<a name="l00468"></a>00468                           z3.ToString(model.Eval(y)));
<a name="l00469"></a>00469         model.Dispose();
<a name="l00470"></a>00470     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5194ee6f65cb7e4280e7577816d67e4a"></a><!-- doxytag: member="TestManaged::find_model_example2" ref="5194ee6f65cb7e4280e7577816d67e4a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void find_model_example2           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find a model for <code>x &lt; y + 1, x &gt; 2</code>. Then, assert <code>not(x = y)</code>, and find another model. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00476">476</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00477"></a>00477     {
<a name="l00478"></a>00478         Console.WriteLine(<span class="stringliteral">"find_model_example2"</span>);
<a name="l00479"></a>00479 
<a name="l00480"></a>00480         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00481"></a>00481         Term x          = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"x"</span>);
<a name="l00482"></a>00482         Term y          = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"y"</span>);
<a name="l00483"></a>00483         Term one        = mk_int(1);
<a name="l00484"></a>00484         Term two        = mk_int(2);
<a name="l00485"></a>00485 
<a name="l00486"></a>00486         Term y_plus_one = z3.MkAdd(y, one);
<a name="l00487"></a>00487         
<a name="l00488"></a>00488         Term c1         = z3.MkLt(x, y_plus_one);
<a name="l00489"></a>00489         Term c2         = z3.MkGt(x, two);
<a name="l00490"></a>00490     
<a name="l00491"></a>00491         z3.AssertCnstr(c1);
<a name="l00492"></a>00492         z3.AssertCnstr(c2);
<a name="l00493"></a>00493 
<a name="l00494"></a>00494         Console.WriteLine(<span class="stringliteral">"model for: x &lt; y + 1, x &gt; 2"</span>);
<a name="l00495"></a>00495         Model model = null;
<a name="l00496"></a>00496         <a class="code" href="class_test_managed.html#aea02c784e38e060c0154ac307682774" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True, out model);
<a name="l00497"></a>00497         Console.WriteLine(<span class="stringliteral">"x = {0}, y = {1}"</span>, 
<a name="l00498"></a>00498                           z3.ToString(model.Eval(x)),
<a name="l00499"></a>00499                           z3.ToString(model.Eval(y)));
<a name="l00500"></a>00500         model.Dispose();
<a name="l00501"></a>00501         model = null;
<a name="l00502"></a>00502 
<a name="l00503"></a>00503         <span class="comment">/* assert not(x = y) */</span>
<a name="l00504"></a>00504         Term x_eq_y     = z3.MkEq(x, y);
<a name="l00505"></a>00505         Term c3         = z3.MkNot(x_eq_y);
<a name="l00506"></a>00506         z3.AssertCnstr(c3);
<a name="l00507"></a>00507         
<a name="l00508"></a>00508         Console.WriteLine(<span class="stringliteral">"model for: x &lt; y + 1, x &gt; 2, not(x = y)"</span>);
<a name="l00509"></a>00509         <a class="code" href="class_test_managed.html#aea02c784e38e060c0154ac307682774" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True, out model);
<a name="l00510"></a>00510         Console.WriteLine(<span class="stringliteral">"x = {0}, y = {1}"</span>, 
<a name="l00511"></a>00511                           z3.ToString(model.Eval(x)),
<a name="l00512"></a>00512                           z3.ToString(model.Eval(y)));
<a name="l00513"></a>00513         model.Dispose();
<a name="l00514"></a>00514     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6ef7478eb7058d82a62513d0c03f15f8"></a><!-- doxytag: member="TestManaged::find_small_model_example" ref="6ef7478eb7058d82a62513d0c03f15f8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void find_small_model_example           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reduced-size model generation example. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01551">1551</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01551"></a>01551                                            {
<a name="l01552"></a>01552         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l01553"></a>01553         Term x = <a class="code" href="class_test_managed.html#a56f9da4b37e365db43d8e132f86c64d" title="Create a bit-vector variable using the given name.">mk_bv_var</a>(<span class="stringliteral">"x"</span>,32);
<a name="l01554"></a>01554         Term y = <a class="code" href="class_test_managed.html#a56f9da4b37e365db43d8e132f86c64d" title="Create a bit-vector variable using the given name.">mk_bv_var</a>(<span class="stringliteral">"y"</span>,32);
<a name="l01555"></a>01555         Term z = <a class="code" href="class_test_managed.html#a56f9da4b37e365db43d8e132f86c64d" title="Create a bit-vector variable using the given name.">mk_bv_var</a>(<span class="stringliteral">"z"</span>,32);
<a name="l01556"></a>01556         Sort bv32 = <a class="code" href="class_test_managed.html#a0db7a2fa18537d86d545ac2caf8d487" title="Create a bit-vector type.">mk_bv_type</a>(32);
<a name="l01557"></a>01557         z3.AssertCnstr(z3.MkBvUle(x, z3.MkBvAdd(y, z)));
<a name="l01558"></a>01558         <a class="code" href="class_test_managed.html#07f2d46da4494d4e47658b955c84c5b1" title="Demonstrate how to use Push and Pop to control the size of models.">check_small</a>(<span class="keyword">new</span> Term[]{x,y,z});
<a name="l01559"></a>01559     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="93d1bdb67347976ccffbc086de426f48"></a><!-- doxytag: member="TestManaged::forest_example" ref="93d1bdb67347976ccffbc086de426f48" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void forest_example           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a forest of trees. 
<p>
forest ::= nil | cons(tree, forest) tree ::= nil | cons(forest, forest) 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01290">1290</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01290"></a>01290                                  {
<a name="l01291"></a>01291         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l01292"></a>01292         Sort tree, forest;
<a name="l01293"></a>01293         FuncDecl nil1_decl, is_nil1_decl, cons1_decl, is_cons1_decl, car1_decl, cdr1_decl;
<a name="l01294"></a>01294         FuncDecl nil2_decl, is_nil2_decl, cons2_decl, is_cons2_decl, car2_decl, cdr2_decl;
<a name="l01295"></a>01295         Term nil1, nil2, t1, t2, t3, t4, f1, f2, f3, l1, l2, x, y, u, v;
<a name="l01296"></a>01296 
<a name="l01297"></a>01297         <span class="comment">//</span>
<a name="l01298"></a>01298         <span class="comment">// Declare the names of the accessors for cons.</span>
<a name="l01299"></a>01299         <span class="comment">// Then declare the sorts of the accessors. </span>
<a name="l01300"></a>01300         <span class="comment">// For this example, all sorts refer to the new types 'forest' and 'tree'</span>
<a name="l01301"></a>01301         <span class="comment">// being declared, so we pass in null for both sorts1 and sorts2.</span>
<a name="l01302"></a>01302         <span class="comment">// On the other hand, the sort_refs arrays contain the indices of the</span>
<a name="l01303"></a>01303         <span class="comment">// two new sorts being declared. The first element in sort1_refs</span>
<a name="l01304"></a>01304         <span class="comment">// points to 'tree', which has index 1, the second element in sort1_refs array</span>
<a name="l01305"></a>01305         <span class="comment">// points to 'forest', which has index 0.</span>
<a name="l01306"></a>01306         <span class="comment">// </span>
<a name="l01307"></a>01307         <span class="keywordtype">string</span>[] head_tail1 = <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">"head"</span>, <span class="stringliteral">"tail"</span> };
<a name="l01308"></a>01308         Sort[] sorts1       = <span class="keyword">new</span> Sort[]   {  null, null };
<a name="l01309"></a>01309         uint[] sort1_refs   = <span class="keyword">new</span> uint[]   {  1,    0}; <span class="comment">// the first item points to a tree, the second to a forest</span>
<a name="l01310"></a>01310         
<a name="l01311"></a>01311         <span class="keywordtype">string</span>[] head_tail2 = <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">"car"</span>, <span class="stringliteral">"cdr"</span> };
<a name="l01312"></a>01312         Sort[] sorts2       = <span class="keyword">new</span> Sort[]   { null,  null };
<a name="l01313"></a>01313         uint[] sort2_refs   = <span class="keyword">new</span> uint[]   { 0,     0}; <span class="comment">// both items point to the forest datatype.</span>
<a name="l01314"></a>01314         <a class="code" href="class_microsoft_1_1_z3_1_1_constructor.html" title="Container for constructor declarations.">Constructor</a> nil1_con, cons1_con, nil2_con, cons2_con;
<a name="l01315"></a>01315         <a class="code" href="class_microsoft_1_1_z3_1_1_constructor.html" title="Container for constructor declarations.">Constructor</a>[] constructors1 = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_constructor.html" title="Container for constructor declarations.">Constructor</a>[2], constructors2 = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_constructor.html" title="Container for constructor declarations.">Constructor</a>[2];
<a name="l01316"></a>01316         <span class="keywordtype">string</span>[] sort_names = { <span class="stringliteral">"forest"</span>, <span class="stringliteral">"tree"</span> };
<a name="l01317"></a>01317 
<a name="l01318"></a>01318         Console.WriteLine(<span class="stringliteral">"\nforest_example"</span>);
<a name="l01319"></a>01319         
<a name="l01320"></a>01320         <span class="comment">/* build a forest */</span>
<a name="l01321"></a>01321         nil1_con  = z3.MkConstructor(<span class="stringliteral">"nil"</span>, <span class="stringliteral">"is_nil"</span>, null, null, null);
<a name="l01322"></a>01322         cons1_con = z3.MkConstructor(<span class="stringliteral">"cons1"</span>, <span class="stringliteral">"is_cons1"</span>, head_tail1, sorts1, sort1_refs);
<a name="l01323"></a>01323         constructors1[0] = nil1_con;
<a name="l01324"></a>01324         constructors1[1] = cons1_con;
<a name="l01325"></a>01325         
<a name="l01326"></a>01326         <span class="comment">/* build a tree */</span>
<a name="l01327"></a>01327         nil2_con  = z3.MkConstructor(<span class="stringliteral">"nil2"</span>, <span class="stringliteral">"is_nil2"</span>, null, null, null);
<a name="l01328"></a>01328         cons2_con = z3.MkConstructor(<span class="stringliteral">"cons2"</span>, <span class="stringliteral">"is_cons2"</span>, head_tail2, sorts2, sort2_refs);
<a name="l01329"></a>01329         constructors2[0] = nil2_con;
<a name="l01330"></a>01330         constructors2[1] = cons2_con;
<a name="l01331"></a>01331 
<a name="l01332"></a>01332         
<a name="l01333"></a>01333         <a class="code" href="class_microsoft_1_1_z3_1_1_constructor.html" title="Container for constructor declarations.">Constructor</a>[][] clists = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_constructor.html" title="Container for constructor declarations.">Constructor</a>[][] { constructors1, constructors2 };
<a name="l01334"></a>01334         
<a name="l01335"></a>01335         Sort[] sorts = z3.<a class="code" href="class_microsoft_1_1_z3_1_1_context.html#9888fb987071bd35392f5d6b33353f31" title="create datatype sort.">MkDataTypes</a>(sort_names, clists);
<a name="l01336"></a>01336         forest = sorts[0];
<a name="l01337"></a>01337         tree = sorts[1];
<a name="l01338"></a>01338         
<a name="l01339"></a>01339         <span class="comment">//</span>
<a name="l01340"></a>01340         <span class="comment">// Now that the datatype has been created.</span>
<a name="l01341"></a>01341         <span class="comment">// Query the constructors for the constructor</span>
<a name="l01342"></a>01342         <span class="comment">// functions, testers, and field accessors.</span>
<a name="l01343"></a>01343         <span class="comment">//</span>
<a name="l01344"></a>01344         nil1_decl = z3.GetConstructor(nil1_con);
<a name="l01345"></a>01345         is_nil1_decl = z3.GetTester(nil1_con);
<a name="l01346"></a>01346         cons1_decl = z3.GetConstructor(cons1_con);
<a name="l01347"></a>01347         is_cons1_decl = z3.GetTester(cons1_con);
<a name="l01348"></a>01348         FuncDecl[] cons1_accessors = z3.GetAccessors(cons1_con);
<a name="l01349"></a>01349         car1_decl = cons1_accessors[0];
<a name="l01350"></a>01350         cdr1_decl = cons1_accessors[1];
<a name="l01351"></a>01351 
<a name="l01352"></a>01352         nil2_decl = z3.GetConstructor(nil2_con);
<a name="l01353"></a>01353         is_nil2_decl = z3.GetTester(nil2_con);
<a name="l01354"></a>01354         cons2_decl = z3.GetConstructor(cons2_con);
<a name="l01355"></a>01355         is_cons2_decl = z3.GetTester(cons2_con);
<a name="l01356"></a>01356         FuncDecl[] cons2_accessors = z3.GetAccessors(cons2_con);
<a name="l01357"></a>01357         car2_decl = cons2_accessors[0];
<a name="l01358"></a>01358         cdr2_decl = cons2_accessors[1];
<a name="l01359"></a>01359 
<a name="l01360"></a>01360         
<a name="l01361"></a>01361         nil1_con.Dispose();
<a name="l01362"></a>01362         nil2_con.Dispose();
<a name="l01363"></a>01363         cons1_con.Dispose();
<a name="l01364"></a>01364         cons2_con.Dispose();
<a name="l01365"></a>01365 
<a name="l01366"></a>01366         nil1 = z3.MkConst(nil1_decl);
<a name="l01367"></a>01367         nil2 = z3.MkConst(nil2_decl);
<a name="l01368"></a>01368         f1 = mk_binary_app(cons1_decl, nil2, nil1);
<a name="l01369"></a>01369         t1 = mk_binary_app(cons2_decl, nil1, nil1);
<a name="l01370"></a>01370         t2 = mk_binary_app(cons2_decl, f1, nil1);
<a name="l01371"></a>01371         t3 = mk_binary_app(cons2_decl, f1, f1);
<a name="l01372"></a>01372         t4 = mk_binary_app(cons2_decl, nil1, f1);
<a name="l01373"></a>01373         f2 = mk_binary_app(cons1_decl, t1, nil1);
<a name="l01374"></a>01374         f3 = mk_binary_app(cons1_decl, t1, f1);
<a name="l01375"></a>01375         
<a name="l01376"></a>01376         
<a name="l01377"></a>01377         <span class="comment">/* nil != cons(nil,nil) */</span>
<a name="l01378"></a>01378         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkNot(z3.MkEq(nil1, f1)), <span class="keyword">true</span>);
<a name="l01379"></a>01379         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkNot(z3.MkEq(nil2, t1)), <span class="keyword">true</span>);
<a name="l01380"></a>01380 
<a name="l01381"></a>01381 
<a name="l01382"></a>01382         <span class="comment">/* cons(x,u) = cons(x, v) =&gt; u = v */</span>
<a name="l01383"></a>01383         u = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"u"</span>, forest);
<a name="l01384"></a>01384         v = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"v"</span>, forest);    
<a name="l01385"></a>01385         x = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"x"</span>, tree);
<a name="l01386"></a>01386         y = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"y"</span>, tree);
<a name="l01387"></a>01387         l1 = mk_binary_app(cons1_decl, x, u);
<a name="l01388"></a>01388         l2 = mk_binary_app(cons1_decl, y, v);
<a name="l01389"></a>01389         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkImplies(z3.MkEq(l1,l2), z3.MkEq(u, v)), <span class="keyword">true</span>);
<a name="l01390"></a>01390         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkImplies(z3.MkEq(l1,l2), z3.MkEq(x, y)), <span class="keyword">true</span>);
<a name="l01391"></a>01391         
<a name="l01392"></a>01392         <span class="comment">/* is_nil(u) or is_cons(u) */</span>
<a name="l01393"></a>01393         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkOr(z3.MkApp(is_nil1_decl, u), z3.MkApp(is_cons1_decl, u)), <span class="keyword">true</span>);
<a name="l01394"></a>01394         
<a name="l01395"></a>01395         <span class="comment">/* occurs check u != cons(x,u) */</span>    
<a name="l01396"></a>01396         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkNot(z3.MkEq(u, l1)), <span class="keyword">true</span>);
<a name="l01397"></a>01397     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1ddab4a26c9cebda4cd3553dbc58db8c"></a><!-- doxytag: member="TestManaged::injective_example" ref="1ddab4a26c9cebda4cd3553dbc58db8c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void injective_example           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Injective functions. 
<p>
Check that the projection of a tuple returns the corresponding element. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00960">960</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00960"></a>00960                                     {
<a name="l00961"></a>00961         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00962"></a>00962         Sort int_type = <a class="code" href="class_test_managed.html#ae028ed1ab2b2dfadd311f548b64864e" title="Create an integer type.">mk_int_type</a>();
<a name="l00963"></a>00963         FuncDecl f = z3.MkInjectiveFunction(<span class="stringliteral">"f_inj"</span>, <span class="keyword">new</span> Sort[]{int_type}, int_type);
<a name="l00964"></a>00964         Term x = z3.MkConst(<span class="stringliteral">"x"</span>,int_type);
<a name="l00965"></a>00965         Term y = z3.MkConst(<span class="stringliteral">"y"</span>,int_type);
<a name="l00966"></a>00966         Term fx = z3.MkApp(f,x);
<a name="l00967"></a>00967         Term f_y = z3.MkApp(f,y);
<a name="l00968"></a>00968         Term c = z3.MkImplies(z3.MkEq(fx,f_y), z3.MkEq(x,y));
<a name="l00969"></a>00969         Console.WriteLine(<span class="stringliteral">"Injective example: {0}"</span>,z3.ToString(c));
<a name="l00970"></a>00970         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(c);        
<a name="l00971"></a>00971     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="fa3f89e53c339dda8c0a9b4b126139f7"></a><!-- doxytag: member="TestManaged::ite_example" ref="fa3f89e53c339dda8c0a9b4b126139f7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ite_example           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create an ite-term (if-then-else terms). 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01098">1098</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01099"></a>01099     {
<a name="l01100"></a>01100         Console.WriteLine(<span class="stringliteral">"\nite_example"</span>);
<a name="l01101"></a>01101         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l01102"></a>01102                 
<a name="l01103"></a>01103         Term f    = z3.MkFalse();
<a name="l01104"></a>01104         Term one  = mk_int(1);
<a name="l01105"></a>01105         Term zero = mk_int(0);
<a name="l01106"></a>01106         Term ite  = z3.MkIte(f, one, zero);
<a name="l01107"></a>01107         
<a name="l01108"></a>01108         Console.WriteLine(<span class="stringliteral">"term: {0}"</span>, ite);
<a name="l01109"></a>01109     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b3287b9c46ad438c87aa1f42b0e0dea8"></a><!-- doxytag: member="TestManaged::list_example" ref="b3287b9c46ad438c87aa1f42b0e0dea8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void list_example           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a list datatype. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01159">1159</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01159"></a>01159                                {
<a name="l01160"></a>01160         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l01161"></a>01161 
<a name="l01162"></a>01162         Sort int_ty, int_list;
<a name="l01163"></a>01163         FuncDecl nil_decl, is_nil_decl, cons_decl, is_cons_decl, head_decl, tail_decl;
<a name="l01164"></a>01164         Term nil, l1, l2, x, y, u, v, fml, fml1;
<a name="l01165"></a>01165                 
<a name="l01166"></a>01166         Console.WriteLine(<span class="stringliteral">"\nlist_example"</span>);
<a name="l01167"></a>01167         
<a name="l01168"></a>01168         int_ty = z3.MkIntSort();
<a name="l01169"></a>01169         
<a name="l01170"></a>01170         int_list = z3.MkListSort(<span class="stringliteral">"int_list"</span>, int_ty,
<a name="l01171"></a>01171                                  out nil_decl, out is_nil_decl, out cons_decl, out is_cons_decl, out head_decl, out tail_decl);
<a name="l01172"></a>01172         
<a name="l01173"></a>01173         nil = z3.MkConst(nil_decl);
<a name="l01174"></a>01174         l1 = mk_binary_app(cons_decl, mk_int(1), nil);
<a name="l01175"></a>01175         l2 = mk_binary_app(cons_decl, mk_int(2), nil);
<a name="l01176"></a>01176         
<a name="l01177"></a>01177         <span class="comment">/* nil != cons(1, nil) */</span>
<a name="l01178"></a>01178         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkNot(z3.MkEq(nil, l1)), <span class="keyword">true</span>);
<a name="l01179"></a>01179         
<a name="l01180"></a>01180         <span class="comment">/* cons(2,nil) != cons(1, nil) */</span>
<a name="l01181"></a>01181         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkNot(z3.MkEq(l1, l2)), <span class="keyword">true</span>);
<a name="l01182"></a>01182         
<a name="l01183"></a>01183         <span class="comment">/* cons(x,nil) = cons(y, nil) =&gt; x = y */</span>
<a name="l01184"></a>01184         x = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"x"</span>, int_ty);
<a name="l01185"></a>01185         y = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"y"</span>, int_ty);    
<a name="l01186"></a>01186         l1 = mk_binary_app(cons_decl, x, nil);
<a name="l01187"></a>01187         l2 = mk_binary_app(cons_decl, y, nil);
<a name="l01188"></a>01188         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkImplies(z3.MkEq(l1,l2), z3.MkEq(x, y)), <span class="keyword">true</span>);
<a name="l01189"></a>01189         
<a name="l01190"></a>01190         <span class="comment">/* cons(x,u) = cons(x, v) =&gt; u = v */</span>
<a name="l01191"></a>01191         u = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"u"</span>, int_list);
<a name="l01192"></a>01192         v = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"v"</span>, int_list);    
<a name="l01193"></a>01193         l1 = mk_binary_app(cons_decl, x, u);
<a name="l01194"></a>01194         l2 = mk_binary_app(cons_decl, y, v);
<a name="l01195"></a>01195         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkImplies(z3.MkEq(l1,l2), z3.MkEq(u, v)), <span class="keyword">true</span>);
<a name="l01196"></a>01196         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkImplies(z3.MkEq(l1,l2), z3.MkEq(x, y)), <span class="keyword">true</span>);
<a name="l01197"></a>01197         
<a name="l01198"></a>01198         <span class="comment">/* is_nil(u) or is_cons(u) */</span>
<a name="l01199"></a>01199         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkOr(z3.MkApp(is_nil_decl, u), z3.MkApp(is_cons_decl, u)), <span class="keyword">true</span>);
<a name="l01200"></a>01200         
<a name="l01201"></a>01201         <span class="comment">/* occurs check u != cons(x,u) */</span>    
<a name="l01202"></a>01202         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkNot(z3.MkEq(u, l1)), <span class="keyword">true</span>);
<a name="l01203"></a>01203         
<a name="l01204"></a>01204         <span class="comment">/* destructors: is_cons(u) =&gt; u = cons(head(u),tail(u)) */</span>
<a name="l01205"></a>01205         fml1 = z3.MkEq(u, mk_binary_app(cons_decl, mk_unary_app(head_decl, u), mk_unary_app(tail_decl, u)));
<a name="l01206"></a>01206         fml = z3.MkImplies(z3.MkApp(is_cons_decl, u), fml1);
<a name="l01207"></a>01207         Console.WriteLine(<span class="stringliteral">"Formula {0}"</span>, fml);
<a name="l01208"></a>01208 
<a name="l01209"></a>01209         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(fml, <span class="keyword">true</span>);
<a name="l01210"></a>01210         
<a name="l01211"></a>01211         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(fml1, <span class="keyword">false</span>);
<a name="l01212"></a>01212     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7fb0abc5b931a68efe63a594071b0d4e"></a><!-- doxytag: member="TestManaged::mk_bool_var" ref="7fb0abc5b931a68efe63a594071b0d4e" args="(string name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Term mk_bool_var           </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a boolean variable using the given name. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00053">53</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>

<p>Referenced by <a class="el" href="test__managed_8cs_source.html#l00451">find_model_example1()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00053"></a>00053                                          {
<a name="l00054"></a>00054         <span class="keywordflow">return</span> <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(name, z3.MkBoolSort());
<a name="l00055"></a>00055     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a0db7a2fa18537d86d545ac2caf8d487"></a><!-- doxytag: member="TestManaged::mk_bv_type" ref="a0db7a2fa18537d86d545ac2caf8d487" args="(uint num_bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Sort mk_bv_type           </td>
          <td>(</td>
          <td class="paramtype">uint&nbsp;</td>
          <td class="paramname"> <em>num_bytes</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a bit-vector type. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00041">41</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>

<p>Referenced by <a class="el" href="test__managed_8cs_source.html#l00065">mk_bv_var()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00041"></a>00041                                            {
<a name="l00042"></a>00042         <span class="keywordflow">return</span> z3.MkBvSort(num_bytes);
<a name="l00043"></a>00043     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a56f9da4b37e365db43d8e132f86c64d"></a><!-- doxytag: member="TestManaged::mk_bv_var" ref="a56f9da4b37e365db43d8e132f86c64d" args="(string name, uint num_bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Term mk_bv_var           </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&nbsp;</td>
          <td class="paramname"> <em>num_bytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a bit-vector variable using the given name. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00065">65</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00065"></a>00065                                                        {
<a name="l00066"></a>00066         <span class="keywordflow">return</span> <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(name, <a class="code" href="class_test_managed.html#a0db7a2fa18537d86d545ac2caf8d487" title="Create a bit-vector type.">mk_bv_type</a>(num_bytes));
<a name="l00067"></a>00067     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="951d71e05e11495f2d0c8db5776cb273"></a><!-- doxytag: member="TestManaged::mk_context" ref="951d71e05e11495f2d0c8db5776cb273" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mk_context           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a logical context with model construction enabled. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00022">22</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>

<p>Referenced by <a class="el" href="test__managed_8cs_source.html#l00794">array_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00837">array_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00909">bitvector_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00931">bitvector_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00451">find_model_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00476">find_model_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00960">injective_example()</a>, <a class="el" href="test__managed_8cs_source.html#l01098">ite_example()</a>, <a class="el" href="test__managed_8cs_source.html#l00976">parser_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00996">parser_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l01026">parser_example3()</a>, <a class="el" href="test__managed_8cs_source.html#l01052">parser_example4()</a>, <a class="el" href="test__managed_8cs_source.html#l00523">prove_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00571">prove_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00628">push_pop_example1()</a>, and <a class="el" href="test__managed_8cs_source.html#l00882">tuple_example()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00022"></a>00022                              {
<a name="l00023"></a>00023         <span class="keywordflow">if</span> (this.z3 != null) {
<a name="l00024"></a>00024             this.z3.Dispose();
<a name="l00025"></a>00025         }
<a name="l00026"></a>00026         <a class="code" href="class_microsoft_1_1_z3_1_1_config.html" title="Configuration.">Config</a> p = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_config.html" title="Configuration.">Config</a>();
<a name="l00027"></a>00027         p.<a class="code" href="class_microsoft_1_1_z3_1_1_config.html#58c38c04f7b5d1553ff23d28b29dbcd9" title="Set parameter to specified value.">SetParamValue</a>(<span class="stringliteral">"MODEL"</span>,<span class="stringliteral">"true"</span>);
<a name="l00028"></a>00028         this.z3 = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_context.html" title="Type safe contexts.">Context</a>(p);
<a name="l00029"></a>00029         p.Dispose();
<a name="l00030"></a>00030     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ae028ed1ab2b2dfadd311f548b64864e"></a><!-- doxytag: member="TestManaged::mk_int_type" ref="ae028ed1ab2b2dfadd311f548b64864e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Sort mk_int_type           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create an integer type. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00035">35</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>

<p>Referenced by <a class="el" href="test__managed_8cs_source.html#l00794">array_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00960">injective_example()</a>, <a class="el" href="test__managed_8cs_source.html#l00059">mk_int_var()</a>, <a class="el" href="test__managed_8cs_source.html#l00571">prove_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00628">push_pop_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00692">quantifier_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00743">quantifier_example1_abs()</a>, and <a class="el" href="test__managed_8cs_source.html#l00882">tuple_example()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00035"></a>00035                               {
<a name="l00036"></a>00036         <span class="keywordflow">return</span> z3.MkIntSort();
<a name="l00037"></a>00037     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="23e09c7b3ffed5f174441ef55a15c6b4"></a><!-- doxytag: member="TestManaged::mk_int_var" ref="23e09c7b3ffed5f174441ef55a15c6b4" args="(string name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Term mk_int_var           </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create an integer variable using the given name. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00059">59</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>

<p>Referenced by <a class="el" href="test__managed_8cs_source.html#l00476">find_model_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00571">prove_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00692">quantifier_example1()</a>, and <a class="el" href="test__managed_8cs_source.html#l00743">quantifier_example1_abs()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00059"></a>00059                                         {
<a name="l00060"></a>00060         <span class="keywordflow">return</span> <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(name, <a class="code" href="class_test_managed.html#ae028ed1ab2b2dfadd311f548b64864e" title="Create an integer type.">mk_int_type</a>());
<a name="l00061"></a>00061     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b94596cda6901d5c2b38b0adfe2d2bd4"></a><!-- doxytag: member="TestManaged::mk_var" ref="b94596cda6901d5c2b38b0adfe2d2bd4" args="(string name, Sort ty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Term mk_var           </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Sort&nbsp;</td>
          <td class="paramname"> <em>ty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a variable using the given name and type. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00047">47</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>

<p>Referenced by <a class="el" href="test__managed_8cs_source.html#l00794">array_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00909">bitvector_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00931">bitvector_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00053">mk_bool_var()</a>, <a class="el" href="test__managed_8cs_source.html#l00065">mk_bv_var()</a>, and <a class="el" href="test__managed_8cs_source.html#l00059">mk_int_var()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00047"></a>00047                                              {
<a name="l00048"></a>00048         <span class="keywordflow">return</span> z3.MkConst(name,ty);
<a name="l00049"></a>00049     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="34d5e8e536a5649693f8cefa4805a81e"></a><!-- doxytag: member="TestManaged::parser_example1" ref="34d5e8e536a5649693f8cefa4805a81e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parser_example1           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Demonstrates how to use the SMTLIB parser. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00976">976</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00977"></a>00977     {
<a name="l00978"></a>00978         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00979"></a>00979         
<a name="l00980"></a>00980         Console.WriteLine(<span class="stringliteral">"\nparser_example1"</span>);
<a name="l00981"></a>00981                 
<a name="l00982"></a>00982         Term[] formulas, assumptions;
<a name="l00983"></a>00983         FuncDecl[] decls;
<a name="l00984"></a>00984         z3.ParseSmtlibString(<span class="stringliteral">"(benchmark tst :extrafuns ((x Int) (y Int)) :formula (&gt; x y) :formula (&gt; x 0))"</span>,
<a name="l00985"></a>00985                              null, null, out assumptions, out formulas, out decls);
<a name="l00986"></a>00986         <span class="keywordflow">foreach</span> (var f <span class="keywordflow">in</span> formulas) {
<a name="l00987"></a>00987             Console.WriteLine(<span class="stringliteral">"formula {0}"</span>, f);
<a name="l00988"></a>00988             z3.AssertCnstr(f);
<a name="l00989"></a>00989         }       
<a name="l00990"></a>00990         <a class="code" href="class_test_managed.html#e2d6d19afb57eaeb75b366f5c026bee9" title="Similar to check, but uses display_model instead of Z3&amp;#39;s native display method...">check2</a>(<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True);
<a name="l00991"></a>00991     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9c8fd60a787198a88ebcefc0282ea3cd"></a><!-- doxytag: member="TestManaged::parser_example2" ref="9c8fd60a787198a88ebcefc0282ea3cd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parser_example2           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Demonstrates how to initialize the parser symbol table. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00996">996</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00997"></a>00997     {
<a name="l00998"></a>00998         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00999"></a>00999         Console.WriteLine(<span class="stringliteral">"\nparser_example2"</span>);
<a name="l01000"></a>01000     
<a name="l01001"></a>01001         <span class="comment">/* </span>
<a name="l01002"></a>01002 <span class="comment">           Z3_enable_arithmetic doesn't need to be invoked in this example</span>
<a name="l01003"></a>01003 <span class="comment">           because it will be implicitly invoked by mk_int_var.</span>
<a name="l01004"></a>01004 <span class="comment">        */</span>
<a name="l01005"></a>01005     
<a name="l01006"></a>01006         FuncDecl a = z3.MkConstDecl(<span class="stringliteral">"a"</span>, z3.MkIntSort());
<a name="l01007"></a>01007         FuncDecl b = z3.MkConstDecl(<span class="stringliteral">"b"</span>, z3.MkIntSort());
<a name="l01008"></a>01008         FuncDecl[] decls   = <span class="keyword">new</span> FuncDecl[]{a,b};
<a name="l01009"></a>01009         Term[] formulas, assumptions;
<a name="l01010"></a>01010         FuncDecl[] new_decls;
<a name="l01011"></a>01011 
<a name="l01012"></a>01012         z3.ParseSmtlibString(
<a name="l01013"></a>01013                            <span class="stringliteral">"(benchmark tst :formula (&gt; a b))"</span>,
<a name="l01014"></a>01014                            null, 
<a name="l01015"></a>01015                            decls, 
<a name="l01016"></a>01016                            out assumptions, out formulas, out new_decls);
<a name="l01017"></a>01017         Term f = formulas[0];
<a name="l01018"></a>01018         Console.WriteLine(<span class="stringliteral">"formula: {0}"</span>, f);
<a name="l01019"></a>01019         z3.AssertCnstr(f);
<a name="l01020"></a>01020         <a class="code" href="class_test_managed.html#e2d6d19afb57eaeb75b366f5c026bee9" title="Similar to check, but uses display_model instead of Z3&amp;#39;s native display method...">check2</a>(<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True);
<a name="l01021"></a>01021     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ad0cce961cb43f47950149c5bb3729ae"></a><!-- doxytag: member="TestManaged::parser_example3" ref="ad0cce961cb43f47950149c5bb3729ae" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parser_example3           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Demonstrates how to initialize the parser symbol table. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01026">1026</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01027"></a>01027     {   
<a name="l01028"></a>01028         Console.WriteLine(<span class="stringliteral">"\nparser_example3"</span>);
<a name="l01029"></a>01029         
<a name="l01030"></a>01030         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l01031"></a>01031         
<a name="l01032"></a>01032         <span class="comment">/* declare function g */</span>
<a name="l01033"></a>01033         Sort int_type    = z3.MkIntSort();
<a name="l01034"></a>01034         FuncDecl g = z3.MkFuncDecl(<span class="stringliteral">"g"</span>, <span class="keyword">new</span> Sort[]{int_type, int_type}, int_type);
<a name="l01035"></a>01035         Term[] formulas, assumptions;
<a name="l01036"></a>01036         FuncDecl[] new_decls;
<a name="l01037"></a>01037         
<a name="l01038"></a>01038         assert_comm_axiom(g);
<a name="l01039"></a>01039         
<a name="l01040"></a>01040         z3.ParseSmtlibString(<span class="stringliteral">"(benchmark tst :formula (forall (x Int) (y Int) (implies (= x y) (= (g x 0) (g 0 y)))))"</span>,
<a name="l01041"></a>01041                              null, 
<a name="l01042"></a>01042                              <span class="keyword">new</span> FuncDecl[]{g},
<a name="l01043"></a>01043                              out assumptions, out formulas, out new_decls);
<a name="l01044"></a>01044         Term thm = formulas[0];
<a name="l01045"></a>01045         Console.WriteLine(<span class="stringliteral">"formula: {0}"</span>, thm);
<a name="l01046"></a>01046         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(thm);
<a name="l01047"></a>01047     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b1d78024df78dbb10723537c15647aed"></a><!-- doxytag: member="TestManaged::parser_example4" ref="b1d78024df78dbb10723537c15647aed" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parser_example4           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Display the declarations, assumptions and formulas in a SMT-LIB string. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01052">1052</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01053"></a>01053     {
<a name="l01054"></a>01054         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l01055"></a>01055         
<a name="l01056"></a>01056         Console.WriteLine(<span class="stringliteral">"\nparser_example4"</span>);
<a name="l01057"></a>01057     
<a name="l01058"></a>01058         Term[] formulas, assumptions;
<a name="l01059"></a>01059         FuncDecl[] decls;    
<a name="l01060"></a>01060         z3.ParseSmtlibString(  <span class="stringliteral">"(benchmark tst :extrafuns ((x Int) (y Int)) :assumption (= x 20) :formula (&gt; x y) :formula (&gt; x 0))"</span>,
<a name="l01061"></a>01061                                null, null, 
<a name="l01062"></a>01062                              out assumptions, out formulas, out decls);
<a name="l01063"></a>01063         <span class="keywordflow">foreach</span> (var decl <span class="keywordflow">in</span> decls) {
<a name="l01064"></a>01064             Console.WriteLine(<span class="stringliteral">"Declaration: {0}"</span>, decl);
<a name="l01065"></a>01065         }
<a name="l01066"></a>01066         <span class="keywordflow">foreach</span> (var f <span class="keywordflow">in</span> assumptions) {
<a name="l01067"></a>01067             Console.WriteLine(<span class="stringliteral">"Assumption: {0}"</span>, f);
<a name="l01068"></a>01068         }
<a name="l01069"></a>01069         <span class="keywordflow">foreach</span> (var f <span class="keywordflow">in</span> formulas) {
<a name="l01070"></a>01070             Console.WriteLine(<span class="stringliteral">"Formula: {0}"</span>, f);
<a name="l01071"></a>01071         }
<a name="l01072"></a>01072     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b9594032459f28272bbc74fe5e2c54fc"></a><!-- doxytag: member="TestManaged::parser_example5" ref="b9594032459f28272bbc74fe5e2c54fc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parser_example5           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Demonstrates how to handle parser errors using Z3 error handling support. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01077">1077</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01078"></a>01078     {
<a name="l01079"></a>01079         Console.WriteLine(<span class="stringliteral">"\nparser_example5"</span>);
<a name="l01080"></a>01080 
<a name="l01081"></a>01081         Term[] formulas, assumptions;
<a name="l01082"></a>01082         FuncDecl[] decls;    
<a name="l01083"></a>01083 
<a name="l01084"></a>01084         <span class="keywordflow">try</span> {
<a name="l01085"></a>01085             z3.ParseSmtlibString(
<a name="l01086"></a>01086                                  <span class="comment">/* the following string has a parsing error: missing parenthesis */</span>
<a name="l01087"></a>01087                                  <span class="stringliteral">"(benchmark tst :extrafuns ((x Int (y Int)) :formula (&gt; x y) :formula (&gt; x 0))"</span>,
<a name="l01088"></a>01088                                  null, null, out assumptions, out formulas, out decls);
<a name="l01089"></a>01089         }
<a name="l01090"></a>01090         <span class="keywordflow">catch</span> (<a class="code" href="class_microsoft_1_1_z3_1_1_z3_error.html" title="Z3 error exceptions contain an ErrorCode.">Z3Error</a> e) {
<a name="l01091"></a>01091             Console.WriteLine(<span class="stringliteral">"Z3 error: {0}"</span>, e);
<a name="l01092"></a>01092         }
<a name="l01093"></a>01093     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4d5279b013b163ac9a1fc0d5e69378ff"></a><!-- doxytag: member="TestManaged::prove" ref="4d5279b013b163ac9a1fc0d5e69378ff" args="(Term f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prove           </td>
          <td>(</td>
          <td class="paramtype">Term&nbsp;</td>
          <td class="paramname"> <em>f</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prove that the constraints already asserted into the logical context implies the given formula. The result of the proof is displayed. 
<p>
Z3 is a satisfiability checker. So, one can prove <code>f</code> by showing that <code>(not f)</code> is unsatisfiable. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00167">167</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>

<p>Referenced by <a class="el" href="test__managed_8cs_source.html#l00794">array_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00909">bitvector_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00960">injective_example()</a>, <a class="el" href="test__managed_8cs_source.html#l01026">parser_example3()</a>, <a class="el" href="test__managed_8cs_source.html#l00523">prove_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00571">prove_example2()</a>, <a class="el" href="test__managed_8cs_source.html#l00692">quantifier_example1()</a>, <a class="el" href="test__managed_8cs_source.html#l00743">quantifier_example1_abs()</a>, and <a class="el" href="test__managed_8cs_source.html#l00882">tuple_example()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00168"></a>00168     {        
<a name="l00169"></a>00169         <span class="comment">/* save the current state of the context */</span>
<a name="l00170"></a>00170         z3.Push();
<a name="l00171"></a>00171         
<a name="l00172"></a>00172         Term not_f = z3.MkNot(f);
<a name="l00173"></a>00173         z3.AssertCnstr(not_f);
<a name="l00174"></a>00174         
<a name="l00175"></a>00175         Model model = null;
<a name="l00176"></a>00176         <span class="keywordflow">switch</span> (z3.CheckAndGetModel(out model)) {
<a name="l00177"></a>00177         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.False:
<a name="l00178"></a>00178             <span class="comment">/* proved */</span>
<a name="l00179"></a>00179             Console.WriteLine(<span class="stringliteral">"valid"</span>);
<a name="l00180"></a>00180             <span class="keywordflow">break</span>;
<a name="l00181"></a>00181         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.Undef:
<a name="l00182"></a>00182             <span class="comment">/* Z3 failed to prove/disprove f. */</span>
<a name="l00183"></a>00183             Console.WriteLine(<span class="stringliteral">"unknown"</span>);
<a name="l00184"></a>00184             <span class="keywordflow">break</span>;
<a name="l00185"></a>00185         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True:
<a name="l00186"></a>00186             <span class="comment">/* disproved */</span>
<a name="l00187"></a>00187             Console.WriteLine(<span class="stringliteral">"invalid"</span>);
<a name="l00188"></a>00188             model.Display(Console.Out);
<a name="l00189"></a>00189             <span class="keywordflow">break</span>;
<a name="l00190"></a>00190         }
<a name="l00191"></a>00191         <span class="keywordflow">if</span> (model != null) {
<a name="l00192"></a>00192             model.Dispose();
<a name="l00193"></a>00193         }
<a name="l00194"></a>00194                 
<a name="l00195"></a>00195         <span class="comment">/* restore context */</span>
<a name="l00196"></a>00196         z3.Pop(1);
<a name="l00197"></a>00197     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c846328304893b21dca4e8470d07030c"></a><!-- doxytag: member="TestManaged::prove2" ref="c846328304893b21dca4e8470d07030c" args="(Term f, bool is_valid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prove2           </td>
          <td>(</td>
          <td class="paramtype">Term&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_valid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prove that the constraints already asserted into the logical context implies the given formula. The result of the proof is displayed. 
<p>
Z3 is a satisfiability checker. So, one can prove <code>f</code> by showing that <code>(not f)</code> is unsatisfiable. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00208">208</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00209"></a>00209     {        
<a name="l00210"></a>00210         <span class="comment">/* save the current state of the context */</span>
<a name="l00211"></a>00211         z3.Push();
<a name="l00212"></a>00212         
<a name="l00213"></a>00213         Term not_f = z3.MkNot(f);
<a name="l00214"></a>00214         z3.AssertCnstr(not_f);
<a name="l00215"></a>00215         
<a name="l00216"></a>00216         Model model = null;
<a name="l00217"></a>00217         <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a> result = z3.CheckAndGetModel(out model);
<a name="l00218"></a>00218         <span class="keywordflow">switch</span> (result) {
<a name="l00219"></a>00219         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.False:
<a name="l00220"></a>00220             <span class="comment">/* proved */</span>
<a name="l00221"></a>00221             Console.WriteLine(<span class="stringliteral">"valid"</span>);
<a name="l00222"></a>00222             <span class="keywordflow">if</span> (!is_valid) {
<a name="l00223"></a>00223                 exitf(<span class="stringliteral">"Did not expecte valid"</span>);
<a name="l00224"></a>00224             }
<a name="l00225"></a>00225             <span class="keywordflow">break</span>;
<a name="l00226"></a>00226         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.Undef:
<a name="l00227"></a>00227             <span class="comment">/* Z3 failed to prove/disprove f. */</span>
<a name="l00228"></a>00228             Console.WriteLine(<span class="stringliteral">"unknown"</span>);
<a name="l00229"></a>00229             <span class="keywordflow">if</span> (is_valid) {
<a name="l00230"></a>00230                 exitf(<span class="stringliteral">"Expected valid"</span>);
<a name="l00231"></a>00231             }
<a name="l00232"></a>00232             <span class="keywordflow">break</span>;
<a name="l00233"></a>00233         <span class="keywordflow">case</span> <a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True:
<a name="l00234"></a>00234             <span class="comment">/* disproved */</span>
<a name="l00235"></a>00235             Console.WriteLine(<span class="stringliteral">"invalid"</span>);
<a name="l00236"></a>00236             model.Display(Console.Out);
<a name="l00237"></a>00237             <span class="keywordflow">if</span> (is_valid) {
<a name="l00238"></a>00238                 exitf(<span class="stringliteral">"Expected valid"</span>);
<a name="l00239"></a>00239             }
<a name="l00240"></a>00240             <span class="keywordflow">break</span>;
<a name="l00241"></a>00241         }
<a name="l00242"></a>00242         <span class="keywordflow">if</span> (model != null) {
<a name="l00243"></a>00243             model.Dispose();
<a name="l00244"></a>00244         }
<a name="l00245"></a>00245                 
<a name="l00246"></a>00246         <span class="comment">/* restore context */</span>
<a name="l00247"></a>00247         z3.Pop(1);
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0cd53c9f10e66950a9121f5702bf8705"></a><!-- doxytag: member="TestManaged::prove_example1" ref="0cd53c9f10e66950a9121f5702bf8705" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prove_example1           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prove <code>x = y implies g(x) = g(y)</code>, and disprove <code>x = y implies g(g(x)) = g(y)</code>. 
<p>
This function demonstrates how to create uninterpreted types and functions. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00523">523</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00524"></a>00524     {
<a name="l00525"></a>00525         Console.WriteLine(<span class="stringliteral">"prove_example1"</span>);
<a name="l00526"></a>00526         
<a name="l00527"></a>00527         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00528"></a>00528         
<a name="l00529"></a>00529         <span class="comment">/* create uninterpreted type. */</span>
<a name="l00530"></a>00530         Sort U          = z3.MkSort(<span class="stringliteral">"U"</span>);
<a name="l00531"></a>00531         
<a name="l00532"></a>00532         <span class="comment">/* declare function g */</span>
<a name="l00533"></a>00533         FuncDecl g = z3.MkFuncDecl(<span class="stringliteral">"g"</span>, U, U);
<a name="l00534"></a>00534         
<a name="l00535"></a>00535         <span class="comment">/* create x and y */</span>
<a name="l00536"></a>00536         Term x      = z3.MkConst(<span class="stringliteral">"x"</span>, U);
<a name="l00537"></a>00537         Term y      = z3.MkConst(<span class="stringliteral">"y"</span>, U);
<a name="l00538"></a>00538         <span class="comment">/* create g(x), g(y) */</span>
<a name="l00539"></a>00539         Term gx          = mk_unary_app(g, x);
<a name="l00540"></a>00540         Term gy          = mk_unary_app(g, y);
<a name="l00541"></a>00541         
<a name="l00542"></a>00542         <span class="comment">/* assert x = y */</span>
<a name="l00543"></a>00543         Term eq          = z3.MkEq(x, y);
<a name="l00544"></a>00544         z3.AssertCnstr(eq);
<a name="l00545"></a>00545         
<a name="l00546"></a>00546         <span class="comment">/* prove g(x) = g(y) */</span>
<a name="l00547"></a>00547         Term f           = z3.MkEq(gx, gy);
<a name="l00548"></a>00548         Console.WriteLine(<span class="stringliteral">"prove: x = y implies g(x) = g(y)"</span>);
<a name="l00549"></a>00549         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(f);
<a name="l00550"></a>00550         
<a name="l00551"></a>00551         <span class="comment">/* create g(g(x)) */</span>
<a name="l00552"></a>00552         Term ggx         = mk_unary_app(g, gx);
<a name="l00553"></a>00553         
<a name="l00554"></a>00554         <span class="comment">/* disprove g(g(x)) = g(y) */</span>
<a name="l00555"></a>00555         f           = z3.MkEq(ggx, gy);
<a name="l00556"></a>00556         Console.WriteLine(<span class="stringliteral">"disprove: x = y implies g(g(x)) = g(y)"</span>);
<a name="l00557"></a>00557         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(f);
<a name="l00558"></a>00558 
<a name="l00559"></a>00559 
<a name="l00560"></a>00560         <span class="comment">/* Print the model using the custom model printer */</span>
<a name="l00561"></a>00561         z3.AssertCnstr(z3.MkNot(f));
<a name="l00562"></a>00562         <a class="code" href="class_test_managed.html#e2d6d19afb57eaeb75b366f5c026bee9" title="Similar to check, but uses display_model instead of Z3&amp;#39;s native display method...">check2</a>(<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True);
<a name="l00563"></a>00563     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="8a474ab19f7f08b45bf69d1bd6e2bb43"></a><!-- doxytag: member="TestManaged::prove_example2" ref="8a474ab19f7f08b45bf69d1bd6e2bb43" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prove_example2           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prove <code>not(g(g(x) - g(y)) = g(z)), x + z &lt;= y &lt;= x implies z &lt; 0 </code>. Then, show that <code>z &lt; -1</code> is not implied. 
<p>
This example demonstrates how to combine uninterpreted functions and arithmetic. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00571">571</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00572"></a>00572     {        
<a name="l00573"></a>00573         Console.WriteLine(<span class="stringliteral">"prove_example2"</span>);
<a name="l00574"></a>00574         
<a name="l00575"></a>00575         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00576"></a>00576                 
<a name="l00577"></a>00577         <span class="comment">/* declare function g */</span>
<a name="l00578"></a>00578         Sort int_type = <a class="code" href="class_test_managed.html#ae028ed1ab2b2dfadd311f548b64864e" title="Create an integer type.">mk_int_type</a>();
<a name="l00579"></a>00579 
<a name="l00580"></a>00580         FuncDecl g = z3.MkFuncDecl(<span class="stringliteral">"g"</span>, int_type, int_type);
<a name="l00581"></a>00581                 
<a name="l00582"></a>00582         <span class="comment">/* create x, y, and z */</span>
<a name="l00583"></a>00583         Term x           = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"x"</span>);
<a name="l00584"></a>00584         Term y           = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"y"</span>);
<a name="l00585"></a>00585         Term z           = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"z"</span>);
<a name="l00586"></a>00586         
<a name="l00587"></a>00587         <span class="comment">/* create gx, gy, gz */</span>
<a name="l00588"></a>00588         Term gx          = mk_unary_app(g, x);
<a name="l00589"></a>00589         Term gy          = mk_unary_app(g, y);
<a name="l00590"></a>00590         Term gz          = mk_unary_app(g, z);
<a name="l00591"></a>00591         
<a name="l00592"></a>00592         <span class="comment">/* create zero */</span>
<a name="l00593"></a>00593         Term zero        = mk_int(0);
<a name="l00594"></a>00594         
<a name="l00595"></a>00595         <span class="comment">/* assert not(g(g(x) - g(y)) = g(z)) */</span>
<a name="l00596"></a>00596         Term gx_gy       = z3.MkSub(gx, gy);
<a name="l00597"></a>00597         Term ggx_gy      = mk_unary_app(g, gx_gy);
<a name="l00598"></a>00598         Term eq          = z3.MkEq(ggx_gy, gz);
<a name="l00599"></a>00599         Term c1          = z3.MkNot(eq);
<a name="l00600"></a>00600         z3.AssertCnstr(c1);
<a name="l00601"></a>00601         
<a name="l00602"></a>00602         <span class="comment">/* assert x + z &lt;= y */</span>
<a name="l00603"></a>00603         Term x_plus_z    = z3.MkAdd(x,y);
<a name="l00604"></a>00604         Term c2          = z3.MkLe(x_plus_z, y);
<a name="l00605"></a>00605         z3.AssertCnstr(c2);
<a name="l00606"></a>00606         
<a name="l00607"></a>00607         <span class="comment">/* assert y &lt;= x */</span>
<a name="l00608"></a>00608         Term c3          = z3.MkLe(y, x);
<a name="l00609"></a>00609         z3.AssertCnstr(c3);
<a name="l00610"></a>00610         
<a name="l00611"></a>00611         <span class="comment">/* prove z &lt; 0 */</span>
<a name="l00612"></a>00612         Term f           = z3.MkLt(z, zero);
<a name="l00613"></a>00613         Console.WriteLine(<span class="stringliteral">"prove: not(g(g(x) - g(y)) = g(z)), x + z &lt;= y &lt;= x implies z &lt; 0"</span>);
<a name="l00614"></a>00614         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(f);
<a name="l00615"></a>00615         
<a name="l00616"></a>00616         <span class="comment">/* disprove z &lt; -1 */</span>
<a name="l00617"></a>00617         Term minus_one   = mk_int(-1);
<a name="l00618"></a>00618         f           = z3.MkLt(z, minus_one);
<a name="l00619"></a>00619         Console.WriteLine(<span class="stringliteral">"disprove: not(g(g(x) - g(y)) = g(z)), x + z &lt;= y &lt;= x implies z &lt; -1"</span>);
<a name="l00620"></a>00620         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(f);
<a name="l00621"></a>00621     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="07ee56f1ada5226634e68a8b37989fbd"></a><!-- doxytag: member="TestManaged::push_pop_example1" ref="07ee56f1ada5226634e68a8b37989fbd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void push_pop_example1           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Show how push &amp; pop can be used to create "backtracking" points. 
<p>
This example also demonstrates how big numbers can be created in Z3. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00628">628</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00629"></a>00629     {
<a name="l00630"></a>00630         Console.WriteLine(<span class="stringliteral">"push_pop_example1"</span>);
<a name="l00631"></a>00631 
<a name="l00632"></a>00632         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00633"></a>00633 
<a name="l00634"></a>00634         <span class="comment">/* create a big number */</span>
<a name="l00635"></a>00635         Sort int_type = <a class="code" href="class_test_managed.html#ae028ed1ab2b2dfadd311f548b64864e" title="Create an integer type.">mk_int_type</a>();
<a name="l00636"></a>00636         Term big_number = z3.MkNumeral(<span class="stringliteral">"1000000000000000000000000000000000000000000000000000000"</span>, int_type);
<a name="l00637"></a>00637     
<a name="l00638"></a>00638         <span class="comment">/* create number 3 */</span>
<a name="l00639"></a>00639         Term three      = z3.MkNumeral(<span class="stringliteral">"3"</span>, int_type);
<a name="l00640"></a>00640 
<a name="l00641"></a>00641         <span class="comment">/* create x */</span>
<a name="l00642"></a>00642         Term x          = z3.MkConst(<span class="stringliteral">"x"</span>, int_type);
<a name="l00643"></a>00643 
<a name="l00644"></a>00644 
<a name="l00645"></a>00645         <span class="comment">/* assert x &gt;= "big number" */</span>
<a name="l00646"></a>00646         Term c1         = z3.MkGe(x, big_number);
<a name="l00647"></a>00647         Console.WriteLine(<span class="stringliteral">"assert: x &gt;= 'big number'"</span>);
<a name="l00648"></a>00648         z3.AssertCnstr(c1);
<a name="l00649"></a>00649 
<a name="l00650"></a>00650         <span class="comment">/* create a backtracking point */</span>
<a name="l00651"></a>00651         Console.WriteLine(<span class="stringliteral">"push"</span>);
<a name="l00652"></a>00652         z3.Push();
<a name="l00653"></a>00653 
<a name="l00654"></a>00654         <span class="comment">/* assert x &lt;= 3 */</span>
<a name="l00655"></a>00655         Term c2         = z3.MkLe(x, three);
<a name="l00656"></a>00656         Console.WriteLine(<span class="stringliteral">"assert: x &lt;= 3"</span>);
<a name="l00657"></a>00657         z3.AssertCnstr(c2);
<a name="l00658"></a>00658 
<a name="l00659"></a>00659         <span class="comment">/* context is inconsistent at this point */</span>
<a name="l00660"></a>00660         Model model = null;
<a name="l00661"></a>00661         <a class="code" href="class_test_managed.html#aea02c784e38e060c0154ac307682774" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.False, out model);
<a name="l00662"></a>00662 
<a name="l00663"></a>00663         <span class="comment">/* backtrack: the constraint x &lt;= 3 will be removed, since it was</span>
<a name="l00664"></a>00664 <span class="comment">           asserted after the last z3.Push. */</span>
<a name="l00665"></a>00665         Console.WriteLine(<span class="stringliteral">"pop"</span>);
<a name="l00666"></a>00666         z3.Pop(1);
<a name="l00667"></a>00667 
<a name="l00668"></a>00668         <span class="comment">/* the context is consistent again. */</span>
<a name="l00669"></a>00669         <a class="code" href="class_test_managed.html#e2d6d19afb57eaeb75b366f5c026bee9" title="Similar to check, but uses display_model instead of Z3&amp;#39;s native display method...">check2</a>(<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True);
<a name="l00670"></a>00670 
<a name="l00671"></a>00671         <span class="comment">/* new constraints can be asserted... */</span>
<a name="l00672"></a>00672     
<a name="l00673"></a>00673         <span class="comment">/* create y */</span>
<a name="l00674"></a>00674         Term y          = z3.MkConst(<span class="stringliteral">"y"</span>, int_type);
<a name="l00675"></a>00675     
<a name="l00676"></a>00676         <span class="comment">/* assert y &gt; x */</span>
<a name="l00677"></a>00677         Term c3         = z3.MkGt(y, x);
<a name="l00678"></a>00678         Console.WriteLine(<span class="stringliteral">"assert: y &gt; x"</span>);
<a name="l00679"></a>00679         z3.AssertCnstr(c3);
<a name="l00680"></a>00680 
<a name="l00681"></a>00681         <span class="comment">/* the context is still consistent. */</span>
<a name="l00682"></a>00682         <a class="code" href="class_test_managed.html#aea02c784e38e060c0154ac307682774" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(<a class="code" href="group__mapi.html#g2a6d3c91705945a27b9f264add662179" title="Lifted Booleans.">LBool</a>.True, out model);
<a name="l00683"></a>00683         model.Dispose();
<a name="l00684"></a>00684     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="06e4829a7db00856491745b17a4201b7"></a><!-- doxytag: member="TestManaged::quantifier_example1" ref="06e4829a7db00856491745b17a4201b7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void quantifier_example1           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prove that <code>f(x, y) = f(w, v) implies y = v</code> when <code>f</code> is injective in the second argument. 
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_test_managed.html#0028af55787d40d5cb29c78c67d64021" title="Assert the axiom: function f is injective in the i-th argument.">assert_inj_axiom</a>. </dd></dl>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00692">692</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00693"></a>00693     {        
<a name="l00694"></a>00694         Console.WriteLine(<span class="stringliteral">"quantifier_example1"</span>);
<a name="l00695"></a>00695 
<a name="l00696"></a>00696         <a class="code" href="class_microsoft_1_1_z3_1_1_config.html" title="Configuration.">Config</a> p = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_config.html" title="Configuration.">Config</a>();
<a name="l00697"></a>00697         <span class="comment">// p.SetParamValue("MODEL", "true");</span>
<a name="l00698"></a>00698         <span class="comment">/* If quantified formulas are asserted in a logical context, then</span>
<a name="l00699"></a>00699 <span class="comment">           the model produced by Z3 should be viewed as a potential model.</span>
<a name="l00700"></a>00700 <span class="comment">           </span>
<a name="l00701"></a>00701 <span class="comment">        */</span>
<a name="l00702"></a>00702         <span class="keywordflow">if</span> (this.z3 != null) {
<a name="l00703"></a>00703             this.z3.Dispose();
<a name="l00704"></a>00704         }
<a name="l00705"></a>00705         this.z3 = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_context.html" title="Type safe contexts.">Context</a>(p);
<a name="l00706"></a>00706         p.Dispose();
<a name="l00707"></a>00707 
<a name="l00708"></a>00708         <span class="comment">/* declare function f */</span>
<a name="l00709"></a>00709         Sort int_type = <a class="code" href="class_test_managed.html#ae028ed1ab2b2dfadd311f548b64864e" title="Create an integer type.">mk_int_type</a>();
<a name="l00710"></a>00710         FuncDecl f       = z3.MkFuncDecl(<span class="stringliteral">"f"</span>, <span class="keyword">new</span> Sort[]{ int_type, int_type }, int_type);
<a name="l00711"></a>00711         
<a name="l00712"></a>00712         <span class="comment">/* assert that f is injective in the second argument. */</span>
<a name="l00713"></a>00713         <a class="code" href="class_test_managed.html#0028af55787d40d5cb29c78c67d64021" title="Assert the axiom: function f is injective in the i-th argument.">assert_inj_axiom</a>(f, 1);
<a name="l00714"></a>00714         
<a name="l00715"></a>00715         <span class="comment">/* create x, y, v, w, fxy, fwv */</span>
<a name="l00716"></a>00716         Term x           = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"x"</span>);
<a name="l00717"></a>00717         Term y           = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"y"</span>);
<a name="l00718"></a>00718         Term v           = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"v"</span>);
<a name="l00719"></a>00719         Term w           = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"w"</span>);
<a name="l00720"></a>00720         Term fxy         = mk_binary_app(f, x, y);
<a name="l00721"></a>00721         Term fwv         = mk_binary_app(f, w, v);
<a name="l00722"></a>00722         
<a name="l00723"></a>00723         <span class="comment">/* assert f(x, y) = f(w, v) */</span>
<a name="l00724"></a>00724         Term p1          = z3.MkEq(fxy, fwv);
<a name="l00725"></a>00725         z3.AssertCnstr(p1);
<a name="l00726"></a>00726         
<a name="l00727"></a>00727         <span class="comment">/* prove f(x, y) = f(w, v) implies y = v */</span>
<a name="l00728"></a>00728         Term p2          = z3.MkEq(y, v);
<a name="l00729"></a>00729         Console.WriteLine(<span class="stringliteral">"prove: f(x, y) = f(w, v) implies y = v"</span>);
<a name="l00730"></a>00730         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(p2);
<a name="l00731"></a>00731         
<a name="l00732"></a>00732         <span class="comment">/* disprove f(x, y) = f(w, v) implies x = w */</span>
<a name="l00733"></a>00733         Term p3          = z3.MkEq(x, w);
<a name="l00734"></a>00734         Console.WriteLine(<span class="stringliteral">"disprove: f(x, y) = f(w, v) implies x = w"</span>);
<a name="l00735"></a>00735         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(p3);
<a name="l00736"></a>00736     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="87eedcccb026e4dd953e6466ba622858"></a><!-- doxytag: member="TestManaged::quantifier_example1_abs" ref="87eedcccb026e4dd953e6466ba622858" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void quantifier_example1_abs           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prove that <code>f(x, y) = f(w, v) implies y = v</code> when <code>f</code> is injective in the second argument. 
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_test_managed.html#0028af55787d40d5cb29c78c67d64021" title="Assert the axiom: function f is injective in the i-th argument.">assert_inj_axiom</a>. </dd></dl>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00743">743</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00744"></a>00744     {        
<a name="l00745"></a>00745         Console.WriteLine(<span class="stringliteral">"quantifier_example1_abs"</span>);
<a name="l00746"></a>00746 
<a name="l00747"></a>00747         <a class="code" href="class_microsoft_1_1_z3_1_1_config.html" title="Configuration.">Config</a> p = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_config.html" title="Configuration.">Config</a>();
<a name="l00748"></a>00748         <span class="comment">// p.SetParamValue("MODEL", "true");</span>
<a name="l00749"></a>00749         <span class="comment">/* If quantified formulas are asserted in a logical context, then</span>
<a name="l00750"></a>00750 <span class="comment">           the model produced by Z3 should be viewed as a potential model.</span>
<a name="l00751"></a>00751 <span class="comment">           </span>
<a name="l00752"></a>00752 <span class="comment">        */</span>
<a name="l00753"></a>00753         <span class="keywordflow">if</span> (this.z3 != null) {
<a name="l00754"></a>00754             this.z3.Dispose();
<a name="l00755"></a>00755         }
<a name="l00756"></a>00756         this.z3 = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_context.html" title="Type safe contexts.">Context</a>(p);
<a name="l00757"></a>00757         p.Dispose();
<a name="l00758"></a>00758 
<a name="l00759"></a>00759         <span class="comment">/* declare function f */</span>
<a name="l00760"></a>00760         Sort int_type = <a class="code" href="class_test_managed.html#ae028ed1ab2b2dfadd311f548b64864e" title="Create an integer type.">mk_int_type</a>();
<a name="l00761"></a>00761         FuncDecl f       = z3.MkFuncDecl(<span class="stringliteral">"f"</span>, <span class="keyword">new</span> Sort[]{ int_type, int_type }, int_type);
<a name="l00762"></a>00762         
<a name="l00763"></a>00763         <span class="comment">/* assert that f is injective in the second argument. */</span>
<a name="l00764"></a>00764         <a class="code" href="class_test_managed.html#3894826eee5da91f6f4b964dee051ccd" title="Assert the axiom: function f is injective in the i-th argument.">assert_inj_axiom_abs</a>(f, 1);
<a name="l00765"></a>00765         
<a name="l00766"></a>00766         <span class="comment">/* create x, y, v, w, fxy, fwv */</span>
<a name="l00767"></a>00767         Term x           = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"x"</span>);
<a name="l00768"></a>00768         Term y           = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"y"</span>);
<a name="l00769"></a>00769         Term v           = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"v"</span>);
<a name="l00770"></a>00770         Term w           = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"w"</span>);
<a name="l00771"></a>00771         Term fxy         = mk_binary_app(f, x, y);
<a name="l00772"></a>00772         Term fwv         = mk_binary_app(f, w, v);
<a name="l00773"></a>00773         
<a name="l00774"></a>00774         <span class="comment">/* assert f(x, y) = f(w, v) */</span>
<a name="l00775"></a>00775         Term p1          = z3.MkEq(fxy, fwv);
<a name="l00776"></a>00776         z3.AssertCnstr(p1);
<a name="l00777"></a>00777         
<a name="l00778"></a>00778         <span class="comment">/* prove f(x, y) = f(w, v) implies y = v */</span>
<a name="l00779"></a>00779         Term p2          = z3.MkEq(y, v);
<a name="l00780"></a>00780         Console.WriteLine(<span class="stringliteral">"prove: f(x, y) = f(w, v) implies y = v"</span>);
<a name="l00781"></a>00781         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(p2);
<a name="l00782"></a>00782         
<a name="l00783"></a>00783         <span class="comment">/* disprove f(x, y) = f(w, v) implies x = w */</span>
<a name="l00784"></a>00784         Term p3          = z3.MkEq(x, w);
<a name="l00785"></a>00785         Console.WriteLine(<span class="stringliteral">"disprove: f(x, y) = f(w, v) implies x = w"</span>);
<a name="l00786"></a>00786         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(p3);
<a name="l00787"></a>00787     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b7c1e72848c0e19ca409fc7acd888310"></a><!-- doxytag: member="TestManaged::simple_example" ref="b7c1e72848c0e19ca409fc7acd888310" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void simple_example           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
"Hello world" example: create a Z3 logical context, and delete it. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00435">435</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00436"></a>00436     {        
<a name="l00437"></a>00437         Console.WriteLine(<span class="stringliteral">"simple_example"</span>);
<a name="l00438"></a>00438         <a class="code" href="class_microsoft_1_1_z3_1_1_config.html" title="Configuration.">Config</a> p = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_config.html" title="Configuration.">Config</a>();
<a name="l00439"></a>00439         <a class="code" href="class_microsoft_1_1_z3_1_1_context.html" title="Type safe contexts.">Context</a> z3 = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_context.html" title="Type safe contexts.">Context</a>(p);
<a name="l00440"></a>00440                
<a name="l00441"></a>00441         <span class="comment">/* do something with the context */</span>
<a name="l00442"></a>00442 
<a name="l00443"></a>00443         <span class="comment">/* be kind to dispose manually and not wait for the GC. */</span>
<a name="l00444"></a>00444         z3.Dispose();
<a name="l00445"></a>00445         p.Dispose();
<a name="l00446"></a>00446     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b8546c459ccfe5d1e511d97241623f80"></a><!-- doxytag: member="TestManaged::simplifier_example" ref="b8546c459ccfe5d1e511d97241623f80" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void simplifier_example           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Simplifier example. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01564">1564</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01564"></a>01564                                      {
<a name="l01565"></a>01565         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l01566"></a>01566         Term x = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"x"</span>);
<a name="l01567"></a>01567         Term y = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"y"</span>);
<a name="l01568"></a>01568         Term z = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"z"</span>);
<a name="l01569"></a>01569         Term u = <a class="code" href="class_test_managed.html#23e09c7b3ffed5f174441ef55a15c6b4" title="Create an integer variable using the given name.">mk_int_var</a>(<span class="stringliteral">"u"</span>);
<a name="l01570"></a>01570 
<a name="l01571"></a>01571         Term t1 = z3.MkAdd(x, z3.MkSub(y,z3.MkAdd(x,z)));
<a name="l01572"></a>01572         Term t2 = z3.Simplify(t1);
<a name="l01573"></a>01573         Console.WriteLine(<span class="stringliteral">"{0} -&gt; {1}"</span>, z3.ToString(t1), z3.ToString(t2));
<a name="l01574"></a>01574     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7180a37232a0028dd87058dcf37a1ea2"></a><!-- doxytag: member="TestManaged::tree_example" ref="7180a37232a0028dd87058dcf37a1ea2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tree_example           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a binary tree datatype. 
<p>

<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l01219">1219</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01219"></a>01219                                {
<a name="l01220"></a>01220         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l01221"></a>01221         Sort cell;
<a name="l01222"></a>01222         FuncDecl nil_decl, is_nil_decl, cons_decl, is_cons_decl, car_decl, cdr_decl;
<a name="l01223"></a>01223         Term nil, l1, l2, x, y, u, v, fml, fml1;
<a name="l01224"></a>01224         <span class="keywordtype">string</span>[] head_tail = <span class="keyword">new</span> <span class="keywordtype">string</span>[]{ <span class="stringliteral">"car"</span>, <span class="stringliteral">"cdr"</span> };
<a name="l01225"></a>01225         Sort[] sorts = <span class="keyword">new</span> Sort[]{ null, null};
<a name="l01226"></a>01226         uint[] sort_refs = <span class="keyword">new</span> uint[]{ 0, 0 };
<a name="l01227"></a>01227         <a class="code" href="class_microsoft_1_1_z3_1_1_constructor.html" title="Container for constructor declarations.">Constructor</a> nil_con, cons_con;
<a name="l01228"></a>01228         
<a name="l01229"></a>01229         Console.WriteLine(<span class="stringliteral">"\ntree_example"</span>);
<a name="l01230"></a>01230         
<a name="l01231"></a>01231         nil_con  = z3.MkConstructor(<span class="stringliteral">"nil"</span>, <span class="stringliteral">"is_nil"</span>, null, null, null);
<a name="l01232"></a>01232         cons_con = z3.MkConstructor(<span class="stringliteral">"cons"</span>, <span class="stringliteral">"is_cons"</span>, head_tail,  sorts, sort_refs);
<a name="l01233"></a>01233         <a class="code" href="class_microsoft_1_1_z3_1_1_constructor.html" title="Container for constructor declarations.">Constructor</a>[] constructors = <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_constructor.html" title="Container for constructor declarations.">Constructor</a>[] { nil_con, cons_con };
<a name="l01234"></a>01234     
<a name="l01235"></a>01235         cell = z3.<a class="code" href="class_microsoft_1_1_z3_1_1_context.html#ce7e5666615a724df78e10093a19e70f" title="create datatype sort.">MkDataType</a>(<span class="stringliteral">"cell"</span>, constructors);
<a name="l01236"></a>01236 
<a name="l01237"></a>01237         nil_decl = z3.GetConstructor(nil_con);
<a name="l01238"></a>01238         is_nil_decl = z3.GetTester(nil_con);
<a name="l01239"></a>01239         cons_decl = z3.GetConstructor(cons_con);
<a name="l01240"></a>01240         is_cons_decl = z3.GetTester(cons_con);
<a name="l01241"></a>01241         FuncDecl[] cons_accessors = z3.GetAccessors(cons_con);
<a name="l01242"></a>01242         car_decl = cons_accessors[0];
<a name="l01243"></a>01243         cdr_decl = cons_accessors[1];
<a name="l01244"></a>01244 
<a name="l01245"></a>01245         nil_con.Dispose();
<a name="l01246"></a>01246         cons_con.Dispose();
<a name="l01247"></a>01247                 
<a name="l01248"></a>01248         
<a name="l01249"></a>01249         nil = z3.MkConst(nil_decl);
<a name="l01250"></a>01250         l1 = mk_binary_app(cons_decl, nil, nil);
<a name="l01251"></a>01251         l2 = mk_binary_app(cons_decl, l1, nil);
<a name="l01252"></a>01252         
<a name="l01253"></a>01253         <span class="comment">/* nil != cons(nil, nil) */</span>
<a name="l01254"></a>01254         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkNot(z3.MkEq(nil, l1)), <span class="keyword">true</span>);
<a name="l01255"></a>01255         
<a name="l01256"></a>01256         <span class="comment">/* cons(x,u) = cons(x, v) =&gt; u = v */</span>
<a name="l01257"></a>01257         u = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"u"</span>, cell);
<a name="l01258"></a>01258         v = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"v"</span>, cell);    
<a name="l01259"></a>01259         x = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"x"</span>, cell);
<a name="l01260"></a>01260         y = <a class="code" href="class_test_managed.html#b94596cda6901d5c2b38b0adfe2d2bd4" title="Create a variable using the given name and type.">mk_var</a>(<span class="stringliteral">"y"</span>, cell);    
<a name="l01261"></a>01261         l1 = mk_binary_app(cons_decl, x, u);
<a name="l01262"></a>01262         l2 = mk_binary_app(cons_decl, y, v);
<a name="l01263"></a>01263         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkImplies(z3.MkEq(l1,l2), z3.MkEq(u, v)), <span class="keyword">true</span>);
<a name="l01264"></a>01264         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkImplies(z3.MkEq(l1,l2), z3.MkEq(x, y)), <span class="keyword">true</span>);
<a name="l01265"></a>01265         
<a name="l01266"></a>01266         <span class="comment">/* is_nil(u) or is_cons(u) */</span>
<a name="l01267"></a>01267         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkOr(z3.MkApp(is_nil_decl, u),z3.MkApp(is_cons_decl, u)) , <span class="keyword">true</span>);
<a name="l01268"></a>01268         
<a name="l01269"></a>01269         <span class="comment">/* occurs check u != cons(x,u) */</span>    
<a name="l01270"></a>01270         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(z3.MkNot(z3.MkEq(u, l1)), <span class="keyword">true</span>);
<a name="l01271"></a>01271         
<a name="l01272"></a>01272         <span class="comment">/* destructors: is_cons(u) =&gt; u = cons(car(u),cdr(u)) */</span>
<a name="l01273"></a>01273         fml1 = z3.MkEq(u, mk_binary_app(cons_decl, mk_unary_app(car_decl, u), mk_unary_app(cdr_decl, u)));
<a name="l01274"></a>01274         fml = z3.MkImplies(z3.MkApp(is_cons_decl, u), fml1);
<a name="l01275"></a>01275         Console.WriteLine(<span class="stringliteral">"Formula {0}"</span>, fml);
<a name="l01276"></a>01276         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(fml, <span class="keyword">true</span>);
<a name="l01277"></a>01277         
<a name="l01278"></a>01278         <a class="code" href="class_test_managed.html#c846328304893b21dca4e8470d07030c" title="Prove that the constraints already asserted into the logical context implies the...">prove2</a>(fml1, <span class="keyword">false</span>);
<a name="l01279"></a>01279         
<a name="l01280"></a>01280     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ff725851c53b72ec2b70c7aa5d7430d7"></a><!-- doxytag: member="TestManaged::tuple_example" ref="ff725851c53b72ec2b70c7aa5d7430d7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tuple_example           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tuples. 
<p>
Check that the projection of a tuple returns the corresponding element. 
<p>Definition at line <a class="el" href="test__managed_8cs_source.html#l00882">882</a> of file <a class="el" href="test__managed_8cs_source.html">test_managed.cs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00882"></a>00882                                 {
<a name="l00883"></a>00883         <a class="code" href="class_test_managed.html#951d71e05e11495f2d0c8db5776cb273" title="Create a logical context with model construction enabled.">mk_context</a>();
<a name="l00884"></a>00884         Sort int_type = <a class="code" href="class_test_managed.html#ae028ed1ab2b2dfadd311f548b64864e" title="Create an integer type.">mk_int_type</a>();
<a name="l00885"></a>00885         FuncDecl[] decls = <span class="keyword">new</span> FuncDecl[2];
<a name="l00886"></a>00886         FuncDecl mk_tuple = null;
<a name="l00887"></a>00887         Sort tuple = z3.MkTupleSort
<a name="l00888"></a>00888             (
<a name="l00889"></a>00889              z3.MkSymbol(<span class="stringliteral">"mk_tuple"</span>),                        <span class="comment">// name of tuple constructor</span>
<a name="l00890"></a>00890              <span class="keyword">new</span> <a class="code" href="class_microsoft_1_1_z3_1_1_symbol.html" title="Symbol.">Symbol</a>[]{z3.MkSymbol(<span class="stringliteral">"first"</span>),z3.MkSymbol(<span class="stringliteral">"second"</span>)},    <span class="comment">// names of projection operators</span>
<a name="l00891"></a>00891              <span class="keyword">new</span> Sort[]{int_type,int_type}, <span class="comment">// types of projection operators</span>
<a name="l00892"></a>00892              out mk_tuple,
<a name="l00893"></a>00893              decls                              <span class="comment">// return declarations.</span>
<a name="l00894"></a>00894             );
<a name="l00895"></a>00895         FuncDecl first = decls[0];         <span class="comment">// declarations are for projections</span>
<a name="l00896"></a>00896         FuncDecl second = decls[1];
<a name="l00897"></a>00897         Term x = z3.MkConst(<span class="stringliteral">"x"</span>,int_type);
<a name="l00898"></a>00898         Term y = z3.MkConst(<span class="stringliteral">"y"</span>,int_type);
<a name="l00899"></a>00899         Term n1 = z3.MkApp(mk_tuple, x,y);
<a name="l00900"></a>00900         Term n2 = z3.MkApp(first, n1);
<a name="l00901"></a>00901         Term n3 = z3.MkEq(x, n2);
<a name="l00902"></a>00902         Console.WriteLine(<span class="stringliteral">"Tuple example: {0}"</span>,z3.ToString(n3));
<a name="l00903"></a>00903         <a class="code" href="class_test_managed.html#4d5279b013b163ac9a1fc0d5e69378ff" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(n3);        
<a name="l00904"></a>00904     }
</pre></div>
<p>

</div>
</div><p>
</div>
<div class="tabs"></div>
<address style="text-align: right;">
Last modified Thu Jun 18 11:31:27 2009
</BODY>
</HTML>
