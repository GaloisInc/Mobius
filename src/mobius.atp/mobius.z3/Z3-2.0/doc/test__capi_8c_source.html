 <HTML>
    <HEAD>
    <meta name="author" content="Leonardo de Moura" />
    <meta name="author" content="Nikolaj Bjorner" />
    <meta name="description" content="Z3: SMT solver" />
    <meta name="keywords" content="decision procedure, theorem prover, SMT-LIB, SMTLIB, SMT LIB, SMT Solver, SMTCOMP, SMT-COMP, SAT solver, formal methods, constraint solver, software verification, hardware verification" />
      <TITLE>Z3: SMT solver</TITLE>
      <LINK HREF="z3.css" REL="stylesheet" TYPE="text/css">
      <LINK href="tabs.css" rel="stylesheet" type="text/css">
    </HEAD>
<BODY BGCOLOR="#FFFFFF">
<table class="centered-small">
  <tr>
    <th><a href="index.html"><span>Home</span></a></th>
    <th> &bull; </th>
    <th><a href="documentation.html"><span>Docs</span></a></th>
    <th> &bull; </th>
    <th><a href="download.html"><span>Download</span></a></th>
    <th> &bull; </th>
    <th><a href="mail.html"><span>Mail</span></a></th>
    <th> &bull; </th>
    <th><a href="faq.html"><span>FAQ</span></a></th>
    <th> &bull; </th>
    <th><a href="awards.html"><span>Awards</span></a></th>
    <th> &bull; </th>
    <th><a href="status.html"><span>Status</span></a></th>
    <th> &bull; </th>
    <th><a href="http://research.microsoft.com"><span>MSR</span></a></th>
  </tr>
</table>
<p class="Z3Title"><img align="middle" src="z3.png" alt="Z3" /> An Efficient SMT Solver</p>
<!-- Generated by Doxygen 1.5.9 -->
<h1>test_capi/test_capi.c</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include&lt;stdio.h&gt;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include&lt;stdlib.h&gt;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include&lt;stdarg.h&gt;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include&lt;memory.h&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include&lt;setjmp.h&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include&lt;z3.h&gt;</span>
<a name="l00007"></a>00007 
<a name="l00016"></a>00016 
<a name="l00020"></a><a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace">00020</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* message) 
<a name="l00021"></a>00021 {
<a name="l00022"></a>00022   fprintf(stderr,<span class="stringliteral">"BUG: %s.\n"</span>, message);
<a name="l00023"></a>00023   exit(1);
<a name="l00024"></a>00024 }
<a name="l00025"></a>00025 
<a name="l00029"></a><a class="code" href="group__capi__ex.html#g98a996adc7ad22a8dc75b936e74b73ca">00029</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g98a996adc7ad22a8dc75b936e74b73ca" title="exit if unreachable code was reached.">unreachable</a>() 
<a name="l00030"></a>00030 {
<a name="l00031"></a>00031     <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"unreachable code was reached"</span>);
<a name="l00032"></a>00032 }
<a name="l00033"></a>00033 
<a name="l00037"></a><a class="code" href="group__capi__ex.html#g0f737ceb3f2e9e36496a3c39c7aa2bdf">00037</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g0f737ceb3f2e9e36496a3c39c7aa2bdf" title="Simpler error handler.">error_handler</a>(<a class="code" href="group__capi.html#ga9f9e7b1b5b81381fab96debbaaa638f" title="Z3 error codes (See Z3_get_error_code).">Z3_error_code</a> e) 
<a name="l00038"></a>00038 {
<a name="l00039"></a>00039         printf(<span class="stringliteral">"Error code: %d\n"</span>, e);
<a name="l00040"></a>00040     <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"incorrect use of Z3"</span>);
<a name="l00041"></a>00041 }
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="keyword">static</span> jmp_buf g_catch_buffer;
<a name="l00049"></a><a class="code" href="group__capi__ex.html#gf705d2fe12ca17a0c9fb12e6cc1f13d0">00049</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gf705d2fe12ca17a0c9fb12e6cc1f13d0" title="Low tech exceptions.">throw_z3_error</a>(<a class="code" href="group__capi.html#ga9f9e7b1b5b81381fab96debbaaa638f" title="Z3 error codes (See Z3_get_error_code).">Z3_error_code</a> c) 
<a name="l00050"></a>00050 {
<a name="l00051"></a>00051     longjmp(g_catch_buffer, c);
<a name="l00052"></a>00052 }
<a name="l00053"></a>00053 
<a name="l00061"></a><a class="code" href="group__capi__ex.html#g4e884f4048e2a5937f97bb9667d6bae6">00061</a> Z3_context <a class="code" href="group__capi__ex.html#g4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(Z3_config cfg, <a class="code" href="group__capi.html#g4f0c179e183c96ebdaa639628c6cdbb2" title="Z3 custom error handler (See Z3_set_error_handler).">Z3_error_handler</a> err) 
<a name="l00062"></a>00062 {
<a name="l00063"></a>00063     Z3_context ctx;
<a name="l00064"></a>00064     
<a name="l00065"></a>00065     <a class="code" href="group__capi.html#g001ade87a1671fe77d7e53ed0f4f1ec3" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">"MODEL"</span>, <span class="stringliteral">"true"</span>);
<a name="l00066"></a>00066     ctx = <a class="code" href="group__capi.html#g0bd93cfab4d749dd3e2f2a4416820a46" title="Create a logical context using the given configuration.">Z3_mk_context</a>(cfg);
<a name="l00067"></a>00067 <span class="preprocessor">#ifdef TRACING</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>    <a class="code" href="group__capi.html#gd0a9626f31f25c42ca620a41309e70f7" title="Enable trace messages to a standard error.">Z3_trace_to_stderr</a>(ctx);
<a name="l00069"></a>00069 <span class="preprocessor">#endif</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span>    <a class="code" href="group__capi.html#gdaa12e9990f37b0c1e2bf1dd502dbf39" title="Register a Z3 error handler.">Z3_set_error_handler</a>(ctx, err);
<a name="l00071"></a>00071     
<a name="l00072"></a>00072     <span class="keywordflow">return</span> ctx;
<a name="l00073"></a>00073 }
<a name="l00074"></a>00074 
<a name="l00082"></a><a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489">00082</a> Z3_context <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>() 
<a name="l00083"></a>00083 {
<a name="l00084"></a>00084     Z3_config  cfg;
<a name="l00085"></a>00085     Z3_context ctx;
<a name="l00086"></a>00086     cfg = <a class="code" href="group__capi.html#g7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l00087"></a>00087     ctx = <a class="code" href="group__capi__ex.html#g4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, <a class="code" href="group__capi__ex.html#g0f737ceb3f2e9e36496a3c39c7aa2bdf" title="Simpler error handler.">error_handler</a>);
<a name="l00088"></a>00088     <a class="code" href="group__capi.html#g5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l00089"></a>00089     <span class="keywordflow">return</span> ctx;
<a name="l00090"></a>00090 }
<a name="l00091"></a>00091 
<a name="l00100"></a><a class="code" href="group__capi__ex.html#gf861446b22ab36b8ffe20a4aba630075">00100</a> Z3_context <a class="code" href="group__capi__ex.html#gf861446b22ab36b8ffe20a4aba630075" title="Create a logical context.">mk_proof_context</a>() {
<a name="l00101"></a>00101     Z3_config cfg = <a class="code" href="group__capi.html#g7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l00102"></a>00102     Z3_context ctx;
<a name="l00103"></a>00103     <a class="code" href="group__capi.html#g001ade87a1671fe77d7e53ed0f4f1ec3" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">"PROOF_MODE"</span>, <span class="stringliteral">"2"</span>);
<a name="l00104"></a>00104     ctx = <a class="code" href="group__capi__ex.html#g4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg,<a class="code" href="group__capi__ex.html#gf705d2fe12ca17a0c9fb12e6cc1f13d0" title="Low tech exceptions.">throw_z3_error</a>);
<a name="l00105"></a>00105     <a class="code" href="group__capi.html#g5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l00106"></a>00106     <span class="keywordflow">return</span> ctx;
<a name="l00107"></a>00107 }
<a name="l00108"></a>00108 
<a name="l00112"></a><a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8">00112</a> Z3_ast <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(Z3_context ctx, <span class="keyword">const</span> <span class="keywordtype">char</span> * name, Z3_sort ty) 
<a name="l00113"></a>00113 {
<a name="l00114"></a>00114     Z3_symbol   s  = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, name);
<a name="l00115"></a>00115     <span class="keywordflow">return</span> <a class="code" href="group__capi.html#g093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, s, ty);
<a name="l00116"></a>00116 }
<a name="l00117"></a>00117 
<a name="l00121"></a><a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae">00121</a> Z3_ast <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(Z3_context ctx, <span class="keyword">const</span> <span class="keywordtype">char</span> * name) 
<a name="l00122"></a>00122 {
<a name="l00123"></a>00123     Z3_sort ty = <a class="code" href="group__capi.html#gcdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx);
<a name="l00124"></a>00124     <span class="keywordflow">return</span> <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, name, ty);
<a name="l00125"></a>00125 }
<a name="l00126"></a>00126 
<a name="l00130"></a><a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee">00130</a> Z3_ast <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(Z3_context ctx, <span class="keyword">const</span> <span class="keywordtype">char</span> * name) 
<a name="l00131"></a>00131 {
<a name="l00132"></a>00132     Z3_sort ty = <a class="code" href="group__capi.html#g6cd426ab5748653b77d389fd3eac1015" title="Create an integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l00133"></a>00133     <span class="keywordflow">return</span> <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, name, ty);
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00139"></a><a class="code" href="group__capi__ex.html#gc55b5bc7b387575d70b84ae5f92bc7fc">00139</a> Z3_ast <a class="code" href="group__capi__ex.html#gc55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(Z3_context ctx, <span class="keywordtype">int</span> v) 
<a name="l00140"></a>00140 {
<a name="l00141"></a>00141     Z3_sort ty = <a class="code" href="group__capi.html#g6cd426ab5748653b77d389fd3eac1015" title="Create an integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l00142"></a>00142     <span class="keywordflow">return</span> <a class="code" href="group__capi.html#g8779204998136569c3e166c34cfd3e2c" title="Create a numeral of a given sort.">Z3_mk_int</a>(ctx, v, ty);
<a name="l00143"></a>00143 }
<a name="l00144"></a>00144 
<a name="l00148"></a><a class="code" href="group__capi__ex.html#g440884a8a38a8b2201e4713862358aae">00148</a> Z3_ast <a class="code" href="group__capi__ex.html#g440884a8a38a8b2201e4713862358aae" title="Create a real variable using the given name.">mk_real_var</a>(Z3_context ctx, <span class="keyword">const</span> <span class="keywordtype">char</span> * name) 
<a name="l00149"></a>00149 {
<a name="l00150"></a>00150     Z3_sort ty = <a class="code" href="group__capi.html#g40ef93b9738485caed6dc84631c3c1a0" title="Create a real type.">Z3_mk_real_sort</a>(ctx);
<a name="l00151"></a>00151     <span class="keywordflow">return</span> <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, name, ty);
<a name="l00152"></a>00152 }
<a name="l00153"></a>00153 
<a name="l00157"></a><a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706">00157</a> Z3_ast <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(Z3_context ctx, Z3_func_decl f, Z3_ast x) 
<a name="l00158"></a>00158 {
<a name="l00159"></a>00159     Z3_ast args[1] = {x};
<a name="l00160"></a>00160     <span class="keywordflow">return</span> <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, 1, args);
<a name="l00161"></a>00161 }
<a name="l00162"></a>00162 
<a name="l00166"></a><a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c">00166</a> Z3_ast <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(Z3_context ctx, Z3_func_decl f, Z3_ast x, Z3_ast y) 
<a name="l00167"></a>00167 {
<a name="l00168"></a>00168     Z3_ast args[2] = {x, y};
<a name="l00169"></a>00169     <span class="keywordflow">return</span> <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, 2, args);
<a name="l00170"></a>00170 }
<a name="l00171"></a>00171 
<a name="l00176"></a><a class="code" href="group__capi__ex.html#g4ac4375063bd700cce15158ba6e761be">00176</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(Z3_context ctx, <a class="code" href="group__capi.html#g6c2de6ea89b244e37c3ffb17a9ea2a89" title="Lifted Boolean type: false, undefined, true.">Z3_lbool</a> expected_result)
<a name="l00177"></a>00177 {
<a name="l00178"></a>00178     Z3_model m      = 0;
<a name="l00179"></a>00179     <a class="code" href="group__capi.html#g6c2de6ea89b244e37c3ffb17a9ea2a89" title="Lifted Boolean type: false, undefined, true.">Z3_lbool</a> result = <a class="code" href="group__capi.html#gff310fef80ac8a82d0a51417e073ec0a" title="Check whether the given logical context is consistent or not.">Z3_check_and_get_model</a>(ctx, &amp;m);
<a name="l00180"></a>00180     <span class="keywordflow">switch</span> (result) {
<a name="l00181"></a>00181     <span class="keywordflow">case</span> Z3_L_FALSE:
<a name="l00182"></a>00182         printf(<span class="stringliteral">"unsat\n"</span>);
<a name="l00183"></a>00183         <span class="keywordflow">break</span>;
<a name="l00184"></a>00184     <span class="keywordflow">case</span> Z3_L_UNDEF:
<a name="l00185"></a>00185         printf(<span class="stringliteral">"unknown\n"</span>);
<a name="l00186"></a>00186         printf(<span class="stringliteral">"potential model:\n%s\n"</span>, <a class="code" href="group__capi.html#gf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>(ctx, m));
<a name="l00187"></a>00187         <span class="keywordflow">break</span>;
<a name="l00188"></a>00188     <span class="keywordflow">case</span> Z3_L_TRUE:
<a name="l00189"></a>00189         printf(<span class="stringliteral">"sat\n%s\n"</span>, <a class="code" href="group__capi.html#gf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>(ctx, m));
<a name="l00190"></a>00190         <span class="keywordflow">break</span>;
<a name="l00191"></a>00191     }
<a name="l00192"></a>00192     <span class="keywordflow">if</span> (m) {
<a name="l00193"></a>00193         <a class="code" href="group__capi.html#g0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l00194"></a>00194     }
<a name="l00195"></a>00195     <span class="keywordflow">if</span> (result != expected_result) {
<a name="l00196"></a>00196         <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"unexpected result"</span>);
<a name="l00197"></a>00197     }
<a name="l00198"></a>00198 }
<a name="l00199"></a>00199 
<a name="l00210"></a><a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b">00210</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(Z3_context ctx, Z3_ast f, <a class="code" href="group__capi.html#g3a65ded0ada3ee285865759a21140eeb" title="Z3 Boolean type. It is just an alias for int.">Z3_bool</a> is_valid)
<a name="l00211"></a>00211 {
<a name="l00212"></a>00212     Z3_model m;
<a name="l00213"></a>00213     Z3_ast   not_f;
<a name="l00214"></a>00214 
<a name="l00215"></a>00215     <span class="comment">/* save the current state of the context */</span>
<a name="l00216"></a>00216     <a class="code" href="group__capi.html#gd651ad68c7a060cbb5616349233cb10f" title="Create a backtracking point.">Z3_push</a>(ctx);
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     not_f = <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, f);
<a name="l00219"></a>00219     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, not_f);
<a name="l00220"></a>00220     
<a name="l00221"></a>00221     m = 0;
<a name="l00222"></a>00222     
<a name="l00223"></a>00223     <span class="keywordflow">switch</span> (<a class="code" href="group__capi.html#gff310fef80ac8a82d0a51417e073ec0a" title="Check whether the given logical context is consistent or not.">Z3_check_and_get_model</a>(ctx, &amp;m)) {
<a name="l00224"></a>00224     <span class="keywordflow">case</span> Z3_L_FALSE:
<a name="l00225"></a>00225         <span class="comment">/* proved */</span>
<a name="l00226"></a>00226         printf(<span class="stringliteral">"valid\n"</span>);
<a name="l00227"></a>00227         <span class="keywordflow">if</span> (!is_valid) {
<a name="l00228"></a>00228             <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"unexpected result"</span>);
<a name="l00229"></a>00229         }
<a name="l00230"></a>00230         <span class="keywordflow">break</span>;
<a name="l00231"></a>00231     <span class="keywordflow">case</span> Z3_L_UNDEF:
<a name="l00232"></a>00232         <span class="comment">/* Z3 failed to prove/disprove f. */</span>
<a name="l00233"></a>00233         printf(<span class="stringliteral">"unknown\n"</span>);
<a name="l00234"></a>00234         <span class="keywordflow">if</span> (m != 0) {
<a name="l00235"></a>00235             <span class="comment">/* m should be viewed as a potential counterexample. */</span>
<a name="l00236"></a>00236             printf(<span class="stringliteral">"potential counterexample:\n%s\n"</span>, <a class="code" href="group__capi.html#gf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>(ctx, m));
<a name="l00237"></a>00237         }
<a name="l00238"></a>00238         <span class="keywordflow">if</span> (is_valid) {
<a name="l00239"></a>00239             <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"unexpected result"</span>);
<a name="l00240"></a>00240         }
<a name="l00241"></a>00241         <span class="keywordflow">break</span>;
<a name="l00242"></a>00242     <span class="keywordflow">case</span> Z3_L_TRUE:
<a name="l00243"></a>00243         <span class="comment">/* disproved */</span>
<a name="l00244"></a>00244         printf(<span class="stringliteral">"invalid\n"</span>);
<a name="l00245"></a>00245         <span class="keywordflow">if</span> (m) {
<a name="l00246"></a>00246             <span class="comment">/* the model returned by Z3 is a counterexample */</span>
<a name="l00247"></a>00247             printf(<span class="stringliteral">"counterexample:\n%s\n"</span>, <a class="code" href="group__capi.html#gf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>(ctx, m));
<a name="l00248"></a>00248         }
<a name="l00249"></a>00249         <span class="keywordflow">if</span> (is_valid) {
<a name="l00250"></a>00250             <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"unexpected result"</span>);
<a name="l00251"></a>00251         }
<a name="l00252"></a>00252         <span class="keywordflow">break</span>;
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254 
<a name="l00255"></a>00255     <span class="keywordflow">if</span> (m) {
<a name="l00256"></a>00256         <a class="code" href="group__capi.html#g0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l00257"></a>00257     }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259     <span class="comment">/* restore context */</span>
<a name="l00260"></a>00260     <a class="code" href="group__capi.html#gb2b3a542006c86c8d86dc37872f88b61" title="Backtrack.">Z3_pop</a>(ctx, 1);
<a name="l00261"></a>00261 }
<a name="l00262"></a>00262 
<a name="l00273"></a><a class="code" href="group__capi__ex.html#gca2791e8333199e32873def86c8e465a">00273</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gca2791e8333199e32873def86c8e465a" title="Assert the axiom: function f is injective in the i-th argument.">assert_inj_axiom</a>(Z3_context ctx, Z3_func_decl f, <span class="keywordtype">unsigned</span> i) 
<a name="l00274"></a>00274 {
<a name="l00275"></a>00275     <span class="keywordtype">unsigned</span> sz, j;
<a name="l00276"></a>00276     Z3_sort finv_domain, finv_range;
<a name="l00277"></a>00277     Z3_func_decl finv;
<a name="l00278"></a>00278     Z3_sort * types; <span class="comment">/* types of the quantified variables */</span>
<a name="l00279"></a>00279     Z3_symbol *   names; <span class="comment">/* names of the quantified variables */</span>
<a name="l00280"></a>00280     Z3_ast * xs;         <span class="comment">/* arguments for the application f(x_0, ..., x_i, ..., x_{n-1}) */</span>
<a name="l00281"></a>00281     Z3_ast   x_i, fxs, finv_fxs, eq;
<a name="l00282"></a>00282     Z3_pattern p;
<a name="l00283"></a>00283     Z3_ast   q;
<a name="l00284"></a>00284     sz = <a class="code" href="group__capi.html#g3a2c7d27579336a03adc587cec833bf9" title="Return the number of parameters of the given declaration.">Z3_get_domain_size</a>(ctx, f);
<a name="l00285"></a>00285 
<a name="l00286"></a>00286     <span class="keywordflow">if</span> (i &gt;= sz) {
<a name="l00287"></a>00287         <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"failed to create inj axiom"</span>);
<a name="l00288"></a>00288     }
<a name="l00289"></a>00289     
<a name="l00290"></a>00290     <span class="comment">/* declare the i-th inverse of f: finv */</span>
<a name="l00291"></a>00291     finv_domain = <a class="code" href="group__capi.html#gf996fe33bd42bea8fa8ddf44fcf0bd77" title="Return the range of the given declaration.">Z3_get_range</a>(ctx, f);
<a name="l00292"></a>00292     finv_range  = <a class="code" href="group__capi.html#ga648c7b589597e76cd5ffcfb2c917b24" title="Return the sort of the i-th parameter of the given function declaration.">Z3_get_domain</a>(ctx, f, i);
<a name="l00293"></a>00293     finv        = <a class="code" href="group__capi.html#gee44886cfdb2ae492e72b99966f29afe" title="Declare a fresh constant or function.">Z3_mk_fresh_func_decl</a>(ctx, <span class="stringliteral">"inv"</span>, 1, &amp;finv_domain, finv_range);
<a name="l00294"></a>00294 
<a name="l00295"></a>00295     <span class="comment">/* allocate temporary arrays */</span>
<a name="l00296"></a>00296     types       = (Z3_sort *) malloc(<span class="keyword">sizeof</span>(Z3_sort) * sz);
<a name="l00297"></a>00297     names       = (Z3_symbol *) malloc(<span class="keyword">sizeof</span>(Z3_symbol) * sz);
<a name="l00298"></a>00298     xs          = (Z3_ast *) malloc(<span class="keyword">sizeof</span>(Z3_ast) * sz);
<a name="l00299"></a>00299     
<a name="l00300"></a>00300     <span class="comment">/* fill types, names and xs */</span>
<a name="l00301"></a>00301     <span class="keywordflow">for</span> (j = 0; j &lt; sz; j++) { types[j] = <a class="code" href="group__capi.html#ga648c7b589597e76cd5ffcfb2c917b24" title="Return the sort of the i-th parameter of the given function declaration.">Z3_get_domain</a>(ctx, f, j); };
<a name="l00302"></a>00302     <span class="keywordflow">for</span> (j = 0; j &lt; sz; j++) { names[j] = <a class="code" href="group__capi.html#g3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx, j); };
<a name="l00303"></a>00303     <span class="keywordflow">for</span> (j = 0; j &lt; sz; j++) { xs[j]    = <a class="code" href="group__capi.html#g1d4da8849fca699b345322f8ee1fa31e" title="Create a bound variable.">Z3_mk_bound</a>(ctx, j, types[j]); };
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     x_i = xs[i];
<a name="l00306"></a>00306 
<a name="l00307"></a>00307     <span class="comment">/* create f(x_0, ..., x_i, ..., x_{n-1}) */</span> 
<a name="l00308"></a>00308     fxs         = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, sz, xs);
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <span class="comment">/* create f_inv(f(x_0, ..., x_i, ..., x_{n-1})) */</span>
<a name="l00311"></a>00311     finv_fxs    = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, finv, fxs);
<a name="l00312"></a>00312 
<a name="l00313"></a>00313     <span class="comment">/* create finv(f(x_0, ..., x_i, ..., x_{n-1})) = x_i */</span>
<a name="l00314"></a>00314     eq          = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, finv_fxs, x_i);
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <span class="comment">/* use f(x_0, ..., x_i, ..., x_{n-1}) as the pattern for the quantifier */</span>
<a name="l00317"></a>00317     p           = <a class="code" href="group__capi.html#gf15c95b66dc3b0af735774ee401a6f85" title="Create a pattern for quantifier instantiation.">Z3_mk_pattern</a>(ctx, 1, &amp;fxs);
<a name="l00318"></a>00318     printf(<span class="stringliteral">"pattern: %s\n"</span>, Z3_pattern_to_string(ctx, p));
<a name="l00319"></a>00319     printf(<span class="stringliteral">"\n"</span>);
<a name="l00320"></a>00320 
<a name="l00321"></a>00321     <span class="comment">/* create &amp; assert quantifier */</span>
<a name="l00322"></a>00322     q           = <a class="code" href="group__capi.html#g7e975b7d7ac96de1db73d8f71166c663" title="Create a forall formula.">Z3_mk_forall</a>(ctx, 
<a name="l00323"></a>00323                                  0, <span class="comment">/* using default weight */</span>
<a name="l00324"></a>00324                                  1, <span class="comment">/* number of patterns */</span>
<a name="l00325"></a>00325                                  &amp;p, <span class="comment">/* address of the "array" of patterns */</span>
<a name="l00326"></a>00326                                  sz, <span class="comment">/* number of quantified variables */</span>
<a name="l00327"></a>00327                                  types, 
<a name="l00328"></a>00328                                  names,
<a name="l00329"></a>00329                                  eq);
<a name="l00330"></a>00330     printf(<span class="stringliteral">"assert axiom:\n%s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, q));
<a name="l00331"></a>00331     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, q);
<a name="l00332"></a>00332 
<a name="l00333"></a>00333     <span class="comment">/* free temporary arrays */</span>
<a name="l00334"></a>00334     free(types);
<a name="l00335"></a>00335     free(names);
<a name="l00336"></a>00336     free(xs);
<a name="l00337"></a>00337 }
<a name="l00338"></a>00338 
<a name="l00344"></a><a class="code" href="group__capi__ex.html#g7cc571ff97eb60e06c6a6aff9b6c8c69">00344</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g7cc571ff97eb60e06c6a6aff9b6c8c69" title="Assert the axiom: function f is commutative.">assert_comm_axiom</a>(Z3_context ctx, Z3_func_decl f) 
<a name="l00345"></a>00345 {
<a name="l00346"></a>00346     Z3_sort t;
<a name="l00347"></a>00347     Z3_symbol f_name, t_name;
<a name="l00348"></a>00348     Z3_ast q;
<a name="l00349"></a>00349 
<a name="l00350"></a>00350     t = <a class="code" href="group__capi.html#gf996fe33bd42bea8fa8ddf44fcf0bd77" title="Return the range of the given declaration.">Z3_get_range</a>(ctx, f);
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#g3a2c7d27579336a03adc587cec833bf9" title="Return the number of parameters of the given declaration.">Z3_get_domain_size</a>(ctx, f) != 2 ||
<a name="l00353"></a>00353         <a class="code" href="group__capi.html#ga648c7b589597e76cd5ffcfb2c917b24" title="Return the sort of the i-th parameter of the given function declaration.">Z3_get_domain</a>(ctx, f, 0) != t ||
<a name="l00354"></a>00354         <a class="code" href="group__capi.html#ga648c7b589597e76cd5ffcfb2c917b24" title="Return the sort of the i-th parameter of the given function declaration.">Z3_get_domain</a>(ctx, f, 1) != t) {
<a name="l00355"></a>00355         <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"function must be binary, and argument types must be equal to return type"</span>);
<a name="l00356"></a>00356     } 
<a name="l00357"></a>00357     
<a name="l00358"></a>00358     <span class="comment">/* Inside the parser, function f will be referenced using the symbol 'f'. */</span>
<a name="l00359"></a>00359     f_name = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"f"</span>);
<a name="l00360"></a>00360     
<a name="l00361"></a>00361     <span class="comment">/* Inside the parser, type t will be referenced using the symbol 'T'. */</span>
<a name="l00362"></a>00362     t_name = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"T"</span>);
<a name="l00363"></a>00363 
<a name="l00364"></a>00364     <a class="code" href="group__capi.html#g17a2c6d55bf77cbdcf202044b31a97d5" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l00365"></a>00365                            <span class="stringliteral">"(benchmark comm :formula (forall (x T) (y T) (= (f x y) (f y x))))"</span>,
<a name="l00366"></a>00366                            1, &amp;t_name, &amp;t,
<a name="l00367"></a>00367                            1, &amp;f_name, &amp;f);
<a name="l00368"></a>00368     q = <a class="code" href="group__capi.html#g0ac42d0fa1874e4e773c89a56066f242" title="Return the i-th formula parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_formula</a>(ctx, 0);
<a name="l00369"></a>00369     printf(<span class="stringliteral">"assert axiom:\n%s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, q));
<a name="l00370"></a>00370     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, q);
<a name="l00371"></a>00371 }
<a name="l00372"></a>00372 
<a name="l00382"></a><a class="code" href="group__capi__ex.html#g7e3e44186510e02e3fa143689fef6fd3">00382</a> Z3_ast <a class="code" href="group__capi__ex.html#g7e3e44186510e02e3fa143689fef6fd3" title="Z3 does not support explicitly tuple updates. They can be easily implemented as macros...">mk_tuple_update</a>(Z3_context c, Z3_ast t, <span class="keywordtype">unsigned</span> i, Z3_ast new_val) 
<a name="l00383"></a>00383 {
<a name="l00384"></a>00384     Z3_sort         ty;
<a name="l00385"></a>00385     Z3_func_decl   mk_tuple_decl;
<a name="l00386"></a>00386     <span class="keywordtype">unsigned</span>            num_fields, j;
<a name="l00387"></a>00387     Z3_ast *            new_fields;
<a name="l00388"></a>00388     Z3_ast              result;
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     ty = <a class="code" href="group__capi.html#g0a4dac7e9397ff067136354cd33cb933" title="Return the sort of an AST node.">Z3_get_sort</a>(c, t);
<a name="l00391"></a>00391 
<a name="l00392"></a>00392     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#g6d694951de4c7f115ed472eb32ef963c" title="Return the sort kind (e.g., array, tuple, int, bool, etc).">Z3_get_sort_kind</a>(c, ty) != Z3_DATATYPE_SORT) {
<a name="l00393"></a>00393         <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"argument must be a tuple"</span>);
<a name="l00394"></a>00394     }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396     num_fields = <a class="code" href="group__capi.html#gff3ba6ad93295a4b4d8a8d3c06b7aa72" title="Return the number of fields of the given tuple sort.">Z3_get_tuple_sort_num_fields</a>(c, ty);
<a name="l00397"></a>00397     
<a name="l00398"></a>00398     <span class="keywordflow">if</span> (i &gt;= num_fields) {
<a name="l00399"></a>00399         <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"invalid tuple update, index is too big"</span>);
<a name="l00400"></a>00400     }
<a name="l00401"></a>00401     
<a name="l00402"></a>00402     new_fields = (Z3_ast*) malloc(<span class="keyword">sizeof</span>(Z3_ast) * num_fields);
<a name="l00403"></a>00403     <span class="keywordflow">for</span> (j = 0; j &lt; num_fields; j++) {
<a name="l00404"></a>00404         <span class="keywordflow">if</span> (i == j) {
<a name="l00405"></a>00405             <span class="comment">/* use new_val at position i */</span>
<a name="l00406"></a>00406             new_fields[j] = new_val;
<a name="l00407"></a>00407         }
<a name="l00408"></a>00408         <span class="keywordflow">else</span> {
<a name="l00409"></a>00409             <span class="comment">/* use field j of t */</span>
<a name="l00410"></a>00410             Z3_func_decl proj_decl = <a class="code" href="group__capi.html#ge17ed9db93c03f4f60a336c95fb60c44" title="Return the i-th field declaration (i.e., projection function declaration) of the...">Z3_get_tuple_sort_field_decl</a>(c, ty, j);
<a name="l00411"></a>00411             new_fields[j] = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(c, proj_decl, t);
<a name="l00412"></a>00412         }
<a name="l00413"></a>00413     }
<a name="l00414"></a>00414     mk_tuple_decl = <a class="code" href="group__capi.html#gd16a0317b4ed90ccb4037f7e624bfd88" title="Return the constructor declaration of the given tuple sort.">Z3_get_tuple_sort_mk_decl</a>(c, ty);
<a name="l00415"></a>00415     result = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(c, mk_tuple_decl, num_fields, new_fields);
<a name="l00416"></a>00416     free(new_fields);
<a name="l00417"></a>00417     <span class="keywordflow">return</span> result;
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00423"></a><a class="code" href="group__capi__ex.html#g387b0f228ff147764beaae9e07ee9d59">00423</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g387b0f228ff147764beaae9e07ee9d59" title="Display a symbol in the given output stream.">display_symbol</a>(Z3_context c, FILE * out, Z3_symbol s) 
<a name="l00424"></a>00424 {
<a name="l00425"></a>00425     <span class="keywordflow">switch</span> (<a class="code" href="group__capi.html#g67ffc0773e8d329ddbab7bd7f751ecd2" title="Return Z3_INT_SYMBOL if the symbol was constructed using Z3_mk_int_symbol, and Z3_STRING_SYMBOL...">Z3_get_symbol_kind</a>(c, s)) {
<a name="l00426"></a>00426     <span class="keywordflow">case</span> Z3_INT_SYMBOL:
<a name="l00427"></a>00427         fprintf(out, <span class="stringliteral">"#%d"</span>, <a class="code" href="group__capi.html#g36fbbd2c1d0cb41c8c7784f60a84a488" title="Return the symbol int value.">Z3_get_symbol_int</a>(c, s));
<a name="l00428"></a>00428         <span class="keywordflow">break</span>;
<a name="l00429"></a>00429     <span class="keywordflow">case</span> Z3_STRING_SYMBOL:
<a name="l00430"></a>00430         fprintf(out, <a class="code" href="group__capi.html#gf1683d9464f377e5089ce6ebf2a9bd31" title="Return the symbol name.">Z3_get_symbol_string</a>(c, s));
<a name="l00431"></a>00431         <span class="keywordflow">break</span>;
<a name="l00432"></a>00432     <span class="keywordflow">default</span>:
<a name="l00433"></a>00433         <a class="code" href="group__capi__ex.html#g98a996adc7ad22a8dc75b936e74b73ca" title="exit if unreachable code was reached.">unreachable</a>();
<a name="l00434"></a>00434     }
<a name="l00435"></a>00435 }
<a name="l00436"></a>00436 
<a name="l00440"></a><a class="code" href="group__capi__ex.html#g8a9e74a0c3915e48a40a311af80bf369">00440</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(Z3_context c, FILE * out, Z3_sort ty) 
<a name="l00441"></a>00441 {
<a name="l00442"></a>00442     <span class="keywordflow">switch</span> (<a class="code" href="group__capi.html#g6d694951de4c7f115ed472eb32ef963c" title="Return the sort kind (e.g., array, tuple, int, bool, etc).">Z3_get_sort_kind</a>(c, ty)) {
<a name="l00443"></a>00443     <span class="keywordflow">case</span> Z3_UNINTERPRETED_SORT:
<a name="l00444"></a>00444         <a class="code" href="group__capi__ex.html#g387b0f228ff147764beaae9e07ee9d59" title="Display a symbol in the given output stream.">display_symbol</a>(c, out, <a class="code" href="group__capi.html#gefff01e612e5ebb1117af870ee3a9237" title="Return the sort name as a symbol.">Z3_get_sort_name</a>(c, ty));
<a name="l00445"></a>00445         <span class="keywordflow">break</span>;
<a name="l00446"></a>00446     <span class="keywordflow">case</span> Z3_BOOL_SORT:
<a name="l00447"></a>00447         fprintf(out, <span class="stringliteral">"bool"</span>);
<a name="l00448"></a>00448         <span class="keywordflow">break</span>;
<a name="l00449"></a>00449     <span class="keywordflow">case</span> Z3_INT_SORT:
<a name="l00450"></a>00450         fprintf(out, <span class="stringliteral">"int"</span>);
<a name="l00451"></a>00451         <span class="keywordflow">break</span>;
<a name="l00452"></a>00452     <span class="keywordflow">case</span> Z3_REAL_SORT:
<a name="l00453"></a>00453         fprintf(out, <span class="stringliteral">"real"</span>);
<a name="l00454"></a>00454         <span class="keywordflow">break</span>;
<a name="l00455"></a>00455     <span class="keywordflow">case</span> Z3_BV_SORT:
<a name="l00456"></a>00456         fprintf(out, <span class="stringliteral">"bv%d"</span>, <a class="code" href="group__capi.html#g8fc3550edace7bc046e16d1f96ddb419" title="Return the size of the given bit-vector sort.">Z3_get_bv_sort_size</a>(c, ty));
<a name="l00457"></a>00457         <span class="keywordflow">break</span>;
<a name="l00458"></a>00458     <span class="keywordflow">case</span> Z3_ARRAY_SORT: 
<a name="l00459"></a>00459         fprintf(out, <span class="stringliteral">"["</span>);
<a name="l00460"></a>00460         <a class="code" href="group__capi__ex.html#g8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(c, out, <a class="code" href="group__capi.html#g9753605ed27131dee29abcfb21e1dc9a" title="Return the domain of the given array sort.">Z3_get_array_sort_domain</a>(c, ty));
<a name="l00461"></a>00461         fprintf(out, <span class="stringliteral">"-&gt;"</span>);
<a name="l00462"></a>00462         <a class="code" href="group__capi__ex.html#g8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(c, out, <a class="code" href="group__capi.html#g72832f8215d6232ce1fef9774d1bf192" title="Return the range of the given array sort.">Z3_get_array_sort_range</a>(c, ty));
<a name="l00463"></a>00463         fprintf(out, <span class="stringliteral">"]"</span>);
<a name="l00464"></a>00464         <span class="keywordflow">break</span>;
<a name="l00465"></a>00465     <span class="keywordflow">case</span> Z3_DATATYPE_SORT:
<a name="l00466"></a>00466                 <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#ge9ab82612fd84f5ce7991ade7d7ad920" title="Return number of constructors for datatype.">Z3_get_datatype_sort_num_constructors</a>(c, ty) != 1) 
<a name="l00467"></a>00467                 {
<a name="l00468"></a>00468                         fprintf(out, <span class="stringliteral">"%s"</span>, Z3_sort_to_string(c,ty));
<a name="l00469"></a>00469                         <span class="keywordflow">break</span>;
<a name="l00470"></a>00470                 }
<a name="l00471"></a>00471                 {
<a name="l00472"></a>00472         <span class="keywordtype">unsigned</span> num_fields = <a class="code" href="group__capi.html#gff3ba6ad93295a4b4d8a8d3c06b7aa72" title="Return the number of fields of the given tuple sort.">Z3_get_tuple_sort_num_fields</a>(c, ty);
<a name="l00473"></a>00473         <span class="keywordtype">unsigned</span> i;
<a name="l00474"></a>00474         fprintf(out, <span class="stringliteral">"("</span>);
<a name="l00475"></a>00475         <span class="keywordflow">for</span> (i = 0; i &lt; num_fields; i++) {
<a name="l00476"></a>00476             Z3_func_decl field = <a class="code" href="group__capi.html#ge17ed9db93c03f4f60a336c95fb60c44" title="Return the i-th field declaration (i.e., projection function declaration) of the...">Z3_get_tuple_sort_field_decl</a>(c, ty, i);
<a name="l00477"></a>00477             <span class="keywordflow">if</span> (i &gt; 0) {
<a name="l00478"></a>00478                 fprintf(out, <span class="stringliteral">", "</span>);
<a name="l00479"></a>00479             }
<a name="l00480"></a>00480             <a class="code" href="group__capi__ex.html#g8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(c, out, <a class="code" href="group__capi.html#gf996fe33bd42bea8fa8ddf44fcf0bd77" title="Return the range of the given declaration.">Z3_get_range</a>(c, field));
<a name="l00481"></a>00481         }
<a name="l00482"></a>00482         fprintf(out, <span class="stringliteral">")"</span>);
<a name="l00483"></a>00483         <span class="keywordflow">break</span>;
<a name="l00484"></a>00484     }
<a name="l00485"></a>00485     <span class="keywordflow">default</span>:
<a name="l00486"></a>00486         fprintf(out, <span class="stringliteral">"unknown["</span>);
<a name="l00487"></a>00487         <a class="code" href="group__capi__ex.html#g387b0f228ff147764beaae9e07ee9d59" title="Display a symbol in the given output stream.">display_symbol</a>(c, out, <a class="code" href="group__capi.html#gefff01e612e5ebb1117af870ee3a9237" title="Return the sort name as a symbol.">Z3_get_sort_name</a>(c, ty));
<a name="l00488"></a>00488         fprintf(out, <span class="stringliteral">"]"</span>);
<a name="l00489"></a>00489         <span class="keywordflow">break</span>;
<a name="l00490"></a>00490     }
<a name="l00491"></a>00491 }
<a name="l00492"></a>00492 
<a name="l00498"></a><a class="code" href="group__capi__ex.html#g807b5fe0e26acdec09e52a77318208d0">00498</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(Z3_context c, FILE * out, Z3_ast v) 
<a name="l00499"></a>00499 {
<a name="l00500"></a>00500     <span class="keywordflow">switch</span> (<a class="code" href="group__capi.html#g4c43608feea4cae363ef9c520c239a5c" title="Return the kind of the given AST.">Z3_get_ast_kind</a>(c, v)) {
<a name="l00501"></a>00501     <span class="keywordflow">case</span> Z3_NUMERAL_AST: {
<a name="l00502"></a>00502         Z3_sort t;
<a name="l00503"></a>00503         fprintf(out, <a class="code" href="group__capi.html#g94617ef18fa7157e1a3f85db625d2f4b" title="Return numeral value, as a string of a numeric constant term.">Z3_get_numeral_string</a>(c, v));
<a name="l00504"></a>00504         t = <a class="code" href="group__capi.html#g0a4dac7e9397ff067136354cd33cb933" title="Return the sort of an AST node.">Z3_get_sort</a>(c, v);
<a name="l00505"></a>00505         fprintf(out, <span class="stringliteral">":"</span>);
<a name="l00506"></a>00506         <a class="code" href="group__capi__ex.html#g8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(c, out, t);
<a name="l00507"></a>00507         <span class="keywordflow">break</span>;
<a name="l00508"></a>00508     }
<a name="l00509"></a>00509     <span class="keywordflow">case</span> Z3_APP_AST: {
<a name="l00510"></a>00510         <span class="keywordtype">unsigned</span> i;
<a name="l00511"></a>00511         Z3_app app = <a class="code" href="group__capi.html#gf9345fd0822d7e9928dd4ab14a09765b" title="Convert an AST into a APP_AST. This is just type casting.">Z3_to_app</a>(c, v);
<a name="l00512"></a>00512         <span class="keywordtype">unsigned</span> num_fields = <a class="code" href="group__capi.html#ge8ad520b79b46c323863bacffa0e12c0" title="Return the number of argument of an application. If t is an constant, then the number...">Z3_get_app_num_args</a>(c, app);
<a name="l00513"></a>00513         Z3_func_decl d = <a class="code" href="group__capi.html#g4ffab51c30484a32edc65194573cfd28" title="Return the declaration of a constant or function application.">Z3_get_app_decl</a>(c, app);
<a name="l00514"></a>00514         fprintf(out, Z3_func_decl_to_string(c, d));
<a name="l00515"></a>00515         <span class="keywordflow">if</span> (num_fields &gt; 0) {
<a name="l00516"></a>00516             fprintf(out, <span class="stringliteral">"["</span>);
<a name="l00517"></a>00517             <span class="keywordflow">for</span> (i = 0; i &lt; num_fields; i++) {
<a name="l00518"></a>00518                 <span class="keywordflow">if</span> (i &gt; 0) {
<a name="l00519"></a>00519                     fprintf(out, <span class="stringliteral">", "</span>);
<a name="l00520"></a>00520                 }
<a name="l00521"></a>00521                 <a class="code" href="group__capi__ex.html#g807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(c, out, <a class="code" href="group__capi.html#g49a576b11f9f6ca4a94670e538a84c6b" title="Return the i-th argument of the given application.">Z3_get_app_arg</a>(c, app, i));
<a name="l00522"></a>00522             }
<a name="l00523"></a>00523             fprintf(out, <span class="stringliteral">"]"</span>);
<a name="l00524"></a>00524         }
<a name="l00525"></a>00525         <span class="keywordflow">break</span>;
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527     <span class="keywordflow">case</span> Z3_QUANTIFIER_AST: {
<a name="l00528"></a>00528         fprintf(out, <span class="stringliteral">"quantifier"</span>);
<a name="l00529"></a>00529         ;       
<a name="l00530"></a>00530     }
<a name="l00531"></a>00531     <span class="keywordflow">default</span>:
<a name="l00532"></a>00532         fprintf(out, <span class="stringliteral">"#unknown"</span>);
<a name="l00533"></a>00533     }
<a name="l00534"></a>00534 }
<a name="l00535"></a>00535 
<a name="l00539"></a><a class="code" href="group__capi__ex.html#g5416a7bbf6e561fcfdda0dd85bec2682">00539</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g5416a7bbf6e561fcfdda0dd85bec2682" title="Custom function interpretations pretty printer.">display_function_interpretations</a>(Z3_context c, FILE * out, Z3_model m) 
<a name="l00540"></a>00540 {
<a name="l00541"></a>00541     <span class="keywordtype">unsigned</span> num_functions, i;
<a name="l00542"></a>00542 
<a name="l00543"></a>00543     fprintf(out, <span class="stringliteral">"function interpretations:\n"</span>);
<a name="l00544"></a>00544 
<a name="l00545"></a>00545     num_functions = <a class="code" href="group__capi.html#g93bbc1e93644b836fd81bcb99941efa0" title="Return the number of function interpretations in the given model.">Z3_get_model_num_funcs</a>(c, m);
<a name="l00546"></a>00546     <span class="keywordflow">for</span> (i = 0; i &lt; num_functions; i++) {
<a name="l00547"></a>00547         Z3_func_decl fdecl;
<a name="l00548"></a>00548         Z3_symbol name;
<a name="l00549"></a>00549         Z3_ast func_else;
<a name="l00550"></a>00550         <span class="keywordtype">unsigned</span> num_entries, j;
<a name="l00551"></a>00551         
<a name="l00552"></a>00552         fdecl = <a class="code" href="group__capi.html#g69a6b71175fbad3b803b14a03fd1619d" title="Return the declaration of the i-th function in the given model.">Z3_get_model_func_decl</a>(c, m, i);
<a name="l00553"></a>00553         name = <a class="code" href="group__capi.html#g741b1bf11cb92aa2ec9ef2fef73ff129" title="Return the constant declaration name as a symbol.">Z3_get_decl_name</a>(c, fdecl);
<a name="l00554"></a>00554         <a class="code" href="group__capi__ex.html#g387b0f228ff147764beaae9e07ee9d59" title="Display a symbol in the given output stream.">display_symbol</a>(c, out, name);
<a name="l00555"></a>00555         fprintf(out, <span class="stringliteral">" = {"</span>);
<a name="l00556"></a>00556         num_entries = <a class="code" href="group__capi.html#g08b6982830120de746c3459391e10f37" title="Return the number of entries of the i-th function interpretation in the given model...">Z3_get_model_func_num_entries</a>(c, m, i);
<a name="l00557"></a>00557         <span class="keywordflow">for</span> (j = 0; j &lt; num_entries; j++) {
<a name="l00558"></a>00558             <span class="keywordtype">unsigned</span> num_args, k;
<a name="l00559"></a>00559             <span class="keywordflow">if</span> (j &gt; 0) {
<a name="l00560"></a>00560                 fprintf(out, <span class="stringliteral">", "</span>);
<a name="l00561"></a>00561             }
<a name="l00562"></a>00562             num_args = <a class="code" href="group__capi.html#g72b4aa37bbd7e79ff1ea0f02e182d044" title="Return the number of arguments of the j-th entry of the i-th function interpretation...">Z3_get_model_func_entry_num_args</a>(c, m, i, j);
<a name="l00563"></a>00563             fprintf(out, <span class="stringliteral">"("</span>);
<a name="l00564"></a>00564             <span class="keywordflow">for</span> (k = 0; k &lt; num_args; k++) {
<a name="l00565"></a>00565                 <span class="keywordflow">if</span> (k &gt; 0) {
<a name="l00566"></a>00566                     fprintf(out, <span class="stringliteral">", "</span>);
<a name="l00567"></a>00567                 }
<a name="l00568"></a>00568                 <a class="code" href="group__capi__ex.html#g807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(c, out, <a class="code" href="group__capi.html#g5a6dc26868b3815fbbca68bfa50445dc" title="Return the k-th argument of the j-th entry of the i-th function interpretation in...">Z3_get_model_func_entry_arg</a>(c, m, i, j, k));
<a name="l00569"></a>00569             }
<a name="l00570"></a>00570             fprintf(out, <span class="stringliteral">"|-&gt;"</span>);
<a name="l00571"></a>00571             <a class="code" href="group__capi__ex.html#g807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(c, out, <a class="code" href="group__capi.html#gf9ccc474d05703daa12f54067f691940" title="Return the return value of the j-th entry of the i-th function interpretation in...">Z3_get_model_func_entry_value</a>(c, m, i, j));
<a name="l00572"></a>00572             fprintf(out, <span class="stringliteral">")"</span>);
<a name="l00573"></a>00573         }
<a name="l00574"></a>00574         <span class="keywordflow">if</span> (num_entries &gt; 0) {
<a name="l00575"></a>00575             fprintf(out, <span class="stringliteral">", "</span>);
<a name="l00576"></a>00576         }
<a name="l00577"></a>00577         fprintf(out, <span class="stringliteral">"(else|-&gt;"</span>);
<a name="l00578"></a>00578         func_else = <a class="code" href="group__capi.html#g4d88b799f76b076a29d4435e6cbcc890" title="Return the &amp;#39;else&amp;#39; value of the i-th function interpretation in the given...">Z3_get_model_func_else</a>(c, m, i);
<a name="l00579"></a>00579         <a class="code" href="group__capi__ex.html#g807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(c, out, func_else);
<a name="l00580"></a>00580         fprintf(out, <span class="stringliteral">")}\n"</span>);
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582 }
<a name="l00583"></a>00583 
<a name="l00587"></a><a class="code" href="group__capi__ex.html#g4af59d866d3845962448d1354b89e3c6">00587</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a>(Z3_context c, FILE * out, Z3_model m) 
<a name="l00588"></a>00588 {
<a name="l00589"></a>00589     <span class="keywordtype">unsigned</span> num_constants;
<a name="l00590"></a>00590     <span class="keywordtype">unsigned</span> i;
<a name="l00591"></a>00591 
<a name="l00592"></a>00592     num_constants = <a class="code" href="group__capi.html#g93fd4227621601199c749822ddaaf030" title="Return the number of constants assigned by the given model.">Z3_get_model_num_constants</a>(c, m);
<a name="l00593"></a>00593     <span class="keywordflow">for</span> (i = 0; i &lt; num_constants; i++) {
<a name="l00594"></a>00594         Z3_symbol name;
<a name="l00595"></a>00595         Z3_func_decl cnst = <a class="code" href="group__capi.html#ga2fa9cf35930b7be2d708c8862993e92" title="Return the i-th constant in the given model.">Z3_get_model_constant</a>(c, m, i);
<a name="l00596"></a>00596         Z3_ast a, v;
<a name="l00597"></a>00597         <a class="code" href="group__capi.html#g3a65ded0ada3ee285865759a21140eeb" title="Z3 Boolean type. It is just an alias for int.">Z3_bool</a> ok;
<a name="l00598"></a>00598         name = <a class="code" href="group__capi.html#g741b1bf11cb92aa2ec9ef2fef73ff129" title="Return the constant declaration name as a symbol.">Z3_get_decl_name</a>(c, cnst);
<a name="l00599"></a>00599         <a class="code" href="group__capi__ex.html#g387b0f228ff147764beaae9e07ee9d59" title="Display a symbol in the given output stream.">display_symbol</a>(c, out, name);
<a name="l00600"></a>00600         fprintf(out, <span class="stringliteral">" = "</span>);
<a name="l00601"></a>00601         a = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(c, cnst, 0, 0);
<a name="l00602"></a>00602         v = a;
<a name="l00603"></a>00603         ok = <a class="code" href="group__capi.html#g47d3655283564918c85bda0b423b7f67" title="Evaluate the AST node t in the given model. Return Z3_TRUE if succeeded, and store...">Z3_eval</a>(c, m, a, &amp;v);
<a name="l00604"></a>00604         <a class="code" href="group__capi__ex.html#g807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(c, out, v);
<a name="l00605"></a>00605         fprintf(out, <span class="stringliteral">"\n"</span>);
<a name="l00606"></a>00606     }
<a name="l00607"></a>00607     <a class="code" href="group__capi__ex.html#g5416a7bbf6e561fcfdda0dd85bec2682" title="Custom function interpretations pretty printer.">display_function_interpretations</a>(c, out, m);
<a name="l00608"></a>00608 }
<a name="l00609"></a>00609 
<a name="l00613"></a><a class="code" href="group__capi__ex.html#g9dd6fa6c5fa72c0cd87eb5ec5a6c4965">00613</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g9dd6fa6c5fa72c0cd87eb5ec5a6c4965" title="Similar to check, but uses display_model instead of Z3_model_to_string.">check2</a>(Z3_context ctx, <a class="code" href="group__capi.html#g6c2de6ea89b244e37c3ffb17a9ea2a89" title="Lifted Boolean type: false, undefined, true.">Z3_lbool</a> expected_result)
<a name="l00614"></a>00614 {
<a name="l00615"></a>00615     Z3_model m      = 0;
<a name="l00616"></a>00616     <a class="code" href="group__capi.html#g6c2de6ea89b244e37c3ffb17a9ea2a89" title="Lifted Boolean type: false, undefined, true.">Z3_lbool</a> result = <a class="code" href="group__capi.html#gff310fef80ac8a82d0a51417e073ec0a" title="Check whether the given logical context is consistent or not.">Z3_check_and_get_model</a>(ctx, &amp;m);
<a name="l00617"></a>00617     <span class="keywordflow">switch</span> (result) {
<a name="l00618"></a>00618     <span class="keywordflow">case</span> Z3_L_FALSE:
<a name="l00619"></a>00619         printf(<span class="stringliteral">"unsat\n"</span>);
<a name="l00620"></a>00620         <span class="keywordflow">break</span>;
<a name="l00621"></a>00621     <span class="keywordflow">case</span> Z3_L_UNDEF:
<a name="l00622"></a>00622         printf(<span class="stringliteral">"unknown\n"</span>);
<a name="l00623"></a>00623         printf(<span class="stringliteral">"potential model:\n"</span>);
<a name="l00624"></a>00624         <a class="code" href="group__capi__ex.html#g4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a>(ctx, stdout, m);
<a name="l00625"></a>00625         <span class="keywordflow">break</span>;
<a name="l00626"></a>00626     <span class="keywordflow">case</span> Z3_L_TRUE:
<a name="l00627"></a>00627         printf(<span class="stringliteral">"sat\n"</span>);
<a name="l00628"></a>00628         <a class="code" href="group__capi__ex.html#g4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a>(ctx, stdout, m);
<a name="l00629"></a>00629         <span class="keywordflow">break</span>;
<a name="l00630"></a>00630     }
<a name="l00631"></a>00631     <span class="keywordflow">if</span> (m) {
<a name="l00632"></a>00632         <a class="code" href="group__capi.html#g0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l00633"></a>00633     }
<a name="l00634"></a>00634     <span class="keywordflow">if</span> (result != expected_result) {
<a name="l00635"></a>00635         <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"unexpected result"</span>);
<a name="l00636"></a>00636     }
<a name="l00637"></a>00637 }
<a name="l00638"></a>00638 
<a name="l00642"></a><a class="code" href="group__capi__ex.html#g33abf350aae0212c85a5903e41764025">00642</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g33abf350aae0212c85a5903e41764025" title="Display Z3 version in the standard output.">display_version</a>() 
<a name="l00643"></a>00643 {
<a name="l00644"></a>00644     <span class="keywordtype">unsigned</span> major, minor, build, revision;
<a name="l00645"></a>00645     <a class="code" href="group__capi.html#g45fcd18a00379b13a536c5b6117190ae" title="Return Z3 version number information.">Z3_get_version</a>(&amp;major, &amp;minor, &amp;build, &amp;revision);
<a name="l00646"></a>00646     printf(<span class="stringliteral">"Z3 %d.%d.%d.%d\n"</span>, major, minor, build, revision);
<a name="l00647"></a>00647 }
<a name="l00657"></a><a class="code" href="group__capi__ex.html#gb7c1e72848c0e19ca409fc7acd888310">00657</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gb7c1e72848c0e19ca409fc7acd888310" title="&amp;quot;Hello world&amp;quot; example: create a Z3 logical context, and delete it.">simple_example</a>() 
<a name="l00658"></a>00658 {
<a name="l00659"></a>00659     Z3_context ctx;
<a name="l00660"></a>00660     
<a name="l00661"></a>00661     printf(<span class="stringliteral">"\nsimple_example\n"</span>);
<a name="l00662"></a>00662  
<a name="l00663"></a>00663     ctx = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l00664"></a>00664 
<a name="l00665"></a>00665     <span class="comment">/* do something with the context */</span>
<a name="l00666"></a>00666     printf(<span class="stringliteral">"CONTEXT:\n%sEND OF CONTEXT\n"</span>, <a class="code" href="group__capi.html#g165e38ddfc928f586cb738cdf6c5f216" title="Convert the given logical context into a string.">Z3_context_to_string</a>(ctx));
<a name="l00667"></a>00667 
<a name="l00668"></a>00668     <span class="comment">/* delete logical context */</span>
<a name="l00669"></a>00669     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00670"></a>00670 }
<a name="l00671"></a>00671 
<a name="l00676"></a><a class="code" href="group__capi__ex.html#gede2d42cf4df4754f3aca5a502313dab">00676</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gede2d42cf4df4754f3aca5a502313dab">demorgan</a>() 
<a name="l00677"></a>00677 {
<a name="l00678"></a>00678     Z3_config cfg;
<a name="l00679"></a>00679     Z3_context ctx;
<a name="l00680"></a>00680     Z3_sort bool_sort;
<a name="l00681"></a>00681     Z3_symbol symbol_x, symbol_y;
<a name="l00682"></a>00682     Z3_ast x, y, not_x, not_y, x_and_y, ls, rs, conjecture, negated_conjecture;
<a name="l00683"></a>00683     Z3_ast args[2];
<a name="l00684"></a>00684 
<a name="l00685"></a>00685     printf(<span class="stringliteral">"\nDeMorgan\n"</span>);
<a name="l00686"></a>00686     
<a name="l00687"></a>00687     cfg                = <a class="code" href="group__capi.html#g7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l00688"></a>00688     ctx                = <a class="code" href="group__capi.html#g0bd93cfab4d749dd3e2f2a4416820a46" title="Create a logical context using the given configuration.">Z3_mk_context</a>(cfg);
<a name="l00689"></a>00689     <a class="code" href="group__capi.html#g5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l00690"></a>00690 <span class="preprocessor">#ifdef TRACING</span>
<a name="l00691"></a>00691 <span class="preprocessor"></span>    <a class="code" href="group__capi.html#gd0a9626f31f25c42ca620a41309e70f7" title="Enable trace messages to a standard error.">Z3_trace_to_stderr</a>(ctx);
<a name="l00692"></a>00692 <span class="preprocessor">#endif</span>
<a name="l00693"></a>00693 <span class="preprocessor"></span>    bool_sort          = <a class="code" href="group__capi.html#gcdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx);
<a name="l00694"></a>00694     symbol_x           = <a class="code" href="group__capi.html#g3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx, 0);
<a name="l00695"></a>00695     symbol_y           = <a class="code" href="group__capi.html#g3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx, 1);
<a name="l00696"></a>00696     x                  = <a class="code" href="group__capi.html#g093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, symbol_x, bool_sort);
<a name="l00697"></a>00697     y                  = <a class="code" href="group__capi.html#g093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, symbol_y, bool_sort);
<a name="l00698"></a>00698     
<a name="l00699"></a>00699     <span class="comment">/* De Morgan - with a negation around */</span>
<a name="l00700"></a>00700     <span class="comment">/* !(!(x &amp;&amp; y) &lt;-&gt; (!x || !y)) */</span>
<a name="l00701"></a>00701     not_x              = <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, x);
<a name="l00702"></a>00702     not_y              = <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, y);
<a name="l00703"></a>00703     args[0]            = x;
<a name="l00704"></a>00704     args[1]            = y;
<a name="l00705"></a>00705     x_and_y            = <a class="code" href="group__capi.html#gcde98ce4a8ed1dde50b9669db4838c61" title="Create an AST node representing args[0] and ... and args[num_args-1].">Z3_mk_and</a>(ctx, 2, args);
<a name="l00706"></a>00706     ls                 = <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, x_and_y);
<a name="l00707"></a>00707     args[0]            = not_x;
<a name="l00708"></a>00708     args[1]            = not_y;
<a name="l00709"></a>00709     rs                 = <a class="code" href="group__capi.html#g00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, args);
<a name="l00710"></a>00710     conjecture         = <a class="code" href="group__capi.html#g930a8e844d345fbebc498ac43a696042" title="Create an AST node representing t1 iff t2.">Z3_mk_iff</a>(ctx, ls, rs);
<a name="l00711"></a>00711     negated_conjecture = <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, conjecture);
<a name="l00712"></a>00712     
<a name="l00713"></a>00713     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, negated_conjecture);
<a name="l00714"></a>00714     <span class="keywordflow">switch</span> (<a class="code" href="group__capi.html#g72055cfbae81bd174abed32a83e50b03" title="Check whether the given logical context is consistent or not.">Z3_check</a>(ctx)) {
<a name="l00715"></a>00715     <span class="keywordflow">case</span> Z3_L_FALSE:
<a name="l00716"></a>00716         <span class="comment">/* The negated conjecture was unsatisfiable, hence the conjecture is valid */</span>
<a name="l00717"></a>00717         printf(<span class="stringliteral">"DeMorgan is valid\n"</span>);
<a name="l00718"></a>00718         <span class="keywordflow">break</span>;
<a name="l00719"></a>00719     <span class="keywordflow">case</span> Z3_L_UNDEF:
<a name="l00720"></a>00720         <span class="comment">/* Check returned undef */</span>
<a name="l00721"></a>00721         printf(<span class="stringliteral">"Undef\n"</span>);
<a name="l00722"></a>00722         <span class="keywordflow">break</span>;
<a name="l00723"></a>00723     <span class="keywordflow">case</span> Z3_L_TRUE:
<a name="l00724"></a>00724         <span class="comment">/* The negated conjecture was satisfiable, hence the conjecture is not valid */</span>
<a name="l00725"></a>00725         printf(<span class="stringliteral">"DeMorgan is not valid\n"</span>);
<a name="l00726"></a>00726         <span class="keywordflow">break</span>;
<a name="l00727"></a>00727     }
<a name="l00728"></a>00728     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00729"></a>00729 }
<a name="l00730"></a>00730 
<a name="l00734"></a><a class="code" href="group__capi__ex.html#ge1fc416964019d6927fd6917ae32d914">00734</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#ge1fc416964019d6927fd6917ae32d914" title="Find a model for x xor y.">find_model_example1</a>() 
<a name="l00735"></a>00735 {
<a name="l00736"></a>00736     Z3_context ctx;
<a name="l00737"></a>00737     Z3_ast x, y, x_xor_y;
<a name="l00738"></a>00738 
<a name="l00739"></a>00739     printf(<span class="stringliteral">"\nfind_model_example1\n"</span>);
<a name="l00740"></a>00740 
<a name="l00741"></a>00741     ctx     = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l00742"></a>00742 
<a name="l00743"></a>00743     x       = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"x"</span>);
<a name="l00744"></a>00744     y       = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"y"</span>);
<a name="l00745"></a>00745     x_xor_y = <a class="code" href="group__capi.html#gcc6d1b848032dec0c4617b594d4229ec" title="Create an AST node representing t1 xor t2.">Z3_mk_xor</a>(ctx, x, y);
<a name="l00746"></a>00746     
<a name="l00747"></a>00747     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, x_xor_y);
<a name="l00748"></a>00748 
<a name="l00749"></a>00749     printf(<span class="stringliteral">"model for: x xor y\n"</span>);
<a name="l00750"></a>00750     <a class="code" href="group__capi__ex.html#g4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l00751"></a>00751 
<a name="l00752"></a>00752     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00753"></a>00753 }
<a name="l00754"></a>00754 
<a name="l00759"></a><a class="code" href="group__capi__ex.html#g5194ee6f65cb7e4280e7577816d67e4a">00759</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g5194ee6f65cb7e4280e7577816d67e4a" title="Find a model for x &amp;lt; y + 1, x &amp;gt; 2. Then, assert not(x = y), and find another...">find_model_example2</a>() 
<a name="l00760"></a>00760 {
<a name="l00761"></a>00761     Z3_context ctx;
<a name="l00762"></a>00762     Z3_ast x, y, one, two, y_plus_one;
<a name="l00763"></a>00763     Z3_ast x_eq_y;
<a name="l00764"></a>00764     Z3_ast args[2];
<a name="l00765"></a>00765     Z3_ast c1, c2, c3;
<a name="l00766"></a>00766 
<a name="l00767"></a>00767     printf(<span class="stringliteral">"\nfind_model_example2\n"</span>);
<a name="l00768"></a>00768     
<a name="l00769"></a>00769     ctx        = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l00770"></a>00770     x          = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"x"</span>);
<a name="l00771"></a>00771     y          = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"y"</span>);
<a name="l00772"></a>00772     one        = <a class="code" href="group__capi__ex.html#gc55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 1);
<a name="l00773"></a>00773     two        = <a class="code" href="group__capi__ex.html#gc55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 2);
<a name="l00774"></a>00774 
<a name="l00775"></a>00775     args[0]    = y;
<a name="l00776"></a>00776     args[1]    = one;
<a name="l00777"></a>00777     y_plus_one = <a class="code" href="group__capi.html#g4e4ac0a4e53eee0b4b0ef159ed7d0cd5" title="Create an AST node representing args[0] + ... + args[num_args-1].">Z3_mk_add</a>(ctx, 2, args);
<a name="l00778"></a>00778 
<a name="l00779"></a>00779     c1         = <a class="code" href="group__capi.html#g58a3dc67c5de52cf599c346803ba1534" title="Create less than.">Z3_mk_lt</a>(ctx, x, y_plus_one);
<a name="l00780"></a>00780     c2         = <a class="code" href="group__capi.html#g46167b86067586bb742c0557d7babfd3" title="Create greater than.">Z3_mk_gt</a>(ctx, x, two);
<a name="l00781"></a>00781     
<a name="l00782"></a>00782     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, c1);
<a name="l00783"></a>00783     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, c2);
<a name="l00784"></a>00784 
<a name="l00785"></a>00785     printf(<span class="stringliteral">"model for: x &lt; y + 1, x &gt; 2\n"</span>);
<a name="l00786"></a>00786     <a class="code" href="group__capi__ex.html#g4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l00787"></a>00787 
<a name="l00788"></a>00788     <span class="comment">/* assert not(x = y) */</span>
<a name="l00789"></a>00789     x_eq_y     = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y);
<a name="l00790"></a>00790     c3         = <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, x_eq_y);
<a name="l00791"></a>00791     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, c3);
<a name="l00792"></a>00792 
<a name="l00793"></a>00793     printf(<span class="stringliteral">"model for: x &lt; y + 1, x &gt; 2, not(x = y)\n"</span>);
<a name="l00794"></a>00794     <a class="code" href="group__capi__ex.html#g4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l00795"></a>00795 
<a name="l00796"></a>00796     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00797"></a>00797 }
<a name="l00798"></a>00798 
<a name="l00806"></a><a class="code" href="group__capi__ex.html#g0cd53c9f10e66950a9121f5702bf8705">00806</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g0cd53c9f10e66950a9121f5702bf8705" title="Prove x = y implies g(x) = g(y), and disprove x = y implies g(g(x)) = g(y).">prove_example1</a>() 
<a name="l00807"></a>00807 {
<a name="l00808"></a>00808     Z3_context ctx;
<a name="l00809"></a>00809     Z3_symbol U_name, g_name, x_name, y_name;
<a name="l00810"></a>00810     Z3_sort U;
<a name="l00811"></a>00811     Z3_sort g_domain[1];
<a name="l00812"></a>00812     Z3_func_decl g;
<a name="l00813"></a>00813     Z3_ast x, y, gx, ggx, gy;
<a name="l00814"></a>00814     Z3_ast eq, f;
<a name="l00815"></a>00815 
<a name="l00816"></a>00816     printf(<span class="stringliteral">"\nprove_example1\n"</span>);
<a name="l00817"></a>00817     
<a name="l00818"></a>00818     ctx        = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l00819"></a>00819     
<a name="l00820"></a>00820     <span class="comment">/* create uninterpreted type. */</span>
<a name="l00821"></a>00821     U_name     = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"U"</span>);
<a name="l00822"></a>00822     U          = <a class="code" href="group__capi.html#g736e88741af1c178cbebf94c49aa42de" title="Create a free (uninterpreted) type using the given name (symbol).">Z3_mk_uninterpreted_sort</a>(ctx, U_name);
<a name="l00823"></a>00823     
<a name="l00824"></a>00824     <span class="comment">/* declare function g */</span>
<a name="l00825"></a>00825     g_name      = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"g"</span>);
<a name="l00826"></a>00826     g_domain[0] = U;
<a name="l00827"></a>00827     g           = <a class="code" href="group__capi.html#ga5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, g_name, 1, g_domain, U);
<a name="l00828"></a>00828 
<a name="l00829"></a>00829     <span class="comment">/* create x and y */</span>
<a name="l00830"></a>00830     x_name      = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"x"</span>);
<a name="l00831"></a>00831     y_name      = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"y"</span>);
<a name="l00832"></a>00832     x           = <a class="code" href="group__capi.html#g093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, x_name, U);
<a name="l00833"></a>00833     y           = <a class="code" href="group__capi.html#g093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, y_name, U);
<a name="l00834"></a>00834     <span class="comment">/* create g(x), g(y) */</span>
<a name="l00835"></a>00835     gx          = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, x);
<a name="l00836"></a>00836     gy          = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, y);
<a name="l00837"></a>00837     
<a name="l00838"></a>00838     <span class="comment">/* assert x = y */</span>
<a name="l00839"></a>00839     eq          = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y);
<a name="l00840"></a>00840     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, eq);
<a name="l00841"></a>00841 
<a name="l00842"></a>00842     <span class="comment">/* prove g(x) = g(y) */</span>
<a name="l00843"></a>00843     f           = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, gx, gy);
<a name="l00844"></a>00844     printf(<span class="stringliteral">"prove: x = y implies g(x) = g(y)\n"</span>);
<a name="l00845"></a>00845     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, f, <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l00846"></a>00846 
<a name="l00847"></a>00847     <span class="comment">/* create g(g(x)) */</span>
<a name="l00848"></a>00848     ggx         = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, gx);
<a name="l00849"></a>00849     
<a name="l00850"></a>00850     <span class="comment">/* disprove g(g(x)) = g(y) */</span>
<a name="l00851"></a>00851     f           = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, ggx, gy);
<a name="l00852"></a>00852     printf(<span class="stringliteral">"disprove: x = y implies g(g(x)) = g(y)\n"</span>);
<a name="l00853"></a>00853     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, f, <a class="code" href="group__capi.html#g1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l00854"></a>00854 
<a name="l00855"></a>00855     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00856"></a>00856 }
<a name="l00857"></a>00857 
<a name="l00864"></a><a class="code" href="group__capi__ex.html#g8a474ab19f7f08b45bf69d1bd6e2bb43">00864</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g8a474ab19f7f08b45bf69d1bd6e2bb43" title="Prove not(g(g(x) - g(y)) = g(z)), x + z &amp;lt;= y &amp;lt;= x implies z &amp;lt; 0 . Then,...">prove_example2</a>() 
<a name="l00865"></a>00865 {
<a name="l00866"></a>00866     Z3_context ctx;
<a name="l00867"></a>00867     Z3_sort int_sort;
<a name="l00868"></a>00868     Z3_symbol g_name;
<a name="l00869"></a>00869     Z3_sort g_domain[1];
<a name="l00870"></a>00870     Z3_func_decl g;
<a name="l00871"></a>00871     Z3_ast x, y, z, zero, minus_one, x_plus_z, gx, gy, gz, gx_gy, ggx_gy;
<a name="l00872"></a>00872     Z3_ast args[2];
<a name="l00873"></a>00873     Z3_ast eq, c1, c2, c3, f;
<a name="l00874"></a>00874 
<a name="l00875"></a>00875     printf(<span class="stringliteral">"\nprove_example2\n"</span>);
<a name="l00876"></a>00876     
<a name="l00877"></a>00877     ctx        = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l00878"></a>00878 
<a name="l00879"></a>00879     <span class="comment">/* declare function g */</span>
<a name="l00880"></a>00880     int_sort    = <a class="code" href="group__capi.html#g6cd426ab5748653b77d389fd3eac1015" title="Create an integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l00881"></a>00881     g_name      = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"g"</span>);
<a name="l00882"></a>00882     g_domain[0] = int_sort;
<a name="l00883"></a>00883     g           = <a class="code" href="group__capi.html#ga5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, g_name, 1, g_domain, int_sort);
<a name="l00884"></a>00884     
<a name="l00885"></a>00885     <span class="comment">/* create x, y, and z */</span>
<a name="l00886"></a>00886     x           = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"x"</span>);
<a name="l00887"></a>00887     y           = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"y"</span>);
<a name="l00888"></a>00888     z           = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"z"</span>);
<a name="l00889"></a>00889 
<a name="l00890"></a>00890     <span class="comment">/* create gx, gy, gz */</span>
<a name="l00891"></a>00891     gx          = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, x);
<a name="l00892"></a>00892     gy          = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, y);
<a name="l00893"></a>00893     gz          = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, z);
<a name="l00894"></a>00894     
<a name="l00895"></a>00895     <span class="comment">/* create zero */</span>
<a name="l00896"></a>00896     zero        = <a class="code" href="group__capi__ex.html#gc55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 0);
<a name="l00897"></a>00897 
<a name="l00898"></a>00898     <span class="comment">/* assert not(g(g(x) - g(y)) = g(z)) */</span>
<a name="l00899"></a>00899     args[0]     = gx;
<a name="l00900"></a>00900     args[1]     = gy;
<a name="l00901"></a>00901     gx_gy       = <a class="code" href="group__capi.html#g4f5fea9b683f9e674fd8f14d676cc9a9" title="Create an AST node representing args[0] - ... - args[num_args - 1].">Z3_mk_sub</a>(ctx, 2, args);
<a name="l00902"></a>00902     ggx_gy      = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, gx_gy);
<a name="l00903"></a>00903     eq          = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, ggx_gy, gz);
<a name="l00904"></a>00904     c1          = <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, eq);
<a name="l00905"></a>00905     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, c1);
<a name="l00906"></a>00906 
<a name="l00907"></a>00907     <span class="comment">/* assert x + z &lt;= y */</span>
<a name="l00908"></a>00908     args[0]     = x;
<a name="l00909"></a>00909     args[1]     = z;
<a name="l00910"></a>00910     x_plus_z    = <a class="code" href="group__capi.html#g4e4ac0a4e53eee0b4b0ef159ed7d0cd5" title="Create an AST node representing args[0] + ... + args[num_args-1].">Z3_mk_add</a>(ctx, 2, args);
<a name="l00911"></a>00911     c2          = <a class="code" href="group__capi.html#ga9a33d11096841f4e8c407f1578bc0bf" title="Create less than or equal to.">Z3_mk_le</a>(ctx, x_plus_z, y);
<a name="l00912"></a>00912     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, c2);
<a name="l00913"></a>00913 
<a name="l00914"></a>00914     <span class="comment">/* assert y &lt;= x */</span>
<a name="l00915"></a>00915     c3          = <a class="code" href="group__capi.html#ga9a33d11096841f4e8c407f1578bc0bf" title="Create less than or equal to.">Z3_mk_le</a>(ctx, y, x);
<a name="l00916"></a>00916     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, c3);
<a name="l00917"></a>00917 
<a name="l00918"></a>00918     <span class="comment">/* prove z &lt; 0 */</span>
<a name="l00919"></a>00919     f           = <a class="code" href="group__capi.html#g58a3dc67c5de52cf599c346803ba1534" title="Create less than.">Z3_mk_lt</a>(ctx, z, zero);
<a name="l00920"></a>00920     printf(<span class="stringliteral">"prove: not(g(g(x) - g(y)) = g(z)), x + z &lt;= y &lt;= x implies z &lt; 0\n"</span>);
<a name="l00921"></a>00921     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, f, <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l00922"></a>00922 
<a name="l00923"></a>00923     <span class="comment">/* disprove z &lt; -1 */</span>
<a name="l00924"></a>00924     minus_one   = <a class="code" href="group__capi__ex.html#gc55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, -1);
<a name="l00925"></a>00925     f           = <a class="code" href="group__capi.html#g58a3dc67c5de52cf599c346803ba1534" title="Create less than.">Z3_mk_lt</a>(ctx, z, minus_one);
<a name="l00926"></a>00926     printf(<span class="stringliteral">"disprove: not(g(g(x) - g(y)) = g(z)), x + z &lt;= y &lt;= x implies z &lt; -1\n"</span>);
<a name="l00927"></a>00927     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, f, <a class="code" href="group__capi.html#g1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l00928"></a>00928 
<a name="l00929"></a>00929     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00930"></a>00930 }
<a name="l00931"></a>00931 
<a name="l00938"></a><a class="code" href="group__capi__ex.html#g07ee56f1ada5226634e68a8b37989fbd">00938</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g07ee56f1ada5226634e68a8b37989fbd" title="Show how push &amp;amp; pop can be used to create &amp;quot;backtracking&amp;quot; points.">push_pop_example1</a>() 
<a name="l00939"></a>00939 {
<a name="l00940"></a>00940     Z3_context ctx;
<a name="l00941"></a>00941     Z3_sort int_sort;
<a name="l00942"></a>00942     Z3_symbol x_sym, y_sym;
<a name="l00943"></a>00943     Z3_ast x, y, big_number, three;
<a name="l00944"></a>00944     Z3_ast c1, c2, c3;
<a name="l00945"></a>00945 
<a name="l00946"></a>00946     printf(<span class="stringliteral">"\npush_pop_example1\n"</span>);
<a name="l00947"></a>00947 
<a name="l00948"></a>00948     ctx        = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l00949"></a>00949 
<a name="l00950"></a>00950     <span class="comment">/* create a big number */</span>
<a name="l00951"></a>00951     int_sort   = <a class="code" href="group__capi.html#g6cd426ab5748653b77d389fd3eac1015" title="Create an integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l00952"></a>00952     big_number = <a class="code" href="group__capi.html#gc8aca397e32ca33618d8024bff32948c" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">"1000000000000000000000000000000000000000000000000000000"</span>, int_sort);
<a name="l00953"></a>00953     
<a name="l00954"></a>00954     <span class="comment">/* create number 3 */</span>
<a name="l00955"></a>00955     three      = <a class="code" href="group__capi.html#gc8aca397e32ca33618d8024bff32948c" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">"3"</span>, int_sort);
<a name="l00956"></a>00956 
<a name="l00957"></a>00957     <span class="comment">/* create x */</span>
<a name="l00958"></a>00958     x_sym      = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"x"</span>);
<a name="l00959"></a>00959     x          = <a class="code" href="group__capi.html#g093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, x_sym, int_sort);
<a name="l00960"></a>00960 
<a name="l00961"></a>00961     <span class="comment">/* assert x &gt;= "big number" */</span>
<a name="l00962"></a>00962     c1         = <a class="code" href="group__capi.html#gd9245cbadb80b192323d01a8360fb942" title="Create greater than or equal to.">Z3_mk_ge</a>(ctx, x, big_number);
<a name="l00963"></a>00963     printf(<span class="stringliteral">"assert: x &gt;= 'big number'\n"</span>);
<a name="l00964"></a>00964     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, c1);
<a name="l00965"></a>00965 
<a name="l00966"></a>00966     <span class="comment">/* create a backtracking point */</span>
<a name="l00967"></a>00967     printf(<span class="stringliteral">"push\n"</span>);
<a name="l00968"></a>00968     <a class="code" href="group__capi.html#gd651ad68c7a060cbb5616349233cb10f" title="Create a backtracking point.">Z3_push</a>(ctx);
<a name="l00969"></a>00969 
<a name="l00970"></a>00970     <span class="comment">/* assert x &lt;= 3 */</span>
<a name="l00971"></a>00971     c2         = <a class="code" href="group__capi.html#ga9a33d11096841f4e8c407f1578bc0bf" title="Create less than or equal to.">Z3_mk_le</a>(ctx, x, three);
<a name="l00972"></a>00972     printf(<span class="stringliteral">"assert: x &lt;= 3\n"</span>);
<a name="l00973"></a>00973     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, c2);
<a name="l00974"></a>00974 
<a name="l00975"></a>00975     <span class="comment">/* context is inconsistent at this point */</span>
<a name="l00976"></a>00976     <a class="code" href="group__capi__ex.html#g9dd6fa6c5fa72c0cd87eb5ec5a6c4965" title="Similar to check, but uses display_model instead of Z3_model_to_string.">check2</a>(ctx, Z3_L_FALSE);
<a name="l00977"></a>00977 
<a name="l00978"></a>00978     <span class="comment">/* backtrack: the constraint x &lt;= 3 will be removed, since it was</span>
<a name="l00979"></a>00979 <span class="comment">       asserted after the last Z3_push. */</span>
<a name="l00980"></a>00980     printf(<span class="stringliteral">"pop\n"</span>);
<a name="l00981"></a>00981     <a class="code" href="group__capi.html#gb2b3a542006c86c8d86dc37872f88b61" title="Backtrack.">Z3_pop</a>(ctx, 1);
<a name="l00982"></a>00982 
<a name="l00983"></a>00983     <span class="comment">/* the context is consistent again. */</span>
<a name="l00984"></a>00984     <a class="code" href="group__capi__ex.html#g9dd6fa6c5fa72c0cd87eb5ec5a6c4965" title="Similar to check, but uses display_model instead of Z3_model_to_string.">check2</a>(ctx, Z3_L_TRUE);
<a name="l00985"></a>00985 
<a name="l00986"></a>00986     <span class="comment">/* new constraints can be asserted... */</span>
<a name="l00987"></a>00987     
<a name="l00988"></a>00988     <span class="comment">/* create y */</span>
<a name="l00989"></a>00989     y_sym      = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"y"</span>);
<a name="l00990"></a>00990     y          = <a class="code" href="group__capi.html#g093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, y_sym, int_sort);
<a name="l00991"></a>00991 
<a name="l00992"></a>00992     <span class="comment">/* assert y &gt; x */</span>
<a name="l00993"></a>00993     c3         = <a class="code" href="group__capi.html#g46167b86067586bb742c0557d7babfd3" title="Create greater than.">Z3_mk_gt</a>(ctx, y, x);
<a name="l00994"></a>00994     printf(<span class="stringliteral">"assert: y &gt; x\n"</span>);
<a name="l00995"></a>00995     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, c3);
<a name="l00996"></a>00996 
<a name="l00997"></a>00997     <span class="comment">/* the context is still consistent. */</span>
<a name="l00998"></a>00998     <a class="code" href="group__capi__ex.html#g9dd6fa6c5fa72c0cd87eb5ec5a6c4965" title="Similar to check, but uses display_model instead of Z3_model_to_string.">check2</a>(ctx, Z3_L_TRUE);
<a name="l00999"></a>00999     
<a name="l01000"></a>01000     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01001"></a>01001 }
<a name="l01002"></a>01002 
<a name="l01009"></a><a class="code" href="group__capi__ex.html#g06e4829a7db00856491745b17a4201b7">01009</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g06e4829a7db00856491745b17a4201b7" title="Prove that f(x, y) = f(w, v) implies y = v when f is injective in the second argument...">quantifier_example1</a>() 
<a name="l01010"></a>01010 {
<a name="l01011"></a>01011     Z3_config  cfg;
<a name="l01012"></a>01012     Z3_context ctx;
<a name="l01013"></a>01013     Z3_sort       int_sort;
<a name="l01014"></a>01014     Z3_symbol         f_name;
<a name="l01015"></a>01015     Z3_sort       f_domain[2];
<a name="l01016"></a>01016     Z3_func_decl f;
<a name="l01017"></a>01017     Z3_ast            x, y, w, v, fxy, fwv;
<a name="l01018"></a>01018     Z3_ast            p1, p2, p3, not_p3;
<a name="l01019"></a>01019 
<a name="l01020"></a>01020     printf(<span class="stringliteral">"\nquantifier_example1\n"</span>);
<a name="l01021"></a>01021 
<a name="l01022"></a>01022     cfg = <a class="code" href="group__capi.html#g7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l01023"></a>01023     <span class="comment">/* If quantified formulas are asserted in a logical context, then</span>
<a name="l01024"></a>01024 <span class="comment">       the model produced by Z3 should be viewed as a potential model.</span>
<a name="l01025"></a>01025 <span class="comment">    */</span>
<a name="l01026"></a>01026     <a class="code" href="group__capi.html#g001ade87a1671fe77d7e53ed0f4f1ec3" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">"MODEL"</span>, <span class="stringliteral">"true"</span>);
<a name="l01027"></a>01027     ctx = <a class="code" href="group__capi__ex.html#g4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, <a class="code" href="group__capi__ex.html#g0f737ceb3f2e9e36496a3c39c7aa2bdf" title="Simpler error handler.">error_handler</a>);
<a name="l01028"></a>01028     <a class="code" href="group__capi.html#g5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l01029"></a>01029 
<a name="l01030"></a>01030     <span class="comment">/* declare function f */</span>
<a name="l01031"></a>01031     int_sort    = <a class="code" href="group__capi.html#g6cd426ab5748653b77d389fd3eac1015" title="Create an integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l01032"></a>01032     f_name      = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"f"</span>);
<a name="l01033"></a>01033     f_domain[0] = int_sort;
<a name="l01034"></a>01034     f_domain[1] = int_sort;
<a name="l01035"></a>01035     f           = <a class="code" href="group__capi.html#ga5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, f_name, 2, f_domain, int_sort);
<a name="l01036"></a>01036   
<a name="l01037"></a>01037     <span class="comment">/* assert that f is injective in the second argument. */</span>
<a name="l01038"></a>01038     <a class="code" href="group__capi__ex.html#gca2791e8333199e32873def86c8e465a" title="Assert the axiom: function f is injective in the i-th argument.">assert_inj_axiom</a>(ctx, f, 1);
<a name="l01039"></a>01039     
<a name="l01040"></a>01040     <span class="comment">/* create x, y, v, w, fxy, fwv */</span>
<a name="l01041"></a>01041     x           = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"x"</span>);
<a name="l01042"></a>01042     y           = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"y"</span>);
<a name="l01043"></a>01043     v           = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"v"</span>);
<a name="l01044"></a>01044     w           = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"w"</span>);
<a name="l01045"></a>01045     fxy         = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, f, x, y);
<a name="l01046"></a>01046     fwv         = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, f, w, v);
<a name="l01047"></a>01047     
<a name="l01048"></a>01048     <span class="comment">/* assert f(x, y) = f(w, v) */</span>
<a name="l01049"></a>01049     p1          = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, fxy, fwv);
<a name="l01050"></a>01050     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, p1);
<a name="l01051"></a>01051 
<a name="l01052"></a>01052     <span class="comment">/* prove f(x, y) = f(w, v) implies y = v */</span>
<a name="l01053"></a>01053     p2          = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, y, v);
<a name="l01054"></a>01054     printf(<span class="stringliteral">"prove: f(x, y) = f(w, v) implies y = v\n"</span>);
<a name="l01055"></a>01055     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, p2, <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01056"></a>01056 
<a name="l01057"></a>01057     <span class="comment">/* disprove f(x, y) = f(w, v) implies x = w */</span>
<a name="l01058"></a>01058     <span class="comment">/* using check2 instead of prove */</span>
<a name="l01059"></a>01059     p3          = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, w);
<a name="l01060"></a>01060     not_p3      = <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, p3);
<a name="l01061"></a>01061     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, not_p3);
<a name="l01062"></a>01062     printf(<span class="stringliteral">"disprove: f(x, y) = f(w, v) implies x = w\n"</span>);
<a name="l01063"></a>01063     printf(<span class="stringliteral">"that is: not(f(x, y) = f(w, v) implies x = w) is satisfiable\n"</span>);
<a name="l01064"></a>01064     <a class="code" href="group__capi__ex.html#g9dd6fa6c5fa72c0cd87eb5ec5a6c4965" title="Similar to check, but uses display_model instead of Z3_model_to_string.">check2</a>(ctx, Z3_L_UNDEF);
<a name="l01065"></a>01065     printf(<span class="stringliteral">"reason for last failure: %d (7 = quantifiers)\n"</span>, 
<a name="l01066"></a>01066            <a class="code" href="group__capi.html#g3d00a3a21612b8279e4646e8117defb9" title="Retrieve reason for search failure.">Z3_get_search_failure</a>(ctx));
<a name="l01067"></a>01067     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#g3d00a3a21612b8279e4646e8117defb9" title="Retrieve reason for search failure.">Z3_get_search_failure</a>(ctx) != Z3_QUANTIFIERS) {
<a name="l01068"></a>01068         <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"unexpected result"</span>);
<a name="l01069"></a>01069     }
<a name="l01070"></a>01070 
<a name="l01071"></a>01071     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01072"></a>01072 }
<a name="l01073"></a>01073 
<a name="l01079"></a><a class="code" href="group__capi__ex.html#ga4081035e25fec1e808c7edd33772a46">01079</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#ga4081035e25fec1e808c7edd33772a46" title="Prove store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1...">array_example1</a>() 
<a name="l01080"></a>01080 {
<a name="l01081"></a>01081     Z3_context ctx;
<a name="l01082"></a>01082     Z3_sort int_sort, array_sort;
<a name="l01083"></a>01083     Z3_ast a1, a2, i1, v1, i2, v2, i3;
<a name="l01084"></a>01084     Z3_ast st1, st2, sel1, sel2;
<a name="l01085"></a>01085     Z3_ast antecedent, consequent;
<a name="l01086"></a>01086     Z3_ast ds[3];
<a name="l01087"></a>01087     Z3_ast thm;
<a name="l01088"></a>01088 
<a name="l01089"></a>01089     printf(<span class="stringliteral">"\narray_example1\n"</span>);
<a name="l01090"></a>01090 
<a name="l01091"></a>01091     ctx = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01092"></a>01092 
<a name="l01093"></a>01093     int_sort    = <a class="code" href="group__capi.html#g6cd426ab5748653b77d389fd3eac1015" title="Create an integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l01094"></a>01094     array_sort  = <a class="code" href="group__capi.html#gfe617994cce1b516f46128e448c84445" title="Create an array type.">Z3_mk_array_sort</a>(ctx, int_sort, int_sort);
<a name="l01095"></a>01095 
<a name="l01096"></a>01096     a1          = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"a1"</span>, array_sort);
<a name="l01097"></a>01097     a2          = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"a2"</span>, array_sort);
<a name="l01098"></a>01098     i1          = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"i1"</span>, int_sort);
<a name="l01099"></a>01099     i2          = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"i2"</span>, int_sort);
<a name="l01100"></a>01100     i3          = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"i3"</span>, int_sort);
<a name="l01101"></a>01101     v1          = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"v1"</span>, int_sort);
<a name="l01102"></a>01102     v2          = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"v2"</span>, int_sort);
<a name="l01103"></a>01103     
<a name="l01104"></a>01104     st1         = <a class="code" href="group__capi.html#ge305a4f54b4a64f7e5973ae6ccb13593" title="Array update.">Z3_mk_store</a>(ctx, a1, i1, v1);
<a name="l01105"></a>01105     st2         = <a class="code" href="group__capi.html#ge305a4f54b4a64f7e5973ae6ccb13593" title="Array update.">Z3_mk_store</a>(ctx, a2, i2, v2);
<a name="l01106"></a>01106     
<a name="l01107"></a>01107     sel1        = <a class="code" href="group__capi.html#g38f423f3683379e7f597a7fe59eccb67" title="Array read.">Z3_mk_select</a>(ctx, a1, i3);
<a name="l01108"></a>01108     sel2        = <a class="code" href="group__capi.html#g38f423f3683379e7f597a7fe59eccb67" title="Array read.">Z3_mk_select</a>(ctx, a2, i3);
<a name="l01109"></a>01109 
<a name="l01110"></a>01110     <span class="comment">/* create antecedent */</span>
<a name="l01111"></a>01111     antecedent  = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, st1, st2);
<a name="l01112"></a>01112 
<a name="l01113"></a>01113     <span class="comment">/* create consequent: i1 = i3 or  i2 = i3 or select(a1, i3) = select(a2, i3) */</span>
<a name="l01114"></a>01114     ds[0]       = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, i1, i3);
<a name="l01115"></a>01115     ds[1]       = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, i2, i3);
<a name="l01116"></a>01116     ds[2]       = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, sel1, sel2);
<a name="l01117"></a>01117     consequent  = <a class="code" href="group__capi.html#g00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 3, ds);
<a name="l01118"></a>01118 
<a name="l01119"></a>01119     <span class="comment">/* prove store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3)) */</span>
<a name="l01120"></a>01120     thm         = <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, antecedent, consequent);
<a name="l01121"></a>01121     printf(<span class="stringliteral">"prove: store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3))\n"</span>);
<a name="l01122"></a>01122     printf(<span class="stringliteral">"%s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, thm));
<a name="l01123"></a>01123     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01124"></a>01124 
<a name="l01125"></a>01125     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01126"></a>01126 }
<a name="l01127"></a>01127 
<a name="l01135"></a><a class="code" href="group__capi__ex.html#g94757cc6b9bf9e6050b86b2794319798">01135</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g94757cc6b9bf9e6050b86b2794319798" title="Show that distinct(a_0, ... , a_n) is unsatisfiable when a_i&amp;#39;s are arrays from...">array_example2</a>() 
<a name="l01136"></a>01136 {
<a name="l01137"></a>01137     Z3_context ctx;
<a name="l01138"></a>01138     Z3_sort bool_sort, array_sort;
<a name="l01139"></a>01139     Z3_ast      a[5];
<a name="l01140"></a>01140     Z3_ast      d;
<a name="l01141"></a>01141     <span class="keywordtype">unsigned</span>      i, n;
<a name="l01142"></a>01142 
<a name="l01143"></a>01143     printf(<span class="stringliteral">"\narray_example2\n"</span>);
<a name="l01144"></a>01144 
<a name="l01145"></a>01145     <span class="keywordflow">for</span> (n = 2; n &lt;= 5; n++) {
<a name="l01146"></a>01146         printf(<span class="stringliteral">"n = %d\n"</span>, n);
<a name="l01147"></a>01147         ctx = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01148"></a>01148         
<a name="l01149"></a>01149         bool_sort   = <a class="code" href="group__capi.html#gcdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx);
<a name="l01150"></a>01150         array_sort  = <a class="code" href="group__capi.html#gfe617994cce1b516f46128e448c84445" title="Create an array type.">Z3_mk_array_sort</a>(ctx, bool_sort, bool_sort);
<a name="l01151"></a>01151         
<a name="l01152"></a>01152         <span class="comment">/* create arrays */</span>
<a name="l01153"></a>01153         <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {
<a name="l01154"></a>01154             Z3_symbol s = <a class="code" href="group__capi.html#g3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx, i);
<a name="l01155"></a>01155             a[i]          = <a class="code" href="group__capi.html#g093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, s, array_sort);
<a name="l01156"></a>01156         }
<a name="l01157"></a>01157         
<a name="l01158"></a>01158         <span class="comment">/* assert distinct(a[0], ..., a[n]) */</span>
<a name="l01159"></a>01159         d = <a class="code" href="group__capi.html#ga076d3a668e0ec97d61744403153ecf7" title="Create an AST node representing distinct(args[0], ..., args[num_args-1]).">Z3_mk_distinct</a>(ctx, n, a);
<a name="l01160"></a>01160         printf(<span class="stringliteral">"%s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, d));
<a name="l01161"></a>01161         <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, d);
<a name="l01162"></a>01162 
<a name="l01163"></a>01163         <span class="comment">/* context is satisfiable if n &lt; 5 */</span>
<a name="l01164"></a>01164         <a class="code" href="group__capi__ex.html#g9dd6fa6c5fa72c0cd87eb5ec5a6c4965" title="Similar to check, but uses display_model instead of Z3_model_to_string.">check2</a>(ctx, n &lt; 5 ? Z3_L_TRUE : Z3_L_FALSE);
<a name="l01165"></a>01165         
<a name="l01166"></a>01166         <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01167"></a>01167     }
<a name="l01168"></a>01168 }
<a name="l01169"></a>01169 
<a name="l01173"></a><a class="code" href="group__capi__ex.html#gbadff2174e5e4af0a179365177222e00">01173</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gbadff2174e5e4af0a179365177222e00" title="Simple array type construction/deconstruction example.">array_example3</a>() 
<a name="l01174"></a>01174 {
<a name="l01175"></a>01175     Z3_context ctx;
<a name="l01176"></a>01176     Z3_sort bool_sort, int_sort, array_sort;
<a name="l01177"></a>01177     Z3_sort domain, range;
<a name="l01178"></a>01178     printf(<span class="stringliteral">"\narray_example3\n"</span>);
<a name="l01179"></a>01179 
<a name="l01180"></a>01180     ctx      = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01181"></a>01181 
<a name="l01182"></a>01182     bool_sort  = <a class="code" href="group__capi.html#gcdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx);
<a name="l01183"></a>01183     int_sort   = <a class="code" href="group__capi.html#g6cd426ab5748653b77d389fd3eac1015" title="Create an integer type.">Z3_mk_int_sort</a>(ctx); 
<a name="l01184"></a>01184     array_sort = <a class="code" href="group__capi.html#gfe617994cce1b516f46128e448c84445" title="Create an array type.">Z3_mk_array_sort</a>(ctx, int_sort, bool_sort);
<a name="l01185"></a>01185 
<a name="l01186"></a>01186     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#g6d694951de4c7f115ed472eb32ef963c" title="Return the sort kind (e.g., array, tuple, int, bool, etc).">Z3_get_sort_kind</a>(ctx, array_sort) != Z3_ARRAY_SORT) {
<a name="l01187"></a>01187         <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"type must be an array type"</span>);
<a name="l01188"></a>01188     }
<a name="l01189"></a>01189     
<a name="l01190"></a>01190     domain = <a class="code" href="group__capi.html#g9753605ed27131dee29abcfb21e1dc9a" title="Return the domain of the given array sort.">Z3_get_array_sort_domain</a>(ctx, array_sort);
<a name="l01191"></a>01191     range  = <a class="code" href="group__capi.html#g72832f8215d6232ce1fef9774d1bf192" title="Return the range of the given array sort.">Z3_get_array_sort_range</a>(ctx, array_sort);
<a name="l01192"></a>01192 
<a name="l01193"></a>01193     printf(<span class="stringliteral">"domain: "</span>);
<a name="l01194"></a>01194     <a class="code" href="group__capi__ex.html#g8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(ctx, stdout, domain);
<a name="l01195"></a>01195     printf(<span class="stringliteral">"\n"</span>);
<a name="l01196"></a>01196     printf(<span class="stringliteral">"range:  "</span>);
<a name="l01197"></a>01197     <a class="code" href="group__capi__ex.html#g8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(ctx, stdout, range);
<a name="l01198"></a>01198     printf(<span class="stringliteral">"\n"</span>);
<a name="l01199"></a>01199 
<a name="l01200"></a>01200         <span class="keywordflow">if</span> (int_sort != domain || bool_sort != range) {
<a name="l01201"></a>01201         <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"invalid array type"</span>);
<a name="l01202"></a>01202     }
<a name="l01203"></a>01203 
<a name="l01204"></a>01204     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01205"></a>01205 }
<a name="l01206"></a>01206 
<a name="l01210"></a><a class="code" href="group__capi__ex.html#gab866a1a179a7456a35f906afa854bcd">01210</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gab866a1a179a7456a35f906afa854bcd" title="Simple tuple type example. It creates a tuple that is a pair of real numbers.">tuple_example1</a>() 
<a name="l01211"></a>01211 {
<a name="l01212"></a>01212     Z3_context         ctx;
<a name="l01213"></a>01213     Z3_sort        real_sort, pair_sort;
<a name="l01214"></a>01214     Z3_symbol          mk_tuple_name;
<a name="l01215"></a>01215     Z3_func_decl  mk_tuple_decl;
<a name="l01216"></a>01216     Z3_symbol          proj_names[2]; 
<a name="l01217"></a>01217     Z3_sort        proj_sorts[2]; 
<a name="l01218"></a>01218     Z3_func_decl  proj_decls[2];
<a name="l01219"></a>01219     Z3_func_decl  get_x_decl, get_y_decl;
<a name="l01220"></a>01220 
<a name="l01221"></a>01221     printf(<span class="stringliteral">"\ntuple_example1\n"</span>);
<a name="l01222"></a>01222     
<a name="l01223"></a>01223     ctx       = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01224"></a>01224 
<a name="l01225"></a>01225     <a class="code" href="group__capi.html#ge46f21d7a46b1deeace6c2542a4ec6da" title="Log interaction to a file.">Z3_open_log</a>(ctx, <span class="stringliteral">"z3.log"</span>);
<a name="l01226"></a>01226     <a class="code" href="group__capi.html#g638c45019cbfa57c38238300431301fd" title="Enable trace messages to a file.">Z3_trace_to_file</a>(ctx, <span class="stringliteral">"z3.trace"</span>);
<a name="l01227"></a>01227 
<a name="l01228"></a>01228     real_sort = <a class="code" href="group__capi.html#g40ef93b9738485caed6dc84631c3c1a0" title="Create a real type.">Z3_mk_real_sort</a>(ctx);
<a name="l01229"></a>01229 
<a name="l01230"></a>01230     <span class="comment">/* Create pair (tuple) type */</span>
<a name="l01231"></a>01231     mk_tuple_name = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"mk_pair"</span>);
<a name="l01232"></a>01232     proj_names[0] = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"get_x"</span>);
<a name="l01233"></a>01233     proj_names[1] = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"get_y"</span>);
<a name="l01234"></a>01234     proj_sorts[0] = real_sort;
<a name="l01235"></a>01235     proj_sorts[1] = real_sort;
<a name="l01236"></a>01236     <span class="comment">/* Z3_mk_tuple_sort will set mk_tuple_decl and proj_decls */</span>
<a name="l01237"></a>01237     pair_sort     = <a class="code" href="group__capi.html#g7156b9c0a76a28fae46c81f8e3cdf0f1" title="Create a tuple type.">Z3_mk_tuple_sort</a>(ctx, mk_tuple_name, 2, proj_names, proj_sorts, &amp;mk_tuple_decl, proj_decls);
<a name="l01238"></a>01238     get_x_decl    = proj_decls[0]; <span class="comment">/* function that extracts the first element of a tuple. */</span>
<a name="l01239"></a>01239     get_y_decl    = proj_decls[1]; <span class="comment">/* function that extracts the second element of a tuple. */</span>
<a name="l01240"></a>01240     
<a name="l01241"></a>01241     printf(<span class="stringliteral">"tuple_sort: "</span>);
<a name="l01242"></a>01242     <a class="code" href="group__capi__ex.html#g8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(ctx, stdout, pair_sort);
<a name="l01243"></a>01243     printf(<span class="stringliteral">"\n"</span>);
<a name="l01244"></a>01244 
<a name="l01245"></a>01245     {
<a name="l01246"></a>01246         <span class="comment">/* prove that get_x(mk_pair(x,y)) == 1 implies x = 1*/</span>
<a name="l01247"></a>01247         Z3_ast app1, app2, x, y, one;
<a name="l01248"></a>01248         Z3_ast eq1, eq2, eq3, thm;
<a name="l01249"></a>01249         
<a name="l01250"></a>01250         x    = <a class="code" href="group__capi__ex.html#g440884a8a38a8b2201e4713862358aae" title="Create a real variable using the given name.">mk_real_var</a>(ctx, <span class="stringliteral">"x"</span>);
<a name="l01251"></a>01251         y    = <a class="code" href="group__capi__ex.html#g440884a8a38a8b2201e4713862358aae" title="Create a real variable using the given name.">mk_real_var</a>(ctx, <span class="stringliteral">"y"</span>);
<a name="l01252"></a>01252         app1 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, mk_tuple_decl, x, y);
<a name="l01253"></a>01253         app2 = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_x_decl, app1); 
<a name="l01254"></a>01254         one  = <a class="code" href="group__capi.html#gc8aca397e32ca33618d8024bff32948c" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">"1"</span>, real_sort);
<a name="l01255"></a>01255         eq1  = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, app2, one);
<a name="l01256"></a>01256         eq2  = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, one);
<a name="l01257"></a>01257         thm  = <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, eq1, eq2);
<a name="l01258"></a>01258         printf(<span class="stringliteral">"prove: get_x(mk_pair(x, y)) = 1 implies x = 1\n"</span>);
<a name="l01259"></a>01259         <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01260"></a>01260 
<a name="l01261"></a>01261         <span class="comment">/* disprove that get_x(mk_pair(x,y)) == 1 implies y = 1*/</span>
<a name="l01262"></a>01262         eq3  = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, y, one);
<a name="l01263"></a>01263         thm  = <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, eq1, eq3);
<a name="l01264"></a>01264         printf(<span class="stringliteral">"disprove: get_x(mk_pair(x, y)) = 1 implies y = 1\n"</span>);
<a name="l01265"></a>01265         <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#g1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01266"></a>01266     }
<a name="l01267"></a>01267 
<a name="l01268"></a>01268     {
<a name="l01269"></a>01269         <span class="comment">/* prove that get_x(p1) = get_x(p2) and get_y(p1) = get_y(p2) implies p1 = p2 */</span>
<a name="l01270"></a>01270         Z3_ast p1, p2, x1, x2, y1, y2;
<a name="l01271"></a>01271         Z3_ast antecedents[2];
<a name="l01272"></a>01272         Z3_ast antecedent, consequent, thm;
<a name="l01273"></a>01273         
<a name="l01274"></a>01274         p1             = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"p1"</span>, pair_sort);
<a name="l01275"></a>01275         p2             = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"p2"</span>, pair_sort);
<a name="l01276"></a>01276         x1             = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_x_decl, p1);
<a name="l01277"></a>01277         y1             = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_y_decl, p1);
<a name="l01278"></a>01278         x2             = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_x_decl, p2);
<a name="l01279"></a>01279         y2             = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_y_decl, p2);
<a name="l01280"></a>01280         antecedents[0] = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x1, x2);
<a name="l01281"></a>01281         antecedents[1] = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, y1, y2);
<a name="l01282"></a>01282         antecedent     = <a class="code" href="group__capi.html#gcde98ce4a8ed1dde50b9669db4838c61" title="Create an AST node representing args[0] and ... and args[num_args-1].">Z3_mk_and</a>(ctx, 2, antecedents);
<a name="l01283"></a>01283         consequent     = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, p1, p2);
<a name="l01284"></a>01284         thm            = <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, antecedent, consequent);
<a name="l01285"></a>01285         printf(<span class="stringliteral">"prove: get_x(p1) = get_x(p2) and get_y(p1) = get_y(p2) implies p1 = p2\n"</span>);
<a name="l01286"></a>01286         <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01287"></a>01287 
<a name="l01288"></a>01288         <span class="comment">/* disprove that get_x(p1) = get_x(p2) implies p1 = p2 */</span>
<a name="l01289"></a>01289         thm            = <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, antecedents[0], consequent);
<a name="l01290"></a>01290         printf(<span class="stringliteral">"disprove: get_x(p1) = get_x(p2) implies p1 = p2\n"</span>);
<a name="l01291"></a>01291         <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#g1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01292"></a>01292     }
<a name="l01293"></a>01293 
<a name="l01294"></a>01294     {
<a name="l01295"></a>01295         <span class="comment">/* demonstrate how to use the mk_tuple_update function */</span>
<a name="l01296"></a>01296         <span class="comment">/* prove that p2 = update(p1, 0, 10) implies get_x(p2) = 10 */</span>
<a name="l01297"></a>01297         Z3_ast p1, p2, one, ten, updt, x, y;
<a name="l01298"></a>01298         Z3_ast antecedent, consequent, thm;
<a name="l01299"></a>01299 
<a name="l01300"></a>01300         p1             = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"p1"</span>, pair_sort);
<a name="l01301"></a>01301         p2             = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"p2"</span>, pair_sort);
<a name="l01302"></a>01302         one            = <a class="code" href="group__capi.html#gc8aca397e32ca33618d8024bff32948c" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">"1"</span>, real_sort);
<a name="l01303"></a>01303         ten            = <a class="code" href="group__capi.html#gc8aca397e32ca33618d8024bff32948c" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">"10"</span>, real_sort);
<a name="l01304"></a>01304         updt           = <a class="code" href="group__capi__ex.html#g7e3e44186510e02e3fa143689fef6fd3" title="Z3 does not support explicitly tuple updates. They can be easily implemented as macros...">mk_tuple_update</a>(ctx, p1, 0, ten);
<a name="l01305"></a>01305         antecedent     = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, p2, updt);
<a name="l01306"></a>01306         x              = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_x_decl, p2);
<a name="l01307"></a>01307         consequent     = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, ten);
<a name="l01308"></a>01308         thm            = <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, antecedent, consequent);
<a name="l01309"></a>01309         printf(<span class="stringliteral">"prove: p2 = update(p1, 0, 10) implies get_x(p2) = 10\n"</span>);
<a name="l01310"></a>01310         <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01311"></a>01311 
<a name="l01312"></a>01312         <span class="comment">/* disprove that p2 = update(p1, 0, 10) implies get_y(p2) = 10 */</span>
<a name="l01313"></a>01313         y              = <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_y_decl, p2);
<a name="l01314"></a>01314         consequent     = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, y, ten);
<a name="l01315"></a>01315         thm            = <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, antecedent, consequent);
<a name="l01316"></a>01316         printf(<span class="stringliteral">"disprove: p2 = update(p1, 0, 10) implies get_y(p2) = 10\n"</span>);
<a name="l01317"></a>01317         <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#g1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01318"></a>01318     }
<a name="l01319"></a>01319 
<a name="l01320"></a>01320     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01321"></a>01321 }
<a name="l01322"></a>01322 
<a name="l01326"></a><a class="code" href="group__capi__ex.html#ga793cf13b8fcfdb908363f1890bc06ae">01326</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#ga793cf13b8fcfdb908363f1890bc06ae" title="Simple bit-vector example. This example disproves that x - 10 &amp;lt;= 0 IFF x &amp;lt;=...">bitvector_example1</a>() 
<a name="l01327"></a>01327 {
<a name="l01328"></a>01328     Z3_context         ctx;
<a name="l01329"></a>01329     Z3_sort        bv_sort;
<a name="l01330"></a>01330     Z3_ast             x, zero, ten, x_minus_ten, c1, c2, thm;
<a name="l01331"></a>01331 
<a name="l01332"></a>01332     printf(<span class="stringliteral">"\nbitvector_example1\n"</span>);
<a name="l01333"></a>01333     
<a name="l01334"></a>01334     ctx       = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01335"></a>01335     
<a name="l01336"></a>01336     bv_sort   = <a class="code" href="group__capi.html#geed000a1bbb84b6ca6fdaac6cf0c1688" title="Create a bit-vector type of the given size.">Z3_mk_bv_sort</a>(ctx, 32);
<a name="l01337"></a>01337     
<a name="l01338"></a>01338     x           = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"x"</span>, bv_sort);
<a name="l01339"></a>01339     zero        = <a class="code" href="group__capi.html#gc8aca397e32ca33618d8024bff32948c" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">"0"</span>, bv_sort);
<a name="l01340"></a>01340     ten         = <a class="code" href="group__capi.html#gc8aca397e32ca33618d8024bff32948c" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">"10"</span>, bv_sort);
<a name="l01341"></a>01341     x_minus_ten = <a class="code" href="group__capi.html#g688c9aa1347888c7a51be4e46c19178e" title="Standard two&amp;#39;s complement subtraction.">Z3_mk_bvsub</a>(ctx, x, ten);
<a name="l01342"></a>01342     <span class="comment">/* bvsle is signed less than or equal to */</span>
<a name="l01343"></a>01343     c1          = <a class="code" href="group__capi.html#gb7c026feb93e7d2eab180e96f1e6255d" title="Two&amp;#39;s complement signed less than or equal to.">Z3_mk_bvsle</a>(ctx, x, ten);
<a name="l01344"></a>01344     c2          = <a class="code" href="group__capi.html#gb7c026feb93e7d2eab180e96f1e6255d" title="Two&amp;#39;s complement signed less than or equal to.">Z3_mk_bvsle</a>(ctx, x_minus_ten, zero);
<a name="l01345"></a>01345     thm         = <a class="code" href="group__capi.html#g930a8e844d345fbebc498ac43a696042" title="Create an AST node representing t1 iff t2.">Z3_mk_iff</a>(ctx, c1, c2);
<a name="l01346"></a>01346     printf(<span class="stringliteral">"disprove: x - 10 &lt;= 0 IFF x &lt;= 10 for (32-bit) machine integers\n"</span>);
<a name="l01347"></a>01347     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#g1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01348"></a>01348     
<a name="l01349"></a>01349     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01350"></a>01350 }
<a name="l01351"></a>01351 
<a name="l01355"></a><a class="code" href="group__capi__ex.html#gb34a23f8c84c0235efb12c3d265c9398">01355</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gb34a23f8c84c0235efb12c3d265c9398" title="Find x and y such that: x ^ y - 103 == x * y.">bitvector_example2</a>()
<a name="l01356"></a>01356 {
<a name="l01357"></a>01357     Z3_context ctx = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01358"></a>01358  
<a name="l01359"></a>01359     <span class="comment">/* construct x ^ y - 103 == x * y */</span>
<a name="l01360"></a>01360     Z3_sort bv_sort = <a class="code" href="group__capi.html#geed000a1bbb84b6ca6fdaac6cf0c1688" title="Create a bit-vector type of the given size.">Z3_mk_bv_sort</a>(ctx, 32);
<a name="l01361"></a>01361     Z3_ast x = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"x"</span>, bv_sort);
<a name="l01362"></a>01362     Z3_ast y = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"y"</span>, bv_sort);
<a name="l01363"></a>01363     Z3_ast x_xor_y = <a class="code" href="group__capi.html#g0a3821ea00b1c762205f73e4bc29e7d8" title="Bitwise exclusive-or.">Z3_mk_bvxor</a>(ctx, x, y);
<a name="l01364"></a>01364     Z3_ast c103 = <a class="code" href="group__capi.html#gc8aca397e32ca33618d8024bff32948c" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">"103"</span>, bv_sort);
<a name="l01365"></a>01365     Z3_ast lhs = <a class="code" href="group__capi.html#g688c9aa1347888c7a51be4e46c19178e" title="Standard two&amp;#39;s complement subtraction.">Z3_mk_bvsub</a>(ctx, x_xor_y, c103);
<a name="l01366"></a>01366     Z3_ast rhs = <a class="code" href="group__capi.html#g6abd3dde2a1ceff1704cf7221a72258c" title="Standard two&amp;#39;s complement multiplication.">Z3_mk_bvmul</a>(ctx, x, y);
<a name="l01367"></a>01367     Z3_ast ctr = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, lhs, rhs);
<a name="l01368"></a>01368 
<a name="l01369"></a>01369     printf(<span class="stringliteral">"\nbitvector_example2\n"</span>);
<a name="l01370"></a>01370     printf(<span class="stringliteral">"find values of x and y, such that x ^ y - 103 == x * y\n"</span>);
<a name="l01371"></a>01371     
<a name="l01372"></a>01372     <span class="comment">/* add the constraint &lt;tt&gt;x ^ y - 103 == x * y&lt;\tt&gt; to the logical context */</span>
<a name="l01373"></a>01373     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, ctr);
<a name="l01374"></a>01374     
<a name="l01375"></a>01375     <span class="comment">/* find a model (i.e., values for x an y that satisfy the constraint */</span>
<a name="l01376"></a>01376     <a class="code" href="group__capi__ex.html#g4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l01377"></a>01377     
<a name="l01378"></a>01378     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01379"></a>01379 }
<a name="l01380"></a>01380 
<a name="l01384"></a><a class="code" href="group__capi__ex.html#g1380b031db05b0b63542acf627b6bd1e">01384</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g1380b031db05b0b63542acf627b6bd1e" title="Demonstrate how to use Z3_eval.">eval_example1</a>() 
<a name="l01385"></a>01385 {
<a name="l01386"></a>01386     Z3_context ctx;
<a name="l01387"></a>01387     Z3_ast x, y, two;
<a name="l01388"></a>01388     Z3_ast c1, c2;
<a name="l01389"></a>01389     Z3_model m;
<a name="l01390"></a>01390 
<a name="l01391"></a>01391     printf(<span class="stringliteral">"\neval_example1\n"</span>);
<a name="l01392"></a>01392     
<a name="l01393"></a>01393     ctx        = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01394"></a>01394     x          = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"x"</span>);
<a name="l01395"></a>01395     y          = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"y"</span>);
<a name="l01396"></a>01396     two        = <a class="code" href="group__capi__ex.html#gc55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 2);
<a name="l01397"></a>01397     
<a name="l01398"></a>01398     <span class="comment">/* assert x &lt; y */</span>
<a name="l01399"></a>01399     c1         = <a class="code" href="group__capi.html#g58a3dc67c5de52cf599c346803ba1534" title="Create less than.">Z3_mk_lt</a>(ctx, x, y);
<a name="l01400"></a>01400     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, c1);
<a name="l01401"></a>01401 
<a name="l01402"></a>01402     <span class="comment">/* assert x &gt; 2 */</span>
<a name="l01403"></a>01403     c2         = <a class="code" href="group__capi.html#g46167b86067586bb742c0557d7babfd3" title="Create greater than.">Z3_mk_gt</a>(ctx, x, two);
<a name="l01404"></a>01404     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, c2);
<a name="l01405"></a>01405 
<a name="l01406"></a>01406     <span class="comment">/* find model for the constraints above */</span>
<a name="l01407"></a>01407     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#gff310fef80ac8a82d0a51417e073ec0a" title="Check whether the given logical context is consistent or not.">Z3_check_and_get_model</a>(ctx, &amp;m) == Z3_L_TRUE) {
<a name="l01408"></a>01408         Z3_ast   x_plus_y;
<a name="l01409"></a>01409         Z3_ast   args[2] = {x, y};
<a name="l01410"></a>01410         Z3_ast v;
<a name="l01411"></a>01411         printf(<span class="stringliteral">"MODEL:\n%s"</span>, <a class="code" href="group__capi.html#gf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>(ctx, m));
<a name="l01412"></a>01412         x_plus_y = <a class="code" href="group__capi.html#g4e4ac0a4e53eee0b4b0ef159ed7d0cd5" title="Create an AST node representing args[0] + ... + args[num_args-1].">Z3_mk_add</a>(ctx, 2, args);
<a name="l01413"></a>01413         printf(<span class="stringliteral">"\nevaluating x+y\n"</span>);
<a name="l01414"></a>01414         <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#g47d3655283564918c85bda0b423b7f67" title="Evaluate the AST node t in the given model. Return Z3_TRUE if succeeded, and store...">Z3_eval</a>(ctx, m, x_plus_y, &amp;v)) {
<a name="l01415"></a>01415             printf(<span class="stringliteral">"result = "</span>);
<a name="l01416"></a>01416             <a class="code" href="group__capi__ex.html#g807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(ctx, stdout, v);
<a name="l01417"></a>01417             printf(<span class="stringliteral">"\n"</span>);
<a name="l01418"></a>01418         }
<a name="l01419"></a>01419         <span class="keywordflow">else</span> {
<a name="l01420"></a>01420             <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"failed to evaluate: x+y"</span>);
<a name="l01421"></a>01421         }
<a name="l01422"></a>01422         <a class="code" href="group__capi.html#g0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l01423"></a>01423     }
<a name="l01424"></a>01424     <span class="keywordflow">else</span> {
<a name="l01425"></a>01425         <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"the constraints are satisfiable"</span>);
<a name="l01426"></a>01426     }
<a name="l01427"></a>01427 
<a name="l01428"></a>01428     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01429"></a>01429 }
<a name="l01430"></a>01430 
<a name="l01434"></a><a class="code" href="group__capi__ex.html#g7a7c910ba34f5c87ec5bfdd87e5beb3f">01434</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g7a7c910ba34f5c87ec5bfdd87e5beb3f" title="Several logical context can be used simultaneously.">two_contexts_example1</a>() 
<a name="l01435"></a>01435 {
<a name="l01436"></a>01436     Z3_context ctx1, ctx2;
<a name="l01437"></a>01437     Z3_ast x1, x2;
<a name="l01438"></a>01438 
<a name="l01439"></a>01439     printf(<span class="stringliteral">"\ntwo_contexts_example1\n"</span>);
<a name="l01440"></a>01440     
<a name="l01441"></a>01441     <span class="comment">/* using the same (default) configuration to initialized both logical contexts. */</span>
<a name="l01442"></a>01442     ctx1 = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01443"></a>01443     ctx2 = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01444"></a>01444     
<a name="l01445"></a>01445     x1 = <a class="code" href="group__capi.html#g093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx1, <a class="code" href="group__capi.html#g3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx1,0), <a class="code" href="group__capi.html#gcdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx1));
<a name="l01446"></a>01446     x2 = <a class="code" href="group__capi.html#g093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx2, <a class="code" href="group__capi.html#g3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx2,0), <a class="code" href="group__capi.html#gcdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx2));
<a name="l01447"></a>01447 
<a name="l01448"></a>01448     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx1);
<a name="l01449"></a>01449     
<a name="l01450"></a>01450     <span class="comment">/* ctx2 can still be used. */</span>
<a name="l01451"></a>01451     printf(<span class="stringliteral">"%s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx2, x2));
<a name="l01452"></a>01452     
<a name="l01453"></a>01453     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx2);
<a name="l01454"></a>01454 }
<a name="l01455"></a>01455 
<a name="l01459"></a><a class="code" href="group__capi__ex.html#g2355864af38b0f159907209f00084cf1">01459</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g2355864af38b0f159907209f00084cf1" title="Demonstrates how error codes can be read insted of registering an error handler.">error_code_example1</a>() 
<a name="l01460"></a>01460 {
<a name="l01461"></a>01461     Z3_config cfg;
<a name="l01462"></a>01462     Z3_context ctx;
<a name="l01463"></a>01463     Z3_ast x;
<a name="l01464"></a>01464     Z3_model m;
<a name="l01465"></a>01465     Z3_ast v;
<a name="l01466"></a>01466     Z3_func_decl x_decl;
<a name="l01467"></a>01467     <span class="keyword">const</span> <span class="keywordtype">char</span> * str;
<a name="l01468"></a>01468 
<a name="l01469"></a>01469     printf(<span class="stringliteral">"\nerror_code_example1\n"</span>);
<a name="l01470"></a>01470     
<a name="l01471"></a>01471     <span class="comment">/* Do not register an error handler, as we want to use Z3_get_error_code manually */</span>
<a name="l01472"></a>01472     cfg = <a class="code" href="group__capi.html#g7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l01473"></a>01473     ctx = <a class="code" href="group__capi__ex.html#g4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, NULL);
<a name="l01474"></a>01474     <a class="code" href="group__capi.html#g5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l01475"></a>01475 
<a name="l01476"></a>01476     x          = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"x"</span>);
<a name="l01477"></a>01477     x_decl     = <a class="code" href="group__capi.html#g4ffab51c30484a32edc65194573cfd28" title="Return the declaration of a constant or function application.">Z3_get_app_decl</a>(ctx, <a class="code" href="group__capi.html#gf9345fd0822d7e9928dd4ab14a09765b" title="Convert an AST into a APP_AST. This is just type casting.">Z3_to_app</a>(ctx, x));
<a name="l01478"></a>01478     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, x);
<a name="l01479"></a>01479     
<a name="l01480"></a>01480     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#gff310fef80ac8a82d0a51417e073ec0a" title="Check whether the given logical context is consistent or not.">Z3_check_and_get_model</a>(ctx, &amp;m) != Z3_L_TRUE) {
<a name="l01481"></a>01481         <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"unexpected result"</span>);
<a name="l01482"></a>01482     }
<a name="l01483"></a>01483 
<a name="l01484"></a>01484         <span class="keywordflow">if</span> (!<a class="code" href="group__capi.html#g0cdba60a991c137e8cc5d1a921e3a990" title="Return the value of the given constant or function in the given model.">Z3_eval_func_decl</a>(ctx, m, x_decl, &amp;v)) {
<a name="l01485"></a>01485                 <a class="code" href="group__capi__ex.html#ga325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">"did not obtain value for declaration.\n"</span>);
<a name="l01486"></a>01486         }
<a name="l01487"></a>01487     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#g8ac771e68b28d2c86f40aa84889b3807" title="Return the error code for the last API call.">Z3_get_error_code</a>(ctx) == Z3_OK) {
<a name="l01488"></a>01488         printf(<span class="stringliteral">"last call succeeded.\n"</span>);
<a name="l01489"></a>01489     }
<a name="l01490"></a>01490     <span class="comment">/* The following call will fail since the value of x is a boolean */</span>
<a name="l01491"></a>01491     str = <a class="code" href="group__capi.html#g94617ef18fa7157e1a3f85db625d2f4b" title="Return numeral value, as a string of a numeric constant term.">Z3_get_numeral_string</a>(ctx, v);
<a name="l01492"></a>01492     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#g8ac771e68b28d2c86f40aa84889b3807" title="Return the error code for the last API call.">Z3_get_error_code</a>(ctx) != Z3_OK) {
<a name="l01493"></a>01493         printf(<span class="stringliteral">"last call failed.\n"</span>);
<a name="l01494"></a>01494     }
<a name="l01495"></a>01495     <a class="code" href="group__capi.html#g0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l01496"></a>01496     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01497"></a>01497 }
<a name="l01498"></a>01498 
<a name="l01502"></a><a class="code" href="group__capi__ex.html#g6fa0a732602aa294249b126f9eb2928d">01502</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g6fa0a732602aa294249b126f9eb2928d" title="Demonstrates how error handlers can be used.">error_code_example2</a>() 
<a name="l01503"></a>01503 {
<a name="l01504"></a>01504     Z3_config cfg;
<a name="l01505"></a>01505     Z3_context ctx = NULL;
<a name="l01506"></a>01506     <span class="keywordtype">int</span> r;
<a name="l01507"></a>01507 
<a name="l01508"></a>01508     printf(<span class="stringliteral">"\nerror_code_example2\n"</span>);
<a name="l01509"></a>01509     
<a name="l01510"></a>01510     <span class="comment">/* low tech try&amp;catch */</span>
<a name="l01511"></a>01511     r = setjmp(g_catch_buffer);
<a name="l01512"></a>01512     <span class="keywordflow">if</span> (r == 0) {
<a name="l01513"></a>01513         Z3_ast x, y, app;
<a name="l01514"></a>01514         
<a name="l01515"></a>01515         cfg = <a class="code" href="group__capi.html#g7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l01516"></a>01516         ctx = <a class="code" href="group__capi__ex.html#g4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, <a class="code" href="group__capi__ex.html#gf705d2fe12ca17a0c9fb12e6cc1f13d0" title="Low tech exceptions.">throw_z3_error</a>);
<a name="l01517"></a>01517         <a class="code" href="group__capi.html#g5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l01518"></a>01518         
<a name="l01519"></a>01519         x   = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"x"</span>);
<a name="l01520"></a>01520         y   = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"y"</span>);
<a name="l01521"></a>01521         printf(<span class="stringliteral">"before Z3_mk_iff\n"</span>); 
<a name="l01522"></a>01522         <span class="comment">/* the next call will produce an error */</span>
<a name="l01523"></a>01523         app = <a class="code" href="group__capi.html#g930a8e844d345fbebc498ac43a696042" title="Create an AST node representing t1 iff t2.">Z3_mk_iff</a>(ctx, x, y);
<a name="l01524"></a>01524         <a class="code" href="group__capi__ex.html#g98a996adc7ad22a8dc75b936e74b73ca" title="exit if unreachable code was reached.">unreachable</a>();
<a name="l01525"></a>01525         <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01526"></a>01526     }
<a name="l01527"></a>01527     <span class="keywordflow">else</span> {
<a name="l01528"></a>01528         printf(<span class="stringliteral">"Z3 error: %s.\n"</span>, <a class="code" href="group__capi.html#gf06357c49299efb8a0bdaeb3bc96c6d6" title="Return a string describing the given error code.">Z3_get_error_msg</a>((<a class="code" href="group__capi.html#ga9f9e7b1b5b81381fab96debbaaa638f" title="Z3 error codes (See Z3_get_error_code).">Z3_error_code</a>)r));
<a name="l01529"></a>01529         <span class="keywordflow">if</span> (cfg != NULL) {
<a name="l01530"></a>01530             <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01531"></a>01531         }
<a name="l01532"></a>01532     }
<a name="l01533"></a>01533 }
<a name="l01534"></a>01534 
<a name="l01538"></a><a class="code" href="group__capi__ex.html#g34d5e8e536a5649693f8cefa4805a81e">01538</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g34d5e8e536a5649693f8cefa4805a81e" title="Demonstrates how to use the SMTLIB parser.">parser_example1</a>() 
<a name="l01539"></a>01539 {
<a name="l01540"></a>01540     Z3_context ctx;
<a name="l01541"></a>01541     <span class="keywordtype">unsigned</span> i, num_formulas;
<a name="l01542"></a>01542 
<a name="l01543"></a>01543     printf(<span class="stringliteral">"\nparser_example1\n"</span>);
<a name="l01544"></a>01544     
<a name="l01545"></a>01545     ctx        = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01546"></a>01546    
<a name="l01547"></a>01547     <a class="code" href="group__capi.html#g17a2c6d55bf77cbdcf202044b31a97d5" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l01548"></a>01548                            <span class="stringliteral">"(benchmark tst :extrafuns ((x Int) (y Int)) :formula (&gt; x y) :formula (&gt; x 0))"</span>,
<a name="l01549"></a>01549                            0, 0, 0,
<a name="l01550"></a>01550                            0, 0, 0);
<a name="l01551"></a>01551     num_formulas = <a class="code" href="group__capi.html#g5dd0dfb9ec1fcc7edba1e86a6ff98a77" title="Return the number of SMTLIB formulas parsed by the last call to Z3_parse_smtlib_string...">Z3_get_smtlib_num_formulas</a>(ctx);
<a name="l01552"></a>01552     <span class="keywordflow">for</span> (i = 0; i &lt; num_formulas; i++) {
<a name="l01553"></a>01553         Z3_ast f = <a class="code" href="group__capi.html#g0ac42d0fa1874e4e773c89a56066f242" title="Return the i-th formula parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_formula</a>(ctx, i);
<a name="l01554"></a>01554         printf(<span class="stringliteral">"formula %d: %s\n"</span>, i, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, f));
<a name="l01555"></a>01555         <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, f);
<a name="l01556"></a>01556     }
<a name="l01557"></a>01557     
<a name="l01558"></a>01558     <a class="code" href="group__capi__ex.html#g4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l01559"></a>01559 
<a name="l01560"></a>01560     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01561"></a>01561 }
<a name="l01562"></a>01562 
<a name="l01566"></a><a class="code" href="group__capi__ex.html#g9c8fd60a787198a88ebcefc0282ea3cd">01566</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g9c8fd60a787198a88ebcefc0282ea3cd" title="Demonstrates how to initialize the parser symbol table.">parser_example2</a>() 
<a name="l01567"></a>01567 {
<a name="l01568"></a>01568     Z3_context ctx;
<a name="l01569"></a>01569     Z3_ast x, y;
<a name="l01570"></a>01570     Z3_symbol         names[2];
<a name="l01571"></a>01571     Z3_func_decl decls[2];
<a name="l01572"></a>01572     Z3_ast f;
<a name="l01573"></a>01573 
<a name="l01574"></a>01574     printf(<span class="stringliteral">"\nparser_example2\n"</span>);
<a name="l01575"></a>01575 
<a name="l01576"></a>01576     ctx        = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01577"></a>01577 
<a name="l01578"></a>01578     <span class="comment">/* Z3_enable_arithmetic doesn't need to be invoked in this example</span>
<a name="l01579"></a>01579 <span class="comment">       because it will be implicitly invoked by mk_int_var.</span>
<a name="l01580"></a>01580 <span class="comment">    */</span>
<a name="l01581"></a>01581     
<a name="l01582"></a>01582     x        = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"x"</span>);
<a name="l01583"></a>01583     decls[0] = <a class="code" href="group__capi.html#g4ffab51c30484a32edc65194573cfd28" title="Return the declaration of a constant or function application.">Z3_get_app_decl</a>(ctx, <a class="code" href="group__capi.html#gf9345fd0822d7e9928dd4ab14a09765b" title="Convert an AST into a APP_AST. This is just type casting.">Z3_to_app</a>(ctx, x));
<a name="l01584"></a>01584     y        = <a class="code" href="group__capi__ex.html#ga7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">"y"</span>);
<a name="l01585"></a>01585     decls[1] = <a class="code" href="group__capi.html#g4ffab51c30484a32edc65194573cfd28" title="Return the declaration of a constant or function application.">Z3_get_app_decl</a>(ctx, <a class="code" href="group__capi.html#gf9345fd0822d7e9928dd4ab14a09765b" title="Convert an AST into a APP_AST. This is just type casting.">Z3_to_app</a>(ctx, y));
<a name="l01586"></a>01586     
<a name="l01587"></a>01587     names[0] = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"a"</span>);
<a name="l01588"></a>01588     names[1] = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"b"</span>);
<a name="l01589"></a>01589     
<a name="l01590"></a>01590     <a class="code" href="group__capi.html#g17a2c6d55bf77cbdcf202044b31a97d5" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l01591"></a>01591                            <span class="stringliteral">"(benchmark tst :formula (&gt; a b))"</span>,
<a name="l01592"></a>01592                            0, 0, 0,
<a name="l01593"></a>01593                            <span class="comment">/* 'x' and 'y' declarations are inserted as 'a' and 'b' into the parser symbol table. */</span>
<a name="l01594"></a>01594                            2, names, decls);
<a name="l01595"></a>01595     f = <a class="code" href="group__capi.html#g0ac42d0fa1874e4e773c89a56066f242" title="Return the i-th formula parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_formula</a>(ctx, 0);
<a name="l01596"></a>01596     printf(<span class="stringliteral">"formula: %s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, f));
<a name="l01597"></a>01597     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, f);
<a name="l01598"></a>01598     <a class="code" href="group__capi__ex.html#g4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l01599"></a>01599 
<a name="l01600"></a>01600     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01601"></a>01601 }
<a name="l01602"></a>01602 
<a name="l01606"></a><a class="code" href="group__capi__ex.html#gad0cce961cb43f47950149c5bb3729ae">01606</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gad0cce961cb43f47950149c5bb3729ae" title="Demonstrates how to initialize the parser symbol table.">parser_example3</a>() 
<a name="l01607"></a>01607 {
<a name="l01608"></a>01608     Z3_config  cfg;
<a name="l01609"></a>01609     Z3_context ctx;
<a name="l01610"></a>01610     Z3_sort       int_sort;
<a name="l01611"></a>01611     Z3_symbol         g_name;
<a name="l01612"></a>01612     Z3_sort       g_domain[2];
<a name="l01613"></a>01613     Z3_func_decl g;
<a name="l01614"></a>01614     Z3_ast            thm;
<a name="l01615"></a>01615 
<a name="l01616"></a>01616     printf(<span class="stringliteral">"\nparser_example3\n"</span>);
<a name="l01617"></a>01617 
<a name="l01618"></a>01618     cfg = <a class="code" href="group__capi.html#g7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l01619"></a>01619     <span class="comment">/* See quantifer_example1 */</span>
<a name="l01620"></a>01620     <a class="code" href="group__capi.html#g001ade87a1671fe77d7e53ed0f4f1ec3" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">"MODEL"</span>, <span class="stringliteral">"true"</span>);
<a name="l01621"></a>01621     ctx = <a class="code" href="group__capi__ex.html#g4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, <a class="code" href="group__capi__ex.html#g0f737ceb3f2e9e36496a3c39c7aa2bdf" title="Simpler error handler.">error_handler</a>);
<a name="l01622"></a>01622     <a class="code" href="group__capi.html#g5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l01623"></a>01623 
<a name="l01624"></a>01624     <span class="comment">/* declare function g */</span>
<a name="l01625"></a>01625     int_sort    = <a class="code" href="group__capi.html#g6cd426ab5748653b77d389fd3eac1015" title="Create an integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l01626"></a>01626     g_name      = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"g"</span>);
<a name="l01627"></a>01627     g_domain[0] = int_sort;
<a name="l01628"></a>01628     g_domain[1] = int_sort;
<a name="l01629"></a>01629     g           = <a class="code" href="group__capi.html#ga5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, g_name, 2, g_domain, int_sort);
<a name="l01630"></a>01630     
<a name="l01631"></a>01631     <a class="code" href="group__capi__ex.html#g7cc571ff97eb60e06c6a6aff9b6c8c69" title="Assert the axiom: function f is commutative.">assert_comm_axiom</a>(ctx, g);
<a name="l01632"></a>01632 
<a name="l01633"></a>01633     <a class="code" href="group__capi.html#g17a2c6d55bf77cbdcf202044b31a97d5" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l01634"></a>01634                            <span class="stringliteral">"(benchmark tst :formula (forall (x Int) (y Int) (implies (= x y) (= (g x 0) (g 0 y)))))"</span>,
<a name="l01635"></a>01635                            0, 0, 0,
<a name="l01636"></a>01636                            1, &amp;g_name, &amp;g);
<a name="l01637"></a>01637     thm = <a class="code" href="group__capi.html#g0ac42d0fa1874e4e773c89a56066f242" title="Return the i-th formula parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_formula</a>(ctx, 0);
<a name="l01638"></a>01638     printf(<span class="stringliteral">"formula: %s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, thm));
<a name="l01639"></a>01639     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01640"></a>01640 
<a name="l01641"></a>01641     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01642"></a>01642 }
<a name="l01643"></a>01643 
<a name="l01647"></a><a class="code" href="group__capi__ex.html#gb1d78024df78dbb10723537c15647aed">01647</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gb1d78024df78dbb10723537c15647aed" title="Display the declarations, assumptions and formulas in a SMT-LIB string.">parser_example4</a>() 
<a name="l01648"></a>01648 {
<a name="l01649"></a>01649     Z3_context ctx;
<a name="l01650"></a>01650     <span class="keywordtype">unsigned</span> i, num_decls, num_assumptions, num_formulas;
<a name="l01651"></a>01651 
<a name="l01652"></a>01652     printf(<span class="stringliteral">"\nparser_example4\n"</span>);
<a name="l01653"></a>01653     
<a name="l01654"></a>01654     ctx        = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01655"></a>01655     
<a name="l01656"></a>01656     <a class="code" href="group__capi.html#g17a2c6d55bf77cbdcf202044b31a97d5" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l01657"></a>01657                            <span class="stringliteral">"(benchmark tst :extrafuns ((x Int) (y Int)) :assumption (= x 20) :formula (&gt; x y) :formula (&gt; x 0))"</span>,
<a name="l01658"></a>01658                            0, 0, 0,
<a name="l01659"></a>01659                            0, 0, 0);
<a name="l01660"></a>01660     num_decls = <a class="code" href="group__capi.html#g33fc0f55a4d60408a6e15d89da5b1cbe" title="Return the number of declarations parsed by Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_num_decls</a>(ctx);
<a name="l01661"></a>01661     <span class="keywordflow">for</span> (i = 0; i &lt; num_decls; i++) {
<a name="l01662"></a>01662         Z3_func_decl d = <a class="code" href="group__capi.html#g9cb99b7d3b0ff5ea324f799c660ac3cb" title="Return the i-th declaration parsed by the last call to Z3_parse_smtlib_string or...">Z3_get_smtlib_decl</a>(ctx, i);
<a name="l01663"></a>01663         printf(<span class="stringliteral">"declaration %d: %s\n"</span>, i, Z3_func_decl_to_string(ctx, d));
<a name="l01664"></a>01664     }
<a name="l01665"></a>01665     num_assumptions = <a class="code" href="group__capi.html#ga6682931827a2af6413c2ad6e57a01b4" title="Return the number of SMTLIB assumptions parsed by Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_num_assumptions</a>(ctx);
<a name="l01666"></a>01666     <span class="keywordflow">for</span> (i = 0; i &lt; num_assumptions; i++) {
<a name="l01667"></a>01667         Z3_ast a = <a class="code" href="group__capi.html#g00764430965b47fbcba657305e1dd820" title="Return the i-th assumption parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_assumption</a>(ctx, i);
<a name="l01668"></a>01668         printf(<span class="stringliteral">"assumption %d: %s\n"</span>, i, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, a));
<a name="l01669"></a>01669     }
<a name="l01670"></a>01670     num_formulas = <a class="code" href="group__capi.html#g5dd0dfb9ec1fcc7edba1e86a6ff98a77" title="Return the number of SMTLIB formulas parsed by the last call to Z3_parse_smtlib_string...">Z3_get_smtlib_num_formulas</a>(ctx);
<a name="l01671"></a>01671     <span class="keywordflow">for</span> (i = 0; i &lt; num_formulas; i++) {
<a name="l01672"></a>01672         Z3_ast f = <a class="code" href="group__capi.html#g0ac42d0fa1874e4e773c89a56066f242" title="Return the i-th formula parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_formula</a>(ctx, i);
<a name="l01673"></a>01673         printf(<span class="stringliteral">"formula %d: %s\n"</span>, i, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, f));
<a name="l01674"></a>01674     }
<a name="l01675"></a>01675     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01676"></a>01676 }
<a name="l01677"></a>01677 
<a name="l01681"></a><a class="code" href="group__capi__ex.html#gb9594032459f28272bbc74fe5e2c54fc">01681</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gb9594032459f28272bbc74fe5e2c54fc" title="Demonstrates how to handle parser errors using Z3 error handling support.">parser_example5</a>() 
<a name="l01682"></a>01682 {
<a name="l01683"></a>01683     Z3_config  cfg;
<a name="l01684"></a>01684     Z3_context ctx = NULL;
<a name="l01685"></a>01685     <span class="keywordtype">int</span> r;
<a name="l01686"></a>01686 
<a name="l01687"></a>01687     printf(<span class="stringliteral">"\nparser_example5\n"</span>);
<a name="l01688"></a>01688 
<a name="l01689"></a>01689     r = setjmp(g_catch_buffer);
<a name="l01690"></a>01690     <span class="keywordflow">if</span> (r == 0) {
<a name="l01691"></a>01691         cfg = <a class="code" href="group__capi.html#g7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l01692"></a>01692         ctx = <a class="code" href="group__capi__ex.html#g4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, <a class="code" href="group__capi__ex.html#gf705d2fe12ca17a0c9fb12e6cc1f13d0" title="Low tech exceptions.">throw_z3_error</a>);
<a name="l01693"></a>01693         <a class="code" href="group__capi.html#g5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l01694"></a>01694                 
<a name="l01695"></a>01695         <a class="code" href="group__capi.html#g17a2c6d55bf77cbdcf202044b31a97d5" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l01696"></a>01696                                <span class="comment">/* the following string has a parsing error: missing parenthesis */</span>
<a name="l01697"></a>01697                                <span class="stringliteral">"(benchmark tst :extrafuns ((x Int (y Int)) :formula (&gt; x y) :formula (&gt; x 0))"</span>,
<a name="l01698"></a>01698                                0, 0, 0,
<a name="l01699"></a>01699                                0, 0, 0);
<a name="l01700"></a>01700         <a class="code" href="group__capi__ex.html#g98a996adc7ad22a8dc75b936e74b73ca" title="exit if unreachable code was reached.">unreachable</a>();
<a name="l01701"></a>01701         <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01702"></a>01702     }
<a name="l01703"></a>01703     <span class="keywordflow">else</span> {
<a name="l01704"></a>01704         printf(<span class="stringliteral">"Z3 error: %s.\n"</span>, <a class="code" href="group__capi.html#gf06357c49299efb8a0bdaeb3bc96c6d6" title="Return a string describing the given error code.">Z3_get_error_msg</a>((<a class="code" href="group__capi.html#ga9f9e7b1b5b81381fab96debbaaa638f" title="Z3 error codes (See Z3_get_error_code).">Z3_error_code</a>)r));
<a name="l01705"></a>01705         <span class="keywordflow">if</span> (ctx != NULL) {
<a name="l01706"></a>01706             <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01707"></a>01707         }
<a name="l01708"></a>01708     }
<a name="l01709"></a>01709 }
<a name="l01710"></a>01710  
<a name="l01714"></a><a class="code" href="group__capi__ex.html#gfa3f89e53c339dda8c0a9b4b126139f7">01714</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gfa3f89e53c339dda8c0a9b4b126139f7" title="Test ite-term (if-then-else terms).">ite_example</a>() 
<a name="l01715"></a>01715 {
<a name="l01716"></a>01716     Z3_context ctx;
<a name="l01717"></a>01717     Z3_ast f, one, zero, ite;
<a name="l01718"></a>01718     
<a name="l01719"></a>01719     printf(<span class="stringliteral">"\nite_example\n"</span>);
<a name="l01720"></a>01720  
<a name="l01721"></a>01721     ctx = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01722"></a>01722     
<a name="l01723"></a>01723     f    = <a class="code" href="group__capi.html#g5952ac17671117a02001fed6575c778d" title="Create an AST node representing false.">Z3_mk_false</a>(ctx);
<a name="l01724"></a>01724     one  = <a class="code" href="group__capi__ex.html#gc55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 1);
<a name="l01725"></a>01725     zero = <a class="code" href="group__capi__ex.html#gc55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 0);
<a name="l01726"></a>01726     ite  = <a class="code" href="group__capi.html#g94417eed5c36e1ad48bcfc8ad6e83547" title="Create an AST node representing an if-then-else: ite(t1, t2, t3).">Z3_mk_ite</a>(ctx, f, one, zero);
<a name="l01727"></a>01727     
<a name="l01728"></a>01728     printf(<span class="stringliteral">"term: %s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, ite));
<a name="l01729"></a>01729 
<a name="l01730"></a>01730     <span class="comment">/* delete logical context */</span>
<a name="l01731"></a>01731     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01732"></a>01732 }
<a name="l01733"></a>01733 
<a name="l01737"></a><a class="code" href="group__capi__ex.html#g850fd4407bd8d1e508cc09b4efce6085">01737</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g850fd4407bd8d1e508cc09b4efce6085" title="Create an enumeration data type.">enum_example</a>() {
<a name="l01738"></a>01738     Z3_context ctx = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01739"></a>01739     Z3_sort fruit;
<a name="l01740"></a>01740     Z3_symbol name = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"fruit"</span>);
<a name="l01741"></a>01741     Z3_symbol enum_names[3];
<a name="l01742"></a>01742     Z3_func_decl enum_consts[3];
<a name="l01743"></a>01743     Z3_func_decl enum_testers[3];
<a name="l01744"></a>01744     Z3_ast apple, orange, banana, fruity;
<a name="l01745"></a>01745     Z3_ast ors[3];
<a name="l01746"></a>01746     
<a name="l01747"></a>01747     printf(<span class="stringliteral">"\nenum_example\n"</span>);
<a name="l01748"></a>01748  
<a name="l01749"></a>01749     enum_names[0] = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx,<span class="stringliteral">"apple"</span>);
<a name="l01750"></a>01750     enum_names[1] = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx,<span class="stringliteral">"banana"</span>);
<a name="l01751"></a>01751     enum_names[2] = <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx,<span class="stringliteral">"orange"</span>);
<a name="l01752"></a>01752 
<a name="l01753"></a>01753     fruit = <a class="code" href="group__capi.html#g8d4c1550f5f1bdefbe957bcd0ea4324a" title="Create a enumeration sort.">Z3_mk_enumeration_sort</a>(ctx, name, 3, enum_names, enum_consts, enum_testers);
<a name="l01754"></a>01754        
<a name="l01755"></a>01755     printf(<span class="stringliteral">"%s\n"</span>, Z3_func_decl_to_string(ctx, enum_consts[0]));
<a name="l01756"></a>01756     printf(<span class="stringliteral">"%s\n"</span>, Z3_func_decl_to_string(ctx, enum_consts[1]));
<a name="l01757"></a>01757     printf(<span class="stringliteral">"%s\n"</span>, Z3_func_decl_to_string(ctx, enum_consts[2]));
<a name="l01758"></a>01758 
<a name="l01759"></a>01759     printf(<span class="stringliteral">"%s\n"</span>, Z3_func_decl_to_string(ctx, enum_testers[0]));
<a name="l01760"></a>01760     printf(<span class="stringliteral">"%s\n"</span>, Z3_func_decl_to_string(ctx, enum_testers[1]));
<a name="l01761"></a>01761     printf(<span class="stringliteral">"%s\n"</span>, Z3_func_decl_to_string(ctx, enum_testers[2]));
<a name="l01762"></a>01762 
<a name="l01763"></a>01763     apple  = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_consts[0], 0, 0);
<a name="l01764"></a>01764     banana = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_consts[1], 0, 0);
<a name="l01765"></a>01765     orange = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_consts[2], 0, 0);
<a name="l01766"></a>01766 
<a name="l01767"></a>01767     <span class="comment">/* Apples are different from oranges */</span>
<a name="l01768"></a>01768     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, apple, orange)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01769"></a>01769 
<a name="l01770"></a>01770     <span class="comment">/* Apples pass the apple test */</span>
<a name="l01771"></a>01771     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_testers[0], 1, &amp;apple), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01772"></a>01772 
<a name="l01773"></a>01773     <span class="comment">/* Oranges fail the apple test */</span>
<a name="l01774"></a>01774     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_testers[0], 1, &amp;orange), <a class="code" href="group__capi.html#g1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01775"></a>01775     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_testers[0], 1, &amp;orange)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01776"></a>01776 
<a name="l01777"></a>01777     fruity = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"fruity"</span>, fruit);
<a name="l01778"></a>01778 
<a name="l01779"></a>01779     <span class="comment">/* If something is fruity, then it is an apple, banana, or orange */</span>
<a name="l01780"></a>01780     ors[0] = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, fruity, apple);
<a name="l01781"></a>01781     ors[1] = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, fruity, banana);
<a name="l01782"></a>01782     ors[2] = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, fruity, orange);
<a name="l01783"></a>01783 
<a name="l01784"></a>01784     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 3, ors), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01785"></a>01785 
<a name="l01786"></a>01786     <span class="comment">/* delete logical context */</span>
<a name="l01787"></a>01787     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01788"></a>01788 }
<a name="l01789"></a>01789 
<a name="l01793"></a><a class="code" href="group__capi__ex.html#gb3287b9c46ad438c87aa1f42b0e0dea8">01793</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#gb3287b9c46ad438c87aa1f42b0e0dea8" title="Create a list datatype.">list_example</a>() {
<a name="l01794"></a>01794     Z3_context ctx = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01795"></a>01795     Z3_sort int_ty, int_list;
<a name="l01796"></a>01796     Z3_func_decl nil_decl, is_nil_decl, cons_decl, is_cons_decl, head_decl, tail_decl;
<a name="l01797"></a>01797     Z3_ast nil, l1, l2, x, y, u, v, fml, fml1;
<a name="l01798"></a>01798     Z3_ast ors[2];
<a name="l01799"></a>01799     
<a name="l01800"></a>01800 
<a name="l01801"></a>01801     printf(<span class="stringliteral">"\nlist_example\n"</span>);
<a name="l01802"></a>01802 
<a name="l01803"></a>01803     int_ty = <a class="code" href="group__capi.html#g6cd426ab5748653b77d389fd3eac1015" title="Create an integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l01804"></a>01804 
<a name="l01805"></a>01805     int_list = <a class="code" href="group__capi.html#g7026ae7f8f1e8f50a8103acdc723d3c0" title="Create a list sort.">Z3_mk_list_sort</a>(ctx, <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"int_list"</span>), int_ty,
<a name="l01806"></a>01806                                &amp;nil_decl, &amp;is_nil_decl, &amp;cons_decl, &amp;is_cons_decl, &amp;head_decl, &amp;tail_decl);
<a name="l01807"></a>01807                     
<a name="l01808"></a>01808     nil = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, nil_decl, 0, 0);
<a name="l01809"></a>01809     l1 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, <a class="code" href="group__capi__ex.html#gc55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 1), nil);
<a name="l01810"></a>01810     l2 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, <a class="code" href="group__capi__ex.html#gc55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 2), nil);
<a name="l01811"></a>01811 
<a name="l01812"></a>01812     <span class="comment">/* nil != cons(1, nil) */</span>
<a name="l01813"></a>01813     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, nil, l1)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01814"></a>01814 
<a name="l01815"></a>01815     <span class="comment">/* cons(2,nil) != cons(1, nil) */</span>
<a name="l01816"></a>01816     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, l1, l2)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01817"></a>01817 
<a name="l01818"></a>01818     <span class="comment">/* cons(x,nil) = cons(y, nil) =&gt; x = y */</span>
<a name="l01819"></a>01819     x = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"x"</span>, int_ty);
<a name="l01820"></a>01820     y = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"y"</span>, int_ty);    
<a name="l01821"></a>01821     l1 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, x, nil);
<a name="l01822"></a>01822         l2 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, y, nil);
<a name="l01823"></a>01823     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01824"></a>01824 
<a name="l01825"></a>01825     <span class="comment">/* cons(x,u) = cons(x, v) =&gt; u = v */</span>
<a name="l01826"></a>01826     u = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"u"</span>, int_list);
<a name="l01827"></a>01827     v = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"v"</span>, int_list);    
<a name="l01828"></a>01828     l1 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, x, u);
<a name="l01829"></a>01829         l2 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, y, v);
<a name="l01830"></a>01830     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, v)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01831"></a>01831     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01832"></a>01832 
<a name="l01833"></a>01833     <span class="comment">/* is_nil(u) or is_cons(u) */</span>
<a name="l01834"></a>01834     ors[0] = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_nil_decl, 1, &amp;u);
<a name="l01835"></a>01835     ors[1] = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_cons_decl, 1, &amp;u);
<a name="l01836"></a>01836     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, ors), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01837"></a>01837 
<a name="l01838"></a>01838     <span class="comment">/* occurs check u != cons(x,u) */</span>    
<a name="l01839"></a>01839     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, l1)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01840"></a>01840 
<a name="l01841"></a>01841     <span class="comment">/* destructors: is_cons(u) =&gt; u = cons(head(u),tail(u)) */</span>
<a name="l01842"></a>01842     fml1 = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, head_decl, u), <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, tail_decl, u)));
<a name="l01843"></a>01843     fml = <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_cons_decl, 1, &amp;u), fml1);
<a name="l01844"></a>01844     printf(<span class="stringliteral">"Formula %s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, fml));
<a name="l01845"></a>01845     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, fml, <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01846"></a>01846 
<a name="l01847"></a>01847     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, fml1, <a class="code" href="group__capi.html#g1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01848"></a>01848 
<a name="l01849"></a>01849     <span class="comment">/* delete logical context */</span>
<a name="l01850"></a>01850     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01851"></a>01851 }
<a name="l01852"></a>01852 
<a name="l01856"></a><a class="code" href="group__capi__ex.html#g7180a37232a0028dd87058dcf37a1ea2">01856</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g7180a37232a0028dd87058dcf37a1ea2" title="Create a binary tree datatype.">tree_example</a>() {
<a name="l01857"></a>01857     Z3_context ctx = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01858"></a>01858     Z3_sort cell;
<a name="l01859"></a>01859     Z3_func_decl nil_decl, is_nil_decl, cons_decl, is_cons_decl, car_decl, cdr_decl;
<a name="l01860"></a>01860     Z3_ast nil, l1, l2, x, y, u, v, fml, fml1;
<a name="l01861"></a>01861     Z3_symbol head_tail[2] = { <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"car"</span>), <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"cdr"</span>) };
<a name="l01862"></a>01862     Z3_sort sorts[2] = { 0, 0 };
<a name="l01863"></a>01863     <span class="keywordtype">unsigned</span> sort_refs[2] = { 0, 0 };
<a name="l01864"></a>01864     Z3_constructor nil_con, cons_con;
<a name="l01865"></a>01865     Z3_constructor constructors[2];
<a name="l01866"></a>01866     Z3_func_decl cons_accessors[2];
<a name="l01867"></a>01867     Z3_ast ors[2];
<a name="l01868"></a>01868 
<a name="l01869"></a>01869     printf(<span class="stringliteral">"\ntree_example\n"</span>);
<a name="l01870"></a>01870 
<a name="l01871"></a>01871     nil_con  = <a class="code" href="group__capi.html#g9f9ef0759dda51396ab7874c676cec7e" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"nil"</span>), <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"is_nil"</span>), 0, 0, 0, 0);
<a name="l01872"></a>01872     cons_con = <a class="code" href="group__capi.html#g9f9ef0759dda51396ab7874c676cec7e" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"cons"</span>), <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"is_cons"</span>), 2, head_tail, sorts, sort_refs);
<a name="l01873"></a>01873     constructors[0] = nil_con;
<a name="l01874"></a>01874     constructors[1] = cons_con;
<a name="l01875"></a>01875     
<a name="l01876"></a>01876     cell = <a class="code" href="group__capi.html#gb6809d53327d807da9158abdf75df387" title="Create recursive datatype. Return the datatype sort.">Z3_mk_datatype</a>(ctx, <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"cell"</span>), 2, constructors);
<a name="l01877"></a>01877 
<a name="l01878"></a>01878     <a class="code" href="group__capi.html#g72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared funcions.">Z3_query_constructor</a>(ctx, nil_con, 0, &amp;nil_decl, &amp;is_nil_decl, 0);
<a name="l01879"></a>01879     <a class="code" href="group__capi.html#g72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared funcions.">Z3_query_constructor</a>(ctx, cons_con, 2, &amp;cons_decl, &amp;is_cons_decl, cons_accessors);
<a name="l01880"></a>01880     car_decl = cons_accessors[0];
<a name="l01881"></a>01881     cdr_decl = cons_accessors[1];
<a name="l01882"></a>01882 
<a name="l01883"></a>01883     <a class="code" href="group__capi.html#g63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,nil_con);
<a name="l01884"></a>01884     <a class="code" href="group__capi.html#g63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,cons_con);
<a name="l01885"></a>01885 
<a name="l01886"></a>01886 
<a name="l01887"></a>01887     nil = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, nil_decl, 0, 0);
<a name="l01888"></a>01888     l1 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, nil, nil);
<a name="l01889"></a>01889     l2 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, l1, nil);
<a name="l01890"></a>01890 
<a name="l01891"></a>01891     <span class="comment">/* nil != cons(nil, nil) */</span>
<a name="l01892"></a>01892     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, nil, l1)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01893"></a>01893 
<a name="l01894"></a>01894     <span class="comment">/* cons(x,u) = cons(x, v) =&gt; u = v */</span>
<a name="l01895"></a>01895     u = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"u"</span>, cell);
<a name="l01896"></a>01896     v = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"v"</span>, cell);    
<a name="l01897"></a>01897     x = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"x"</span>, cell);
<a name="l01898"></a>01898     y = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"y"</span>, cell);    
<a name="l01899"></a>01899     l1 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, x, u);
<a name="l01900"></a>01900     l2 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, y, v);
<a name="l01901"></a>01901     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, v)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01902"></a>01902     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01903"></a>01903 
<a name="l01904"></a>01904     <span class="comment">/* is_nil(u) or is_cons(u) */</span>
<a name="l01905"></a>01905     ors[0] = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_nil_decl, 1, &amp;u);
<a name="l01906"></a>01906     ors[1] = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_cons_decl, 1, &amp;u);
<a name="l01907"></a>01907     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, ors), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01908"></a>01908 
<a name="l01909"></a>01909     <span class="comment">/* occurs check u != cons(x,u) */</span>    
<a name="l01910"></a>01910     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, l1)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01911"></a>01911 
<a name="l01912"></a>01912     <span class="comment">/* destructors: is_cons(u) =&gt; u = cons(car(u),cdr(u)) */</span>
<a name="l01913"></a>01913     fml1 = <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, car_decl, u), <a class="code" href="group__capi__ex.html#g27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, cdr_decl, u)));
<a name="l01914"></a>01914     fml = <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_cons_decl, 1, &amp;u), fml1);
<a name="l01915"></a>01915     printf(<span class="stringliteral">"Formula %s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, fml));
<a name="l01916"></a>01916     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, fml, <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01917"></a>01917 
<a name="l01918"></a>01918     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, fml1, <a class="code" href="group__capi.html#g1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01919"></a>01919 
<a name="l01920"></a>01920     <span class="comment">/* delete logical context */</span>
<a name="l01921"></a>01921     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01922"></a>01922 
<a name="l01923"></a>01923 
<a name="l01924"></a>01924 }
<a name="l01925"></a>01925 
<a name="l01933"></a><a class="code" href="group__capi__ex.html#g93d1bdb67347976ccffbc086de426f48">01933</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g93d1bdb67347976ccffbc086de426f48" title="Create a forest of trees.">forest_example</a>() {
<a name="l01934"></a>01934     Z3_context ctx = <a class="code" href="group__capi__ex.html#g102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context.">mk_context</a>();
<a name="l01935"></a>01935     Z3_sort tree, forest;
<a name="l01936"></a>01936     Z3_func_decl nil1_decl, is_nil1_decl, cons1_decl, is_cons1_decl, car1_decl, cdr1_decl;
<a name="l01937"></a>01937     Z3_func_decl nil2_decl, is_nil2_decl, cons2_decl, is_cons2_decl, car2_decl, cdr2_decl;
<a name="l01938"></a>01938     Z3_ast nil1, nil2, t1, t2, t3, t4, f1, f2, f3, l1, l2, x, y, u, v;
<a name="l01939"></a>01939     Z3_symbol head_tail[2] = { <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"car"</span>), <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"cdr"</span>) };
<a name="l01940"></a>01940     Z3_sort sorts[2] = { 0, 0 };
<a name="l01941"></a>01941     <span class="keywordtype">unsigned</span> sort_refs[2] = { 0, 0 };
<a name="l01942"></a>01942     Z3_constructor nil1_con, cons1_con, nil2_con, cons2_con;
<a name="l01943"></a>01943     Z3_constructor constructors1[2], constructors2[2];
<a name="l01944"></a>01944     Z3_func_decl cons_accessors[2];
<a name="l01945"></a>01945     Z3_ast ors[2];
<a name="l01946"></a>01946     Z3_constructor_list clist1, clist2;
<a name="l01947"></a>01947     Z3_constructor_list clists[2];
<a name="l01948"></a>01948     Z3_symbol sort_names[2] = { <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"forest"</span>), <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"tree"</span>) };
<a name="l01949"></a>01949 
<a name="l01950"></a>01950     printf(<span class="stringliteral">"\nforest_example\n"</span>);
<a name="l01951"></a>01951 
<a name="l01952"></a>01952     <span class="comment">/* build a forest */</span>
<a name="l01953"></a>01953     nil1_con  = <a class="code" href="group__capi.html#g9f9ef0759dda51396ab7874c676cec7e" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"nil1"</span>), <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"is_nil1"</span>), 0, 0, 0, 0);
<a name="l01954"></a>01954     sort_refs[0] = 1; <span class="comment">/* the car of a forest is a tree */</span>
<a name="l01955"></a>01955     sort_refs[1] = 0;
<a name="l01956"></a>01956     cons1_con = <a class="code" href="group__capi.html#g9f9ef0759dda51396ab7874c676cec7e" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"cons1"</span>), <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"is_cons1"</span>), 2, head_tail, sorts, sort_refs);
<a name="l01957"></a>01957     constructors1[0] = nil1_con;
<a name="l01958"></a>01958     constructors1[1] = cons1_con;
<a name="l01959"></a>01959 
<a name="l01960"></a>01960     <span class="comment">/* build a tree */</span>
<a name="l01961"></a>01961     nil2_con  = <a class="code" href="group__capi.html#g9f9ef0759dda51396ab7874c676cec7e" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"nil2"</span>), <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"is_nil2"</span>),0, 0, 0, 0);
<a name="l01962"></a>01962     sort_refs[0] = 0; <span class="comment">/* both branches of a tree are forests */</span>
<a name="l01963"></a>01963     sort_refs[1] = 0;
<a name="l01964"></a>01964     cons2_con = <a class="code" href="group__capi.html#g9f9ef0759dda51396ab7874c676cec7e" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"cons2"</span>), <a class="code" href="group__capi.html#gfebb0d3c212927cf7834c3a20a84ecae" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">"is_cons2"</span>),2, head_tail, sorts, sort_refs);
<a name="l01965"></a>01965     constructors2[0] = nil2_con;
<a name="l01966"></a>01966     constructors2[1] = cons2_con;
<a name="l01967"></a>01967     
<a name="l01968"></a>01968     clist1 = <a class="code" href="group__capi.html#gcb68dfdb34e9a1c33e69c2747a2fd2de" title="Create list of constructors.">Z3_mk_constructor_list</a>(ctx, 2, constructors1);
<a name="l01969"></a>01969     clist2 = <a class="code" href="group__capi.html#gcb68dfdb34e9a1c33e69c2747a2fd2de" title="Create list of constructors.">Z3_mk_constructor_list</a>(ctx, 2, constructors2);
<a name="l01970"></a>01970 
<a name="l01971"></a>01971     clists[0] = clist1;
<a name="l01972"></a>01972     clists[1] = clist2;
<a name="l01973"></a>01973 
<a name="l01974"></a>01974     <a class="code" href="group__capi.html#g6a9d4dbd78fc1d785ed57d8dffe8e829" title="Create mutually recursive datatypes.">Z3_mk_datatypes</a>(ctx, 2, sort_names, sorts, clists);
<a name="l01975"></a>01975     forest = sorts[0];
<a name="l01976"></a>01976     tree = sorts[1];
<a name="l01977"></a>01977 
<a name="l01978"></a>01978     <a class="code" href="group__capi.html#g72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared funcions.">Z3_query_constructor</a>(ctx, nil1_con, 0, &amp;nil1_decl, &amp;is_nil1_decl, 0);
<a name="l01979"></a>01979     <a class="code" href="group__capi.html#g72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared funcions.">Z3_query_constructor</a>(ctx, cons1_con, 2, &amp;cons1_decl, &amp;is_cons1_decl, cons_accessors);
<a name="l01980"></a>01980     car1_decl = cons_accessors[0];
<a name="l01981"></a>01981     cdr1_decl = cons_accessors[1];
<a name="l01982"></a>01982 
<a name="l01983"></a>01983     <a class="code" href="group__capi.html#g72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared funcions.">Z3_query_constructor</a>(ctx, nil2_con, 0, &amp;nil2_decl, &amp;is_nil2_decl, 0);
<a name="l01984"></a>01984     <a class="code" href="group__capi.html#g72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared funcions.">Z3_query_constructor</a>(ctx, cons2_con, 2, &amp;cons2_decl, &amp;is_cons2_decl, cons_accessors);
<a name="l01985"></a>01985     car2_decl = cons_accessors[0];
<a name="l01986"></a>01986     cdr2_decl = cons_accessors[1];
<a name="l01987"></a>01987     
<a name="l01988"></a>01988     <a class="code" href="group__capi.html#gd7f91f3d9618323c8145f34acadbff96" title="reclaim memory allocated for constructor list.">Z3_del_constructor_list</a>(ctx, clist1);
<a name="l01989"></a>01989     <a class="code" href="group__capi.html#gd7f91f3d9618323c8145f34acadbff96" title="reclaim memory allocated for constructor list.">Z3_del_constructor_list</a>(ctx, clist2);
<a name="l01990"></a>01990     <a class="code" href="group__capi.html#g63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,nil1_con);
<a name="l01991"></a>01991     <a class="code" href="group__capi.html#g63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,cons1_con);
<a name="l01992"></a>01992     <a class="code" href="group__capi.html#g63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,nil2_con);
<a name="l01993"></a>01993     <a class="code" href="group__capi.html#g63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,cons2_con);
<a name="l01994"></a>01994 
<a name="l01995"></a>01995     nil1 = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, nil1_decl, 0, 0);
<a name="l01996"></a>01996     nil2 = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, nil2_decl, 0, 0);
<a name="l01997"></a>01997     f1 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons1_decl, nil2, nil1);
<a name="l01998"></a>01998     t1 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons2_decl, nil1, nil1);
<a name="l01999"></a>01999     t2 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons2_decl, f1, nil1);
<a name="l02000"></a>02000     t3 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons2_decl, f1, f1);
<a name="l02001"></a>02001     t4 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons2_decl, nil1, f1);
<a name="l02002"></a>02002     f2 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons1_decl, t1, nil1);
<a name="l02003"></a>02003     f3 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons1_decl, t1, f1);
<a name="l02004"></a>02004 
<a name="l02005"></a>02005 
<a name="l02006"></a>02006     <span class="comment">/* nil != cons(nil,nil) */</span>
<a name="l02007"></a>02007     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, nil1, f1)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02008"></a>02008     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, nil2, t1)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02009"></a>02009 
<a name="l02010"></a>02010 
<a name="l02011"></a>02011     <span class="comment">/* cons(x,u) = cons(x, v) =&gt; u = v */</span>
<a name="l02012"></a>02012     u = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"u"</span>, forest);
<a name="l02013"></a>02013     v = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"v"</span>, forest);    
<a name="l02014"></a>02014     x = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"x"</span>, tree);
<a name="l02015"></a>02015     y = <a class="code" href="group__capi__ex.html#gd55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">"y"</span>, tree);
<a name="l02016"></a>02016     l1 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons1_decl, x, u);
<a name="l02017"></a>02017     l2 = <a class="code" href="group__capi__ex.html#ga498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons1_decl, y, v);
<a name="l02018"></a>02018     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, v)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02019"></a>02019     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gc829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02020"></a>02020 
<a name="l02021"></a>02021     <span class="comment">/* is_nil(u) or is_cons(u) */</span>
<a name="l02022"></a>02022     ors[0] = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_nil1_decl, 1, &amp;u);
<a name="l02023"></a>02023     ors[1] = <a class="code" href="group__capi.html#g33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_cons1_decl, 1, &amp;u);
<a name="l02024"></a>02024     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, ors), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02025"></a>02025 
<a name="l02026"></a>02026     <span class="comment">/* occurs check u != cons(x,u) */</span>    
<a name="l02027"></a>02027     <a class="code" href="group__capi__ex.html#gc1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#g95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, l1)), <a class="code" href="group__capi.html#gd86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02028"></a>02028 
<a name="l02029"></a>02029     <span class="comment">/* delete logical context */</span>
<a name="l02030"></a>02030     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l02031"></a>02031 }
<a name="l02032"></a>02032 
<a name="l02033"></a>02033 
<a name="l02034"></a>02034 
<a name="l02041"></a><a class="code" href="group__capi__ex.html#g8c767d0ad3c40daa42f99ad71ee6db8f">02041</a> <span class="keywordtype">void</span> <a class="code" href="group__capi__ex.html#g8c767d0ad3c40daa42f99ad71ee6db8f" title="Prove a theorem and extract, and print the proof.">unsat_core_and_proof_example</a>() {
<a name="l02042"></a>02042     Z3_context ctx = <a class="code" href="group__capi__ex.html#gf861446b22ab36b8ffe20a4aba630075" title="Create a logical context.">mk_proof_context</a>();
<a name="l02043"></a>02043     Z3_ast pa = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"PredA"</span>);
<a name="l02044"></a>02044     Z3_ast pb = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"PredB"</span>);
<a name="l02045"></a>02045     Z3_ast pc = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"PredC"</span>);
<a name="l02046"></a>02046     Z3_ast pd = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"PredD"</span>);
<a name="l02047"></a>02047     Z3_ast p1 = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"P1"</span>);
<a name="l02048"></a>02048     Z3_ast p2 = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"P2"</span>);
<a name="l02049"></a>02049     Z3_ast p3 = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"P3"</span>);
<a name="l02050"></a>02050     Z3_ast p4 = <a class="code" href="group__capi__ex.html#g397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">"P4"</span>);
<a name="l02051"></a>02051     Z3_ast assumptions[4] = { <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, p1), <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, p2), <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, p3), <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, p4) };
<a name="l02052"></a>02052     Z3_ast args1[3] = { pa, pb, pc };
<a name="l02053"></a>02053     Z3_ast f1 = <a class="code" href="group__capi.html#gcde98ce4a8ed1dde50b9669db4838c61" title="Create an AST node representing args[0] and ... and args[num_args-1].">Z3_mk_and</a>(ctx, 3, args1);
<a name="l02054"></a>02054     Z3_ast args2[3] = { pa, <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, pb), pc };
<a name="l02055"></a>02055     Z3_ast f2 = <a class="code" href="group__capi.html#gcde98ce4a8ed1dde50b9669db4838c61" title="Create an AST node representing args[0] and ... and args[num_args-1].">Z3_mk_and</a>(ctx, 3, args2);
<a name="l02056"></a>02056     Z3_ast args3[2] = { <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, pa), <a class="code" href="group__capi.html#g3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, pc) };
<a name="l02057"></a>02057     Z3_ast f3 = <a class="code" href="group__capi.html#g00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, args3);
<a name="l02058"></a>02058     Z3_ast f4 = pd;
<a name="l02059"></a>02059     Z3_ast g1[2] = { f1, p1 };
<a name="l02060"></a>02060     Z3_ast g2[2] = { f2, p2 };
<a name="l02061"></a>02061     Z3_ast g3[2] = { f3, p3 };
<a name="l02062"></a>02062     Z3_ast g4[2] = { f4, p4 };    
<a name="l02063"></a>02063     Z3_ast core[4] = { 0, 0, 0, 0 };
<a name="l02064"></a>02064     <span class="keywordtype">unsigned</span> core_size = 4;
<a name="l02065"></a>02065     Z3_ast proof;
<a name="l02066"></a>02066     Z3_model m      = 0;
<a name="l02067"></a>02067     <a class="code" href="group__capi.html#g6c2de6ea89b244e37c3ffb17a9ea2a89" title="Lifted Boolean type: false, undefined, true.">Z3_lbool</a> result;
<a name="l02068"></a>02068     <span class="keywordtype">unsigned</span> i;
<a name="l02069"></a>02069     
<a name="l02070"></a>02070     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#g00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, g1));
<a name="l02071"></a>02071     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#g00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, g2));
<a name="l02072"></a>02072     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#g00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, g3));
<a name="l02073"></a>02073     <a class="code" href="group__capi.html#g1a05ff73a564ae7256a2257048a4680a" title="Assert a constraing into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#g00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, g4));
<a name="l02074"></a>02074 
<a name="l02075"></a>02075     result = <a class="code" href="group__capi.html#gdb98b26783a21eb291c447c2d63aa84c" title="Check whether the given logical context and optional assumptions is consistent or...">Z3_check_assumptions</a>(ctx, 4, assumptions, &amp;m, &amp;proof, &amp;core_size, core);
<a name="l02076"></a>02076 
<a name="l02077"></a>02077     <span class="keywordflow">switch</span> (result) {
<a name="l02078"></a>02078     <span class="keywordflow">case</span> Z3_L_FALSE:
<a name="l02079"></a>02079         printf(<span class="stringliteral">"unsat\n"</span>);
<a name="l02080"></a>02080         printf(<span class="stringliteral">"proof: %s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, proof));
<a name="l02081"></a>02081 
<a name="l02082"></a>02082         printf(<span class="stringliteral">"\ncore:\n"</span>);
<a name="l02083"></a>02083         <span class="keywordflow">for</span> (i = 0; i &lt; core_size; ++i) {
<a name="l02084"></a>02084                         printf(<span class="stringliteral">"%s\n"</span>, <a class="code" href="group__capi.html#gb1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, core[i]));
<a name="l02085"></a>02085         }
<a name="l02086"></a>02086         printf(<span class="stringliteral">"\n"</span>);
<a name="l02087"></a>02087         <span class="keywordflow">break</span>;
<a name="l02088"></a>02088     <span class="keywordflow">case</span> Z3_L_UNDEF:
<a name="l02089"></a>02089         printf(<span class="stringliteral">"unknown\n"</span>);
<a name="l02090"></a>02090         printf(<span class="stringliteral">"potential model:\n"</span>);
<a name="l02091"></a>02091         <a class="code" href="group__capi__ex.html#g4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a>(ctx, stdout, m);
<a name="l02092"></a>02092         <span class="keywordflow">break</span>;
<a name="l02093"></a>02093     <span class="keywordflow">case</span> Z3_L_TRUE:
<a name="l02094"></a>02094         printf(<span class="stringliteral">"sat\n"</span>);
<a name="l02095"></a>02095         <a class="code" href="group__capi__ex.html#g4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a>(ctx, stdout, m);
<a name="l02096"></a>02096         <span class="keywordflow">break</span>;
<a name="l02097"></a>02097     }
<a name="l02098"></a>02098     <span class="keywordflow">if</span> (m) {
<a name="l02099"></a>02099         <a class="code" href="group__capi.html#g0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l02100"></a>02100     }
<a name="l02101"></a>02101 
<a name="l02102"></a>02102     <span class="comment">/* delete logical context */</span>
<a name="l02103"></a>02103     <a class="code" href="group__capi.html#g556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l02104"></a>02104 }
<a name="l02105"></a>02105 
<a name="l02108"></a>02108 
<a name="l02109"></a>02109 <span class="keywordtype">int</span> main() 
<a name="l02110"></a>02110 {
<a name="l02111"></a>02111 
<a name="l02112"></a>02112     <a class="code" href="group__capi__ex.html#g33abf350aae0212c85a5903e41764025" title="Display Z3 version in the standard output.">display_version</a>();
<a name="l02113"></a>02113     <a class="code" href="group__capi__ex.html#gb7c1e72848c0e19ca409fc7acd888310" title="&amp;quot;Hello world&amp;quot; example: create a Z3 logical context, and delete it.">simple_example</a>();
<a name="l02114"></a>02114     <a class="code" href="group__capi__ex.html#gede2d42cf4df4754f3aca5a502313dab">demorgan</a>();
<a name="l02115"></a>02115     <a class="code" href="group__capi__ex.html#ge1fc416964019d6927fd6917ae32d914" title="Find a model for x xor y.">find_model_example1</a>();
<a name="l02116"></a>02116     <a class="code" href="group__capi__ex.html#g5194ee6f65cb7e4280e7577816d67e4a" title="Find a model for x &amp;lt; y + 1, x &amp;gt; 2. Then, assert not(x = y), and find another...">find_model_example2</a>();
<a name="l02117"></a>02117     <a class="code" href="group__capi__ex.html#g0cd53c9f10e66950a9121f5702bf8705" title="Prove x = y implies g(x) = g(y), and disprove x = y implies g(g(x)) = g(y).">prove_example1</a>();
<a name="l02118"></a>02118     <a class="code" href="group__capi__ex.html#g8a474ab19f7f08b45bf69d1bd6e2bb43" title="Prove not(g(g(x) - g(y)) = g(z)), x + z &amp;lt;= y &amp;lt;= x implies z &amp;lt; 0 . Then,...">prove_example2</a>();
<a name="l02119"></a>02119     <a class="code" href="group__capi__ex.html#g07ee56f1ada5226634e68a8b37989fbd" title="Show how push &amp;amp; pop can be used to create &amp;quot;backtracking&amp;quot; points.">push_pop_example1</a>();
<a name="l02120"></a>02120     <a class="code" href="group__capi__ex.html#g06e4829a7db00856491745b17a4201b7" title="Prove that f(x, y) = f(w, v) implies y = v when f is injective in the second argument...">quantifier_example1</a>();
<a name="l02121"></a>02121     <a class="code" href="group__capi__ex.html#ga4081035e25fec1e808c7edd33772a46" title="Prove store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1...">array_example1</a>();
<a name="l02122"></a>02122     <a class="code" href="group__capi__ex.html#g94757cc6b9bf9e6050b86b2794319798" title="Show that distinct(a_0, ... , a_n) is unsatisfiable when a_i&amp;#39;s are arrays from...">array_example2</a>();
<a name="l02123"></a>02123     <a class="code" href="group__capi__ex.html#gbadff2174e5e4af0a179365177222e00" title="Simple array type construction/deconstruction example.">array_example3</a>();
<a name="l02124"></a>02124     <a class="code" href="group__capi__ex.html#gab866a1a179a7456a35f906afa854bcd" title="Simple tuple type example. It creates a tuple that is a pair of real numbers.">tuple_example1</a>();
<a name="l02125"></a>02125     <a class="code" href="group__capi__ex.html#ga793cf13b8fcfdb908363f1890bc06ae" title="Simple bit-vector example. This example disproves that x - 10 &amp;lt;= 0 IFF x &amp;lt;=...">bitvector_example1</a>();
<a name="l02126"></a>02126     <a class="code" href="group__capi__ex.html#gb34a23f8c84c0235efb12c3d265c9398" title="Find x and y such that: x ^ y - 103 == x * y.">bitvector_example2</a>();
<a name="l02127"></a>02127     <a class="code" href="group__capi__ex.html#g1380b031db05b0b63542acf627b6bd1e" title="Demonstrate how to use Z3_eval.">eval_example1</a>();
<a name="l02128"></a>02128     <a class="code" href="group__capi__ex.html#g7a7c910ba34f5c87ec5bfdd87e5beb3f" title="Several logical context can be used simultaneously.">two_contexts_example1</a>();
<a name="l02129"></a>02129     <a class="code" href="group__capi__ex.html#g2355864af38b0f159907209f00084cf1" title="Demonstrates how error codes can be read insted of registering an error handler.">error_code_example1</a>();
<a name="l02130"></a>02130     <a class="code" href="group__capi__ex.html#g6fa0a732602aa294249b126f9eb2928d" title="Demonstrates how error handlers can be used.">error_code_example2</a>();
<a name="l02131"></a>02131     <a class="code" href="group__capi__ex.html#g34d5e8e536a5649693f8cefa4805a81e" title="Demonstrates how to use the SMTLIB parser.">parser_example1</a>();
<a name="l02132"></a>02132     <a class="code" href="group__capi__ex.html#g9c8fd60a787198a88ebcefc0282ea3cd" title="Demonstrates how to initialize the parser symbol table.">parser_example2</a>();
<a name="l02133"></a>02133     <a class="code" href="group__capi__ex.html#gad0cce961cb43f47950149c5bb3729ae" title="Demonstrates how to initialize the parser symbol table.">parser_example3</a>();
<a name="l02134"></a>02134     <a class="code" href="group__capi__ex.html#gb1d78024df78dbb10723537c15647aed" title="Display the declarations, assumptions and formulas in a SMT-LIB string.">parser_example4</a>();
<a name="l02135"></a>02135     <a class="code" href="group__capi__ex.html#gb9594032459f28272bbc74fe5e2c54fc" title="Demonstrates how to handle parser errors using Z3 error handling support.">parser_example5</a>();
<a name="l02136"></a>02136     <a class="code" href="group__capi__ex.html#gfa3f89e53c339dda8c0a9b4b126139f7" title="Test ite-term (if-then-else terms).">ite_example</a>();
<a name="l02137"></a>02137     <a class="code" href="group__capi__ex.html#gb3287b9c46ad438c87aa1f42b0e0dea8" title="Create a list datatype.">list_example</a>();
<a name="l02138"></a>02138     <a class="code" href="group__capi__ex.html#g7180a37232a0028dd87058dcf37a1ea2" title="Create a binary tree datatype.">tree_example</a>();
<a name="l02139"></a>02139     <a class="code" href="group__capi__ex.html#g93d1bdb67347976ccffbc086de426f48" title="Create a forest of trees.">forest_example</a>();
<a name="l02140"></a>02140     <a class="code" href="group__capi__ex.html#g850fd4407bd8d1e508cc09b4efce6085" title="Create an enumeration data type.">enum_example</a>();
<a name="l02141"></a>02141     <a class="code" href="group__capi__ex.html#g8c767d0ad3c40daa42f99ad71ee6db8f" title="Prove a theorem and extract, and print the proof.">unsat_core_and_proof_example</a>();
<a name="l02142"></a>02142     
<a name="l02143"></a>02143     <span class="keywordflow">return</span> 0;
<a name="l02144"></a>02144 }
</pre></div></div>
<div class="tabs"></div>
<address style="text-align: right;">
Last modified Thu Jun 18 11:31:26 2009
</BODY>
</HTML>
